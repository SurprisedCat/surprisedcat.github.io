<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>devops on SurprisedCat</title><link>https://surprisedcat.github.io/tags/devops/</link><description>Recent content in devops on SurprisedCat</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>Copyright Â© 2020â€“2021, SurprisedCat; all rights reserved.</copyright><lastBuildDate>Thu, 25 Nov 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://surprisedcat.github.io/tags/devops/index.xml" rel="self" type="application/rss+xml"/><item><title>devops-è‡ªåŠ¨åŒ–éƒ¨ç½²è‡ªå·±çš„åšå®¢</title><link>https://surprisedcat.github.io/projectnotes/devops-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/</link><pubDate>Thu, 25 Nov 2021 00:00:00 +0000</pubDate><guid>https://surprisedcat.github.io/projectnotes/devops-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/</guid><description>
&lt;h2 id="è‡ªåŠ¨åŒ–éƒ¨ç½²è‡ªå·±çš„åšå®¢---omit-in-toc---">è‡ªåŠ¨åŒ–éƒ¨ç½²è‡ªå·±çš„åšå®¢&lt;!-- omit in toc -->&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="#%E6%80%9D%E8%B7%AF%E6%B1%87%E6%80%BB">æ€è·¯æ±‡æ€»&lt;/a>&lt;/li>
&lt;li>&lt;a href="#%E9%80%89%E5%AE%9A%E9%9C%80%E8%A6%81git%E7%AE%A1%E7%90%86%E7%9A%84%E5%86%85%E5%AE%B9">é€‰å®šéœ€è¦gitç®¡ç†çš„å†…å®¹&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gitignore%E6%B7%BB%E5%8A%A0%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6%E5%A4%B1%E6%95%88%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95">gitignoreæ·»åŠ å¿½ç•¥æ–‡ä»¶å¤±æ•ˆçš„å¤„ç†æ–¹æ³•&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#%E5%9C%A8%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E6%90%AD%E5%BB%BAgit%E6%9C%8D%E5%8A%A1%E5%99%A8">åœ¨äº‘æœåŠ¡å™¨ä¸Šæ­å»ºgitæœåŠ¡å™¨&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#%E5%88%9B%E5%BB%BAgit%E7%94%A8%E6%88%B7%E5%92%8C%E5%BA%93%E6%96%87%E4%BB%B6">åˆ›å»ºGitç”¨æˆ·å’Œåº“æ–‡ä»¶&lt;/a>&lt;/li>
&lt;li>&lt;a href="#%E6%B7%BB%E5%8A%A0ssh%E5%85%AC%E9%92%A5">æ·»åŠ sshå…¬é’¥&lt;/a>&lt;/li>
&lt;li>&lt;a href="#%E6%9C%AC%E5%9C%B0%E5%BA%93%E8%AE%BE%E7%BD%AE%E8%BF%9C%E7%A8%8B%E5%BA%93%E7%9A%84%E5%9C%B0%E5%9D%80">æœ¬åœ°åº“è®¾ç½®è¿œç¨‹åº“çš„åœ°å€&lt;/a>&lt;/li>
&lt;li>&lt;a href="#%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8C%BA%E6%9B%B4%E6%96%B0%E6%96%B9%E6%B3%95">è¿œç¨‹ä»“åº“çš„å·¥ä½œåŒºæ›´æ–°æ–¹æ³•&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#%E6%8E%A8%E9%80%81%E7%BB%99%E8%A3%B8%E4%BB%93%E5%BA%93%E7%9A%84%E6%83%85%E5%BD%A2">æ¨é€ç»™è£¸ä»“åº“çš„æƒ…å½¢&lt;/a>&lt;/li>
&lt;li>&lt;a href="#%E6%8E%A8%E9%80%81%E7%BB%99%E6%99%AE%E9%80%9A%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9A%84%E6%83%85%E5%BD%A2">æ¨é€ç»™æ™®é€šè¿œç¨‹ä»“åº“çš„æƒ…å½¢&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#%E8%AE%BE%E7%BD%AEpost-receive-hook%E5%AE%8C%E6%88%90%E5%86%85%E5%AE%B9%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0">è®¾ç½®post-receive hookå®Œæˆå†…å®¹è‡ªåŠ¨æ›´æ–°&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#%E8%A3%B8%E4%BB%93%E5%BA%93%E7%9A%84%E6%9B%B4%E6%96%B0">è£¸ä»“åº“çš„æ›´æ–°&lt;/a>&lt;/li>
&lt;li>&lt;a href="#%E6%99%AE%E9%80%9A%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9A%84%E6%9B%B4%E6%96%B0%E8%84%9A%E6%9C%AC">æ™®é€šè¿œç¨‹ä»“åº“çš„æ›´æ–°è„šæœ¬&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#%E4%BD%BF%E7%94%A8hugo%E4%BD%9C%E4%B8%BA%E5%8D%9A%E5%AE%A2%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7">ä½¿ç”¨HUGOä½œä¸ºåšå®¢ç”Ÿæˆå·¥å…·&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#%E4%BF%AE%E6%94%B9hugo%E5%8D%9A%E5%AE%A2%E7%9A%84clarity%E4%B8%BB%E9%A2%98">ä¿®æ”¹Hugoåšå®¢çš„clarityä¸»é¢˜&lt;/a>&lt;/li>
&lt;li>&lt;a href="#%E4%B8%8A%E4%BC%A0%E4%BF%AE%E6%94%B9%E5%A5%BD%E7%9A%84hugo%E5%8D%9A%E5%AE%A2">ä¸Šä¼ ä¿®æ”¹å¥½çš„Hugoåšå®¢&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#%E4%BD%BF%E7%94%A8jenkins%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E7%BD%91%E7%AB%99">ä½¿ç”¨Jenkinsè‡ªåŠ¨åŒ–éƒ¨ç½²ç½‘ç«™&lt;/a>&lt;/li>
&lt;li>&lt;a href="#%E6%8E%A8%E9%80%81%E5%88%B0github%E5%B9%B6%E7%94%9F%E6%88%90gitpages">æ¨é€åˆ°Githubå¹¶ç”ŸæˆGitpages&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="æ€è·¯æ±‡æ€»">æ€è·¯æ±‡æ€»&lt;/h2>
&lt;p>æˆ‘è‡ªå·±åˆ†å‡ ä¸ªæ–‡ä»¶å¤¹å†™äº†ä¸€äº›ç¬”è®°å’Œèµ„æ–™ï¼Œç°åœ¨æƒ³ç”¨Hugoéƒ¨ç½²åˆ°è‡ªå·±çš„äº‘ä¸»æœºä¸ŠåŒæ—¶åŒæ­¥åˆ°githubä¸Šï¼Œåˆ©ç”¨gitpageåœ¨ç”Ÿæˆä¸€ä¸ªblogï¼Œä¹Ÿå°±æ˜¯è‡ªåŠ¨ç”Ÿæˆä¸¤ä¸ªåŒæ­¥çš„blogï¼Œåˆæ­¥ä½“éªŒä¸€ä¸‹DevOpsæµç¨‹ã€‚ç›®å‰æœ¬åœ°ä½¿ç”¨win10ï¼Œå¸¦æœ‰gitï¼›äº‘ä¸»æœºæ˜¯Debian 10ï¼Œæœ‰golang 1.15.14ç¯å¢ƒã€‚ä¸»è¦ä½¿ç”¨äº†git hookså’Œjenkinsï¼Œä»¥åŠrsyncä½œä¸ºè¡¥å……ã€‚&lt;/p>
&lt;p>&lt;img src="../../images/devops.png" alt="DevOps">&lt;/p>
&lt;p>æ€»ä½“æ€è·¯ï¼š&lt;/p>
&lt;ol>
&lt;li>ç”±äºæœ¬åœ°æ–‡ä»¶å¤¹éƒ½æ”¾åœ¨ä¸€èµ·ï¼Œé¦–å…ˆé€šè¿‡ç¼–è¾‘.gitignoreæ–‡ä»¶ï¼ŒæŒ‡å®šéœ€è¦gitç®¡ç†çš„å‡ ä¸ªæ–‡ä»¶ã€‚&lt;/li>
&lt;li>å°†è‡ªå·±çš„äº‘æœåŠ¡å™¨ä½œä¸ºä¸€ä¸ªgit remoteä»“åº“ï¼Œç®¡ç†è‡ªå·±çš„è¿™äº›èµ„æ–™å’Œç¬”è®°&lt;/li>
&lt;li>åœ¨äº‘æœåŠ¡å™¨çš„git repoä¸­è®¾ç½®hookï¼Œå°†è¿™äº›æœ¬æ¥åœ¨ä¸åŒæ–‡ä»¶å¤¹ä¸­ç¬”è®°å’Œèµ„æ–™&lt;del>å¤åˆ¶åˆ°ç‰¹å®šæ–‡ä»¶å¤¹ä¸­&lt;/del>ã€‚æ³¨:ç”¨hookå¤åˆ¶çš„æ–¹æ³•å¹¶ä¸å¥½ï¼Œå› ä¸ºå½“æ–‡ä»¶åç§°ä¿®æ”¹æˆ–è¢«åˆ é™¤æ—¶ï¼Œå°±æ— æ³•å®ç°æ–‡ä»¶çš„åŒæ­¥ã€‚
&lt;ul>
&lt;li>æ”¹æˆåœ¨è¿œç¨‹ä¸»æœºä¸Šå†è®¾ç½®ä¸€ä¸ªgitä»“åº“ï¼Œè®¾ç½®post-receive hooké€šçŸ¥jenkinså°†æäº¤çš„å†…å®¹pullåˆ°äº‘ä¸»æœºæ–°çš„ä»“åº“ä¸­&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å»ºç«‹hugoæ–‡ä»¶åˆ°gitä»“åº“çš„è½¯é“¾æ¥ï¼Œä¸èƒ½ä½¿ç”¨è½¯é“¾æ¥çš„ç”¨rsyncåŒæ­¥è¿‡å»ï¼Œå½“hugoç¼–è¯‘çš„æ—¶å€™å®é™…ä½¿ç”¨çš„æ˜¯gitä»“åº“ä¸­çš„æ–‡ä»¶&lt;/li>
&lt;li>ä½¿ç”¨jenkinsè‡ªåŠ¨æ„å»ºéƒ¨ç½²äº‘æœåŠ¡å™¨ä¸Šçš„Hugo blog&lt;/li>
&lt;li>å°†å®Œæ•´çš„ç¼–è¯‘å¥½çš„Hugo blogæ¨é€åˆ°GitHubï¼Œåˆ©ç”¨GitPagesç”Ÿæˆç½‘ç«™ã€‚&lt;/li>
&lt;/ol>
&lt;p>ä¸ºä»€ä¹ˆä¸è®¾ç½®ä¸¤ä¸ªremote repoåˆ†åˆ«æ¨é€ï¼Ÿæ€•è‡ªå·±ç–å¿½ï¼Œé€ æˆå¤§é‡çš„å†²çªå¤„ç†é—®é¢˜ã€‚&lt;/p>
&lt;p>ä¸ºä»€ä¹ˆä¸å…ˆæ¨é€åˆ°GitHubå†ç”¨Github Actionsæ¨é€åˆ°äº‘ä¸Šï¼Ÿè‡ªå·±è§‰å¾—åœ¨äº‘ä¸ŠæŠ˜è…¾æ¯”è¾ƒæ–¹ä¾¿ï¼Œå°±å½“äº‘æ˜¯æµ‹è¯•ç¯å¢ƒï¼ŒGitHubæ˜¯å‘å¸ƒç¯å¢ƒå§ã€‚&lt;/p>
&lt;h2 id="é€‰å®šéœ€è¦gitç®¡ç†çš„å†…å®¹">é€‰å®šéœ€è¦gitç®¡ç†çš„å†…å®¹&lt;/h2>
&lt;p>æˆ‘ä»¬åœ¨æœ‰å¾ˆå¤šæ–‡ä»¶/æ–‡ä»¶å¤¹çš„åœ°æ–¹æ‰§è¡Œ&lt;code>git init .&lt;/code>æ—¶ï¼Œä¼šæœ‰å¤§é‡ä¸éœ€è¦çš„æ–‡ä»¶ä¹Ÿè¢«æ”¾å…¥å¾…æ·»åŠ ç©ºé—´ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ª&lt;code>.gitignore&lt;/code>æ–‡ä»¶ç­›é€‰å‡ºæˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬éœ€è¦ä¿ç•™imagesï¼Œå­¦ä¹ ç¬”è®°ï¼Œå·¥ç¨‹ç¬”è®°ï¼Œç½‘é¡µèµ„æ–™å››ä¸ªæ–‡ä»¶å¤¹ï¼Œå…¶ä»–å…¨éƒ¨ä¸è¦ï¼Œåˆ™&lt;code>.gitignore&lt;/code>æ–‡ä»¶å¯ä»¥å†™æˆ:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln"> 1&lt;/span>&lt;span class="c1"># å…ˆå¿½ç•¥è·Ÿæ–‡ä»¶ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼Œå¼€å¤´ä½¿ç”¨/é˜²æ­¢é€’å½’&lt;/span>
&lt;span class="ln"> 2&lt;/span>/*
&lt;span class="ln"> 3&lt;/span>&lt;span class="c1"># å–åæ‰€æœ‰éœ€è¦gitç®¡ç†çš„æ–‡ä»¶&lt;/span>
&lt;span class="ln"> 4&lt;/span>&lt;span class="c1"># imageså›¾ç‰‡æ–‡ä»¶å¤¹&lt;/span>
&lt;span class="ln"> 5&lt;/span>!/images
&lt;span class="ln"> 6&lt;/span>&lt;span class="c1"># ç¬”è®°æ–‡ä»¶å¤¹ï¼šå­¦ä¹ ç¬”è®°ï¼Œå·¥ç¨‹ç¬”è®°&lt;/span>
&lt;span class="ln"> 7&lt;/span>!/å­¦ä¹ ç¬”è®°
&lt;span class="ln"> 8&lt;/span>!/å·¥ç¨‹ç¬”è®°
&lt;span class="ln"> 9&lt;/span>&lt;span class="c1"># èµ„æ–™æ–‡ä»¶å¤¹ï¼Œå·²æå‰éƒ½è½¬ä¸ºç½‘é¡µæ ¼å¼&lt;/span>
&lt;span class="ln">10&lt;/span>!/ç½‘é¡µèµ„æ–™
&lt;span class="ln">11&lt;/span>&lt;span class="c1"># .gitignoreæœ¬èº«&lt;/span>
&lt;span class="ln">12&lt;/span>!.gitignore
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç„¶åæŸ¥çœ‹ç›®å‰çŠ¶æ€ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln"> 1&lt;/span>$ git status
&lt;span class="ln"> 2&lt;/span>On branch master
&lt;span class="ln"> 3&lt;/span>No commits yet
&lt;span class="ln"> 4&lt;/span>Untracked files:
&lt;span class="ln"> 5&lt;/span> &lt;span class="o">(&lt;/span>use &lt;span class="s2">&amp;#34;git add &amp;lt;file&amp;gt;...&amp;#34;&lt;/span> to include in what will be committed&lt;span class="o">)&lt;/span>
&lt;span class="ln"> 6&lt;/span> .gitignore
&lt;span class="ln"> 7&lt;/span> images/
&lt;span class="ln"> 8&lt;/span> å­¦ä¹ ç¬”è®°/
&lt;span class="ln"> 9&lt;/span> å·¥ç¨‹ç¬”è®°/
&lt;span class="ln">10&lt;/span> ç½‘é¡µèµ„æ–™/
&lt;span class="ln">11&lt;/span>nothing added to commit but untracked files present &lt;span class="o">(&lt;/span>use &lt;span class="s2">&amp;#34;git add&amp;#34;&lt;/span> to track&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ²¡æœ‰é—®é¢˜ï¼Œæ¥ä¸‹æ¥æ­£å¸¸æµç¨‹ï¼Œæ·»åŠ è¿›gitæœ¬åœ°åº“ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>$ git add .
&lt;span class="ln">2&lt;/span>......
&lt;span class="ln">3&lt;/span>$ git commit -m &lt;span class="s2">&amp;#34;é¦–æ¬¡å°†imagesï¼Œå­¦ä¹ ç¬”è®°ï¼Œå·¥ç¨‹ç¬”è®°ï¼Œç½‘é¡µèµ„æ–™å››ä¸ªæ–‡ä»¶å¤¹æ·»åŠ è¿›repo&amp;#34;&lt;/span>
&lt;span class="ln">4&lt;/span>......
&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¦‚æœæ˜¯åˆæ¬¡ä½¿ç”¨gitï¼Œè¿˜è¦å…ˆé…ç½®ç”¨æˆ·ä¿¡æ¯ï¼Œè¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œå› ä¸ºæ¯ä¸€ä¸ªGitæäº¤éƒ½ä¼šä½¿ç”¨è¿™äº›ä¿¡æ¯ï¼Œå®ƒä»¬ä¼šå†™å…¥åˆ°ä½ çš„æ¯ä¸€æ¬¡æäº¤ä¸­ï¼Œä¸å¯æ›´æ”¹ã€‚æ¯”å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>$ git config --global user.name &lt;span class="s2">&amp;#34;John Doe&amp;#34;&lt;/span>
&lt;span class="ln">2&lt;/span>$ git config --global user.email johndoe@example.com
&lt;span class="ln">3&lt;/span>&lt;span class="c1"># ç„¶åæŸ¥çœ‹ç°æœ‰çš„å…¨å±€ä¿¡æ¯ï¼Œå·²æœ‰ç”¨æˆ·ä¿¡æ¯&lt;/span>
&lt;span class="ln">4&lt;/span>$ git config --list
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="gitignoreæ·»åŠ å¿½ç•¥æ–‡ä»¶å¤±æ•ˆçš„å¤„ç†æ–¹æ³•">gitignoreæ·»åŠ å¿½ç•¥æ–‡ä»¶å¤±æ•ˆçš„å¤„ç†æ–¹æ³•&lt;/h3>
&lt;p>å¦‚æœé¡¹ç›®å¼€å§‹çš„æ—¶å€™æ²¡æœ‰å°†ä¸€äº›æ— å…³æ–‡ä»¶é…ç½®è¿›&lt;code>.gitignore&lt;/code>é‡Œé¢,å¯¼è‡´æ–‡ä»¶å·²ç»è¿›è¡Œè·Ÿè¸ªäº†ï¼Œä½†æ˜¯ç›®å‰æƒ³æŠŠè¿™äº›æ–‡ä»¶æ·»åŠ åˆ°&lt;code>.gitignore&lt;/code>æ–‡ä»¶ä¸­ï¼Œä½†æ˜¯å‘ç°æ²¡æœ‰æ•ˆæœã€‚&lt;strong>è¿™æ˜¯å› ä¸º&lt;code>.gitignore&lt;/code>å¯¹å·²è¢«&lt;code>git&lt;/code>ç®¡ç†çš„æ–‡ä»¶æ— æ•ˆ&lt;/strong>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¿…é¡»ä½¿ç”¨&lt;code>git rm --cached &amp;lt; file name &amp;gt;&lt;/code>è¿™ä¸ªå‘½ä»¤æ¥ç§»é™¤å¯¹è¿™ä¸ªæ–‡ä»¶çš„è·Ÿè¸ªï¼Œç„¶åå°†ä¸æƒ³è¢«è·Ÿè¸ªçš„æ–‡ä»¶æ·»åŠ åˆ°&lt;code>.gitignore&lt;/code>æ–‡ä»¶é‡Œé¢å°±å¯ä»¥äº†ã€‚&lt;/p>
&lt;h2 id="åœ¨äº‘æœåŠ¡å™¨ä¸Šæ­å»ºgitæœåŠ¡å™¨">åœ¨äº‘æœåŠ¡å™¨ä¸Šæ­å»ºgitæœåŠ¡å™¨&lt;/h2>
&lt;p>ç”±äºgitæ˜¯å®Œå…¨åˆ†å¸ƒå¼è®¾è®¡ï¼Œæœ¬è´¨ä¸Šï¼Œå„ä¸ªgitåº“ä¹‹é—´æ˜¯æ²¡æœ‰ä¸»æ¬¡ä¹‹åˆ†çš„ï¼ˆå„ä¸ªåº“ä¹‹é—´å®é™…ä¸Šéƒ½å¯ä»¥äº’ç›¸pull/pushï¼‰ã€‚å› æ­¤ï¼Œåœ¨äº‘æœåŠ¡å™¨ä¸Šæ­å»ºä¸€ä¸ªgitæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å®‰è£…gitè¿‡ç¨‹ä¸Šæ²¡æœ‰åŒºåˆ«ã€‚åœ¨win 10 ä¸Šå®‰è£…gitå®‰è£…åŒ…ï¼ˆ&lt;strong>åŒ…æ‹¬git bashï¼Œå®ƒæœ‰ä¸€ä¸ªå¥‡è‘©è®¾è®¡ä¹‹åå†è¯´&lt;/strong>ï¼‰ï¼Œåœ¨Debian 10ä¸Šä½¿ç”¨&lt;code>sudo apt install git&lt;/code>å®‰è£…ã€‚æˆ‘ä»¬â€œäººä¸ºå†³å®šâ€è®©äº‘æœåŠ¡å™¨ä¸Šçš„git repoä½œä¸ºâ€œå…¬å…±åº“â€ï¼Œæœ¬åœ°ä¸»æœºä¸Šçš„ä½œä¸ºå·¥ä½œç¯å¢ƒã€‚&lt;/p>
&lt;h3 id="åˆ›å»ºgitç”¨æˆ·å’Œåº“æ–‡ä»¶">åˆ›å»ºGitç”¨æˆ·å’Œåº“æ–‡ä»¶&lt;/h3>
&lt;p>åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œæˆ‘ä»¬æœ€å¥½å†æ·»åŠ ä¸€ä¸ªä¸“ç”¨gitç”¨æˆ·ï¼ˆä¸æ·»åŠ ä¹Ÿå¯ä»¥ï¼ŒURLä¸­git@domain.com:portæˆ–git@ip:portå°±æ˜¯gitä½œä¸ºç”¨æˆ·åï¼Œå¦‚æœä½ ç”¨çš„æ˜¯åˆ«çš„ç”¨æˆ·ï¼Œæ¯”å¦‚jackï¼Œé‚£ä¹ˆå°±ç”¨jack@domain.com:portï¼‰&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln"> 1&lt;/span>&lt;span class="c1"># åœ¨äº‘æœåŠ¡å™¨ä¸Š&lt;/span>
&lt;span class="ln"> 2&lt;/span>$ sudo adduser git
&lt;span class="ln"> 3&lt;/span>......... &lt;span class="c1"># è¿™é‡Œä¼šè®¾å®šgitçš„å¯†ç ï¼Œè¦è®°ä½&lt;/span>
&lt;span class="ln"> 4&lt;/span>.........
&lt;span class="ln"> 5&lt;/span>.........
&lt;span class="ln"> 6&lt;/span>$ &lt;span class="nb">cd&lt;/span> /srv &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> sudo mkdir gitblogs.git &lt;span class="c1"># æœªæ¥æŠŠ/srv/gitblogs.gitä½œä¸ºåº“ä½ç½®ï¼Œä¸€èˆ¬gitåº“éƒ½ä»¥.gitä½œä¸ºç»“å°¾&lt;/span>
&lt;span class="ln"> 7&lt;/span>$ sudo chown -R git:git gitblogs.git &lt;span class="c1"># æŠŠæ‰€å±ç”¨æˆ·ä»rootæ”¹æˆgit&lt;/span>
&lt;span class="ln"> 8&lt;/span>$ su - git &lt;span class="c1"># å¸¦ - ç¬¦å·è¡¨ç¤ºç¯å¢ƒå˜é‡ä¹Ÿè·Ÿç€åˆ‡æ¢&lt;/span>
&lt;span class="ln"> 9&lt;/span>&lt;span class="c1"># å¦‚æœæŠŠgitè®¾ç½®æˆéç™»å½•ç”¨æˆ·ï¼Œåˆ™ä»¥ä¸‹æ“ä½œç”¨rootæ‰§è¡Œï¼Œå†æŠŠæ–‡ä»¶æ‹¥æœ‰è€…å’Œç»„æ”¹æˆgit&lt;/span>
&lt;span class="ln">10&lt;/span>.......... &lt;span class="c1"># è¾“å…¥gitç”¨æˆ·å¯†ç &lt;/span>
&lt;span class="ln">11&lt;/span>$ id &lt;span class="c1"># å®é™…idå·ç å¯èƒ½æœ‰åŒºåˆ«&lt;/span>
&lt;span class="ln">12&lt;/span>&lt;span class="nv">uid&lt;/span>&lt;span class="o">=&lt;/span>1001&lt;span class="o">(&lt;/span>git&lt;span class="o">)&lt;/span> &lt;span class="nv">gid&lt;/span>&lt;span class="o">=&lt;/span>1001&lt;span class="o">(&lt;/span>git&lt;span class="o">)&lt;/span> &lt;span class="nv">groups&lt;/span>&lt;span class="o">=&lt;/span>1001&lt;span class="o">(&lt;/span>git&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æœ‰çš„ç”¨&lt;code>useradd git&lt;/code>åˆ›å»ºæ–°ç”¨æˆ·ï¼Œè¿™æ ·åªæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæœ€å°ç”¨æˆ·ç»“æ„ï¼Œé‡Œé¢å¾ˆå¤šè®¾ç½®ã€ç¯å¢ƒå˜é‡å¾—è‡ªå·±å¼„ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚è‡ªå·±ä¹Ÿæ²¡é‚£ä¹ˆå¤šå®‰å…¨æ€§è®²ç©¶ï¼ˆåŒ…æ‹¬ä½†ä¸é™äºnonloginè®¾ç½®ï¼‰ï¼Œå°±ä¸é‚£ä¹ˆéº»çƒ¦äº†ï¼Œç›´æ¥&lt;code>sudo adduser git&lt;/code>æå®šã€‚ä¸‹é¢æˆ‘ä»¬è¦åœ¨äº‘ç«¯å»ºç«‹å­˜å‚¨å†…å®¹çš„ä»“åº“ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€æ˜¯å»ºç«‹è£¸åº“ï¼ŒäºŒæ˜¯å»ºç«‹æ™®é€šåº“æ¥å®ç°åŒæ­¥ã€‚å»ºç«‹è£¸åº“ä¹‹åï¼Œé‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œå³ä½¿pushå†…å®¹ä¹‹åä¹Ÿä¸ä¼šæ˜¾ç¤ºåˆ°å·¥ä½œåŒºï¼Œä¹Ÿæ— æ³•è¿›è¡Œæ“ä½œï¼Œåªæ˜¯å•çº¯çš„ä¸€ä¸ªå­˜å‚¨ä»“åº“ï¼Œéœ€è¦åœ¨äº‘ç«¯å»ºç«‹ä¸€ä¸ªä¸­è½¬æ™®é€šä»“åº“æ¥è¯»å–å†…å®¹ï¼›å»ºç«‹æ™®é€šåº“å¯ä»¥ä¸ç”¨å†åœ¨äº‘ç«¯å»ºç«‹ä¸­è½¬åº“ï¼Œä½†æ˜¯éœ€è¦post-receiveé’©å­æ¥å®ç°å†…å®¹æ›´æ–°ã€‚æˆ‘è¿™é‡Œæ›´æ¨èç¬¬ä¸€ç§ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯åˆå§‹åŒ–è£¸åº“ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>$ &lt;span class="nb">cd&lt;/span> /srv/gitblogs.git
&lt;span class="ln">2&lt;/span>&lt;span class="c1"># è¿œç¨‹æœåŠ¡å™¨åˆå§‹åŒ–ä»“åº“&lt;/span>
&lt;span class="ln">3&lt;/span>$ git init . --bare
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸‹é¢æ˜¯åˆå§‹åŒ–æ™®é€šåº“&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>$ &lt;span class="nb">cd&lt;/span> /srv/gitblogs.git
&lt;span class="ln">2&lt;/span>&lt;span class="c1"># è¿œç¨‹æœåŠ¡å™¨åˆå§‹åŒ–ä»“åº“&lt;/span>
&lt;span class="ln">3&lt;/span>$ git init .
&lt;span class="ln">4&lt;/span>&lt;span class="c1"># å…è®¸å‘æ™®é€šåº“push&lt;/span>
&lt;span class="ln">5&lt;/span>$ git config receive.denyCurrentBranch ignore
&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¯¦ç»†è¯´æ˜å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>ï¼ˆ1ï¼‰æˆ‘ä»¬å¯ä»¥ç”¨&lt;code>git init .&lt;/code>å»ºç«‹ä¸€ä¸ªæ™®é€šåº“ï¼Œè€Œéè£¸åº“ã€‚å½“ä½ åˆ›å»ºä¸€ä¸ªæ™®é€šåº“æ—¶ï¼Œåœ¨å·¥ä½œç›®å½•ä¸‹ï¼Œé™¤äº†.gitç›®å½•ä¹‹å¤–ï¼Œä½ è¿˜å¯ä»¥çœ‹åˆ°åº“ä¸­æ‰€åŒ…å«çš„æ‰€æœ‰æºæ–‡ä»¶ã€‚ä½ æ‹¥æœ‰äº†ä¸€ä¸ªå¯ä»¥è¿›è¡Œæµè§ˆå’Œä¿®æ”¹ï¼ˆadd, commit, deleteç­‰ï¼‰çš„æœ¬åœ°åº“ã€‚å½“ä½ åˆ›å»ºä¸€ä¸ªè£¸åº“æ—¶ï¼Œåœ¨å·¥ä½œç›®å½•ä¸‹ï¼Œåªæœ‰ä¸€ä¸ª.gitç›®å½•ï¼Œ&lt;strong>è£¸åº“æ˜¯æ²¡æœ‰å·¥ä½œåŒºçš„&lt;/strong>ï¼åº“ä»…åŒ…å«è®°å½•ç€ç‰ˆæœ¬å†å²çš„æ–‡ä»¶ã€‚å¦‚æœå»ºç«‹çš„æ˜¯æ™®é€šåº“ï¼Œç”±äºæœ‰å·¥ä½œåŒºï¼Œå¯ä»¥ç›´æ¥æŠŠhugoåšå®¢å†…å®¹çš„è½¯è¿æ¥å»ºç«‹åˆ°æ™®é€šåº“çš„æ–‡ä»¶ä¸­ï¼Œä½†æ˜¯gitä¸é¼“åŠ±ç›´æ¥æ“ä½œè¿œç¨‹ä»“åº“çš„å†…å®¹ï¼Œæ‰€ä»¥æˆ‘æ¨èåœ¨äº‘ä¸Šå»ºç«‹è£¸åº“åï¼Œåœ¨å»ºç«‹ç¬¬äºŒä¸ªæ™®é€šåº“ä½œä¸ºä¸­è½¬ã€‚&lt;/p>
&lt;p>ï¼ˆ2ï¼‰è‡ªGit 1.6.2ç‰ˆä»¥æ¥ï¼ŒGité»˜è®¤ä¸ä¼šè®©ä½ æ¨é€åˆ°éè£¸åº“ã€‚è¿™æ˜¯å› ä¸º&lt;code>git push&lt;/code>å‘½ä»¤ä»…æ›´æ–°è¿œç¨‹å­˜å‚¨åº“ä¸Šçš„åˆ†æ”¯å’ŒHEADå¼•ç”¨ã€‚&lt;strong>å®ƒä¸ä¼šæ›´æ–°éè£¸æœºä¸­çš„å·¥ä½œåŒºå‰¯æœ¬ã€æš‚å­˜åŒºå’Œç‰ˆæœ¬æŒ‡é’ˆ&lt;/strong>ã€‚å› æ­¤æˆ‘ä»¬è®©gitéœ€è¦å¿½ç•¥è¿™ä¸ªè¦æ±‚ï¼Œå³&lt;code>git config receive.denyCurrentBranch ignore&lt;/code>ã€‚æ­¤å¤–ï¼Œç”±äºå·¥ä½œåŒºä¹Ÿä¸ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œæˆ‘ä»¬åé¢ä¼šä½¿ç”¨post-receive hookæ¥æ›´æ–°å·¥ä½œåŒºå†…å®¹ã€‚&lt;/p>
&lt;h3 id="æ·»åŠ sshå…¬é’¥">æ·»åŠ sshå…¬é’¥&lt;/h3>
&lt;p>é¦–å…ˆï¼Œä¿è¯&lt;strong>æœåŠ¡ç«¯&lt;/strong>æ˜¯å…è®¸é€šè¿‡å…¬é’¥ç™»é™†ï¼Œåœ¨&lt;code>/etc/ssh/sshd_config&lt;/code>ä¸­ï¼Œå»æ‰å…¬é’¥ç™»å½•ç›¸å…³çš„æ³¨é‡Šç¬¦ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>&lt;span class="c1"># é€šè¿‡å…¬é’¥ç™»å½•ï¼Œå¦‚æœéœ€è¦å°±å»æ‰å‰é¢çš„æ³¨é‡Šç¬¦&lt;/span>
&lt;span class="ln">2&lt;/span>PubkeyAuthentication yes
&lt;span class="ln">3&lt;/span>&lt;span class="c1"># æŒ‡å®šå­˜æ”¾å®¢æˆ·ç«¯sshå…¬é’¥çš„æ–‡ä»¶çš„ä½ç½®&lt;/span>
&lt;span class="ln">4&lt;/span>&lt;span class="c1"># Expect .ssh/authorized_keys2 to be disregarded by default in future.&lt;/span>
&lt;span class="ln">5&lt;/span>AuthorizedKeysFile .ssh/authorized_keys .ssh/authorized_keys2
&lt;/code>&lt;/pre>&lt;/div>&lt;p>å…¶æ¬¡ï¼Œåœ¨&lt;strong>å®¢æˆ·ç«¯ç”Ÿæˆå…¬ç§é’¥å¯¹&lt;/strong>ï¼Œwin 10å¯ä»¥ç”¨cmdæˆ–git bashç”Ÿæˆï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>&lt;span class="c1"># ç”Ÿæˆå…¬ç§é’¥å¯¹ï¼Œä¸‹é¢ä¸€è·¯å›è½¦å³å¯&lt;/span>
&lt;span class="ln">2&lt;/span>$ ssh-keygen -t rsa
&lt;span class="ln">3&lt;/span>Generating public/private rsa key pair.
&lt;span class="ln">4&lt;/span>Enter file in which to save the key &lt;span class="o">(&lt;/span>++++++++++&lt;span class="o">)&lt;/span>:
&lt;span class="ln">5&lt;/span>Created directory &lt;span class="s1">&amp;#39;++++++++++&amp;#39;&lt;/span>.
&lt;span class="ln">6&lt;/span>Enter passphrase &lt;span class="o">(&lt;/span>empty &lt;span class="k">for&lt;/span> no passphrase&lt;span class="o">)&lt;/span>:
&lt;span class="ln">7&lt;/span>Enter same passphrase again:
&lt;span class="ln">8&lt;/span>Your identification has been saved in ++++++++++/id_rsa.
&lt;span class="ln">9&lt;/span>Your public key has been saved in ++++++++++/id_rsa.pub.
&lt;/code>&lt;/pre>&lt;/div>&lt;p>'++++++++++'æŒ‡çš„æ˜¯å…¬ç§é’¥å¯¹å­˜æ”¾çš„ä½ç½®ï¼ˆWindowsç”¨æˆ·åœ¨C:\ç”¨æˆ·\â€œç”¨æˆ·åâ€\.sshç›®å½•ä¸‹å¯ä»¥çœ‹åˆ°ç³»ç»Ÿçš„.sshå…¬é’¥id_rsa.pubï¼‰ï¼Œæ‰“å¼€è¯¥ä½ç½®ï¼Œç„¶åå°†&lt;code>id_rsa.pub&lt;/code>æ–‡ä»¶ä¸­çš„å†…å®¹å¤åˆ¶å‡ºæ¥ï¼Œæ”¾åˆ°&lt;strong>æœåŠ¡ç«¯&lt;/strong>çš„&lt;code>.ssh/authorized_keys&lt;/code>æ–‡ä»¶ä¸­(æ²¡æœ‰å°±åœ¨æ­¤ä½ç½®æ–°å»ºä¸€ä¸ª)ï¼Œå³å¯é€šè¿‡å…¬é’¥è¿›è¡Œcloneã€pushå’Œpullæ“ä½œã€‚&lt;/p>
&lt;blockquote>
&lt;p>ä¹Ÿå¯ä¸æ·»åŠ å…¬é’¥ï¼Œæ¯æ¬¡ä½¿ç”¨gitç”¨æˆ·çš„å¯†ç è¿›è¡Œcloneã€pushå’Œpullæ“ä½œã€‚&lt;/p>
&lt;/blockquote>
&lt;h3 id="æœ¬åœ°åº“è®¾ç½®è¿œç¨‹åº“çš„åœ°å€">æœ¬åœ°åº“è®¾ç½®è¿œç¨‹åº“çš„åœ°å€&lt;/h3>
&lt;p>ç”±äºä¸ºäº†å¹³è¡¡ç®€å•å’Œå®‰å…¨ï¼Œæˆ‘ä»¬ä¸ç”¨HTTPå’ŒGitåè®®ï¼ˆæ²¡è£…git-daemonï¼‰ï¼Œè€Œé€‰ç”¨SSHåè®®ä½œä¸ºæœ¬åœ°ç«¯å’Œäº‘æœåŠ¡å™¨æ®µçš„ä¼ è¾“ã€‚SSHåè®®ç”¨äºä¸ºGitæä¾›è¿œç¨‹è¯»å†™æ“ä½œï¼Œæ˜¯è¿œç¨‹å†™æ“ä½œçš„æ ‡å‡†æœåŠ¡ï¼Œåœ¨æ™ºèƒ½HTTPåè®®å‡ºç°ä¹‹å‰ï¼Œç”šè‡³æ˜¯å†™æ“ä½œçš„å”¯ä¸€æ ‡å‡†æœåŠ¡ã€‚&lt;/p>
&lt;p>å¯¹äºæ‹¥æœ‰shellç™»å½•æƒé™çš„ç”¨æˆ·å¸å·ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„è¯­æ³•è®¿é—®Gitç‰ˆæœ¬åº“ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>&lt;span class="c1">#è¯­æ³•1ï¼š &lt;/span>
&lt;span class="ln">2&lt;/span>$ ssh://&lt;span class="o">[&lt;/span>&amp;lt;username&amp;gt;@&lt;span class="o">]&lt;/span>&amp;lt;server&amp;gt;&lt;span class="o">[&lt;/span>:&amp;lt;port&amp;gt;&lt;span class="o">]&lt;/span>/path/to/repos/myrepo.git
&lt;span class="ln">3&lt;/span>&lt;span class="c1">#è¯­æ³•2ï¼š&lt;/span>
&lt;span class="ln">4&lt;/span>$ &lt;span class="o">[&lt;/span>&amp;lt;username&amp;gt;@&lt;span class="o">]&lt;/span>&amp;lt;server&amp;gt;:/path/to/repos/myrepo.git
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç¬¬ä¸€ç§æ˜¯ä½¿ç”¨ssh://å¼€å¤´çš„SSHåè®®æ ‡å‡†URLå†™æ³•ï¼Œå¦å¤–ä¸€ç§æ˜¯SCPæ ¼å¼çš„å†™æ³•ã€‚
ä¸¤ç§å†™æ³•å‡å¯ï¼ŒSSHåè®®æ ‡å‡†URLå†™æ³•ç¨å«Œå¤æ‚ï¼Œ&lt;strong>ä½†æ˜¯å¯¹äºéæ ‡å‡†SSHç«¯å£ï¼ˆé22ç«¯å£ï¼‰ï¼Œå¯ä»¥é€šè¿‡URLç»™å‡ºç«¯å£å·&lt;/strong>ã€‚ç”±äºæˆ‘ä½¿ç”¨5122ä½œä¸ºsshç«¯å£å·ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨ç¬¬ä¸€ç§è¯­æ³•ã€‚&lt;/p>
&lt;p>åœ¨æœ¬åœ°gitåº“æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>&lt;span class="c1"># æ·»åŠ è¿œç¨‹åœ°å€&lt;/span>
&lt;span class="ln">2&lt;/span>$ git remote add origin ssh://git@&lt;span class="s2">&amp;#34;your IP or domain&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;port number&amp;#34;&lt;/span>/srv/gitblogs.git
&lt;span class="ln">3&lt;/span>&lt;span class="c1"># æ¨é€æœ¬åœ°ä»“åº“åˆ°è¿œç¨‹ä»“åº“&lt;/span>
&lt;span class="ln">4&lt;/span>$ git push -u origin master
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>ä¸‹é¢è¦è¦ä½“ç°ä¸€ä¸ªgit bashçš„éªšæ“ä½œäº†&lt;/strong>ï¼&lt;/p>
&lt;p>ç”±äºï¼Œæˆ‘çš„äº‘æœåŠ¡å™¨ä¸Šçš„gitç”¨æˆ·æ˜¯æ–°åˆ›å»ºçš„ï¼Œå› æ­¤å…¶sshå…¬é’¥ä¹Ÿæ˜¯æ–°æ·»åŠ çš„ï¼Œé¦–æ¬¡ç™»é™†gitç”¨æˆ·ä¹Ÿæ˜¯é€šè¿‡rootç”¨æˆ·&lt;code>su&lt;/code>è¿‡å»çš„ï¼Œä¹‹åå°±æ²¡æœ‰å°è¯•ç™»é™†ã€‚æˆ‘é€šè¿‡&lt;code>git push -u origin master&lt;/code>æ¨é€çš„æ—¶å€™ï¼Œgit bashè·³å‡ºäº†è®©æˆ‘è¾“å¯†ç çš„æ¡†æ¡†ï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p>
&lt;p>&lt;img src="../../images/git_bash%E5%9D%91%E4%BA%BA%E8%AE%BE%E8%AE%A1.png" alt="git_bashå‘äººè®¾è®¡">&lt;/p>
&lt;p>æˆ‘è§‰å¾—æœ‰äº›ä¸å¯¹åŠ²ï¼Œå› ä¸ºæˆ‘å·²ç»æ·»åŠ äº†å…¬é’¥ï¼Œç†è®ºä¸Šä¸åº”è¯¥å†éœ€è¦å¯†ç ã€‚æˆ‘è¿˜æ˜¯å°è¯•è¾“å…¥äº†äº‘æœåŠ¡å™¨gitç”¨æˆ·çš„å¯†ç ï¼Œæ˜¾ç¤ºä¸å¯¹ï¼Œæˆ‘æœ‰è¾“å…¥æœ¬åœ°ç”µè„‘çš„å¯†ç ä¹Ÿä¸å¯¹ï¼Œæˆ‘å°±å¾ˆå¥‡æ€ªã€‚æŸ¥äº†æŸ¥èµ„æ–™ï¼Œä¹Ÿæ²¡æœ‰æˆ‘è¿™ä¸ªæƒ…å†µã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°è¯•ç›´æ¥ç”¨VS codeçš„gitæ’ä»¶pushï¼Œå±…ç„¶ç­‰äº†10å¤šåˆ†é’Ÿè¿˜pushä¸ä¸Šå»ã€‚æœ€åï¼Œæˆ‘ä½¿ç”¨windowsè‡ªå¸¦çš„cmdæ‰§è¡Œ&lt;code>git push -u origin master&lt;/code>ï¼Œè·³å‡ºæ¥ä¸€è¡Œé€šçŸ¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cmd" data-lang="cmd">&lt;span class="ln">1&lt;/span>Microsoft Windows [ç‰ˆæœ¬ 10.0.18363.1916]
&lt;span class="ln">2&lt;/span>&lt;span class="p">(&lt;/span>c&lt;span class="p">)&lt;/span> 2019 Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚
&lt;span class="ln">3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> git push -u origin master
&lt;span class="ln">4&lt;/span>The authenticity of host &amp;#39;[xxx.xxx.xxx.xxx]:xxxx ([xxx.xxx.xxx.xxx]:xxxx)&amp;#39; can&amp;#39;t be established.
&lt;span class="ln">5&lt;/span>ECDSA key fingerprint is SHA256:8KEtnlH6cLQlFGYgDZgK12qDiiElEgX3PDV+X9xaiYY.
&lt;span class="ln">6&lt;/span>Are you sure you want to continue connecting (yes/no)?
&lt;/code>&lt;/pre>&lt;/div>&lt;p>é¢ï¼Œå‘ç°äº†æ²¡æœ‰ï¼Ÿé¦–æ¬¡ç™»é™†sshæœåŠ¡ç«¯é¦–è¦ç¡®è®¤key fingerprintçš„ï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åœ¨git bashè·³å‡ºçš„å¯†ç æ¡†é‡Œè¾“å…¥çš„ä¸æ˜¯ä»€ä¹ˆå¯†ç ï¼Œè€Œæ˜¯â€œyesâ€!!!&lt;/p>
&lt;p>æˆ‘é‡ç½®äº†ç¯å¢ƒï¼Œåœ¨git bashè·³å‡ºçš„å¯†ç æ¡†è¾“äº†â€œyesâ€ï¼Œä¸å‡ºæ‰€æ–™ï¼Œé€šè¿‡äº†â€¦â€¦â€¦â€¦ğŸ¤£ğŸ¤£ğŸ¤£æ‰€ä»¥ï¼Œgit bashä¸ºä»€ä¹ˆè¦è·³å‡ºå¯†ç æ¡†å•Šï¼è¯¯å¯¼äººå•Šï¼ä¹‹åï¼ŒVS Codeçš„gitæ’ä»¶ä¹Ÿèƒ½è‡ªåŠ¨pushä¸Šå»äº†ï¼Œè¿™é‡Œä¹Ÿç®—å‘ç°VS Code gitæ’ä»¶çš„ä¸€ä¸ªå°å°é—®é¢˜ï¼Œå¸Œæœ›ä»¥åèƒ½æ”¹æ­£å§ã€‚&lt;/p>
&lt;h3 id="è¿œç¨‹ä»“åº“çš„å·¥ä½œåŒºæ›´æ–°æ–¹æ³•">è¿œç¨‹ä»“åº“çš„å·¥ä½œåŒºæ›´æ–°æ–¹æ³•&lt;/h3>
&lt;p>æ— è®ºæ˜¯ä½¿ç”¨è£¸ä»“åº“è¿˜æ˜¯ä½¿ç”¨æ™®é€šä»“åº“ï¼Œæˆ‘ä»¬éƒ½è¦è¯»å–æœ€æ–°æ›´æ–°çš„å†…å®¹ï¼Œè£¸ä»“åº“å¯ä»¥è¢«æ­£å¸¸cloneå’Œpushæ›´æ–°ï¼Œä½†æ˜¯è£¸ä»“åº“ä¸åŒ…å«å·¥ä½œåŒºï¼Œæ‰€ä»¥å¹¶ä¸ä¼šå­˜åœ¨åœ¨è£¸ä»“åº“ä¸Šç›´æ¥å‡ºç°å¯ç”¨æ–‡ä»¶ï¼Œéœ€è¦å»ºç«‹ä¸€ä¸ªæ™®é€šä¸­è½¬ä»“åº“è¯»å–æœ€æ–°å†…å®¹ï¼›è€Œæ™®é€šä»“åº“å­˜åœ¨å·¥ä½œåŒºä¸è‡ªåŠ¨æ›´æ–°é—®é¢˜ï¼Œä¹Ÿéœ€è¦ç”¨æˆ·è‡ªå·±æ›´æ–°ã€‚&lt;/p>
&lt;h4 id="æ¨é€ç»™è£¸ä»“åº“çš„æƒ…å½¢">æ¨é€ç»™è£¸ä»“åº“çš„æƒ…å½¢&lt;/h4>
&lt;p>å¦‚æœä¹‹å‰å»ºç«‹çš„æ˜¯è£¸ä»“åº“ï¼Œé‡Œé¢æ˜¯ä¸ä¼šæ˜¾ç¤ºå‡ºä»»ä½•ç”¨æˆ·å†…å®¹çš„ï¼Œéœ€è¦å»ºç«‹ä¸€ä¸ªä¸­è½¬æ™®é€šä»“åº“ã€‚è¿™ä¸ªä¸­è½¬æ™®é€šä»“åº“ä»è£¸ä»“åº“ä¸­pullæœ€æ–°çš„å†…å®¹ï¼Œæä¾›ç»™hugo blogã€‚&lt;/p>
&lt;p>æˆ‘ä»¬åœ¨äº‘ç«¯è£¸ä»“åº“åŒä¸€æ–‡ä»¶å¤¹ä¸­ï¼Œæ–°å»ºä¸€ä¸ªä¸­è½¬ä»“åº“ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>$ &lt;span class="nb">cd&lt;/span> /srv &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> sudo mkdir blogtransfer.git &lt;span class="c1"># /srv/blogtransfer.gitä½œä¸ºä¸­è½¬ä»“åº“ï¼Œä¸€èˆ¬gitåº“éƒ½ä»¥.gitä½œä¸ºç»“å°¾&lt;/span>
&lt;span class="ln">2&lt;/span>$ sudo chown -R git:git blogtransfer.git &lt;span class="c1"># æŠŠæ‰€å±ç”¨æˆ·ä»rootæ”¹æˆgit&lt;/span>
&lt;span class="ln">3&lt;/span>$ su - git &lt;span class="c1"># å¸¦ - ç¬¦å·è¡¨ç¤ºç¯å¢ƒå˜é‡ä¹Ÿè·Ÿç€åˆ‡æ¢&lt;/span>
&lt;span class="ln">4&lt;/span>&lt;span class="c1"># å°†è£¸ä»“åº“å†…å®¹cloneåˆ°ä¸­è½¬ä»“åº“ï¼Œä½¿ç”¨gitçš„æœ¬åœ°åè®®&lt;/span>
&lt;span class="ln">5&lt;/span>$ git clone /srv/gitblogs.git/ /srv/blogtransfer.git
&lt;span class="ln">6&lt;/span>Cloning into &lt;span class="s1">&amp;#39;/srv/blogtransfer.git&amp;#39;&lt;/span>...
&lt;span class="ln">7&lt;/span>&lt;span class="k">done&lt;/span>.
&lt;span class="ln">8&lt;/span>$ ls /srv/blogtransfer.git
&lt;span class="ln">9&lt;/span>images å­¦ä¹ ç¬”è®° å·¥ç¨‹ç¬”è®° ç½‘é¡µèµ„æ–™
&lt;/code>&lt;/pre>&lt;/div>&lt;p>åˆæ¬¡&lt;code>git clone&lt;/code>åï¼Œæ¯å½“æˆ‘ä»¬ä»æœ¬åœ°æäº¤æ–°çš„å†…å®¹ï¼Œå¯ä»¥åœ¨&lt;code>/srv/blogtransfer.git&lt;/code>æ–‡ä»¶å¤¹ä¸­ï¼Œä½¿ç”¨&lt;code>git pull&lt;/code>æ›´æ–°ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln"> 1&lt;/span>$ &lt;span class="nb">cd&lt;/span> /srv/blogtransfer.git/
&lt;span class="ln"> 2&lt;/span>$ git pull &lt;span class="c1"># æˆ‘åšäº†ä¸€ä¸ªä¿®æ”¹ï¼Œæ¥è¿›è¡Œæµ‹è¯•&lt;/span>
&lt;span class="ln"> 3&lt;/span>remote: Counting objects: 7, &lt;span class="k">done&lt;/span>.
&lt;span class="ln"> 4&lt;/span>remote: Compressing objects: 100% &lt;span class="o">(&lt;/span>4/4&lt;span class="o">)&lt;/span>, &lt;span class="k">done&lt;/span>.
&lt;span class="ln"> 5&lt;/span>remote: Total &lt;span class="m">4&lt;/span> &lt;span class="o">(&lt;/span>delta 3&lt;span class="o">)&lt;/span>, reused &lt;span class="m">0&lt;/span> &lt;span class="o">(&lt;/span>delta 0&lt;span class="o">)&lt;/span>
&lt;span class="ln"> 6&lt;/span>Unpacking objects: 100% &lt;span class="o">(&lt;/span>4/4&lt;span class="o">)&lt;/span>, &lt;span class="k">done&lt;/span>.
&lt;span class="ln"> 7&lt;/span>From /srv/gitblogs
&lt;span class="ln"> 8&lt;/span> f9e0b20..a33731d master -&amp;gt; origin/master
&lt;span class="ln"> 9&lt;/span>Updating f9e0b20..a33731d
&lt;span class="ln">10&lt;/span>Fast-forward
&lt;span class="ln">11&lt;/span> ...s-&lt;span class="se">\3&lt;/span>50&lt;span class="se">\2&lt;/span>07&lt;span class="se">\2&lt;/span>52&lt;span class="se">\3&lt;/span>45&lt;span class="se">\2&lt;/span>12&lt;span class="se">\2&lt;/span>50&lt;span class="se">\3&lt;/span>45&lt;span class="se">\2&lt;/span>14&lt;span class="se">\2&lt;/span>26&lt;span class="se">\3&lt;/span>51&lt;span class="se">\2&lt;/span>03&lt;span class="se">\2&lt;/span>50&lt;span class="se">\3&lt;/span>47&lt;span class="se">\2&lt;/span>75&lt;span class="se">\2&lt;/span>62&lt;span class="se">\3&lt;/span>50&lt;span class="se">\2&lt;/span>07&lt;span class="se">\2&lt;/span>52&lt;span class="se">\3&lt;/span>45&lt;span class="se">\2&lt;/span>67&lt;span class="se">\2&lt;/span>61&lt;span class="se">\3&lt;/span>47&lt;span class="se">\2&lt;/span>32&lt;span class="se">\2&lt;/span>04&lt;span class="se">\3&lt;/span>45&lt;span class="se">\2&lt;/span>15&lt;span class="se">\2&lt;/span>32&lt;span class="se">\3&lt;/span>45&lt;span class="se">\2&lt;/span>56&lt;span class="se">\2&lt;/span>42.md&lt;span class="s2">&amp;#34; | 105 ++++++++++++++++++++++++++++++++++++++++++++++----------------------
&lt;/span>&lt;span class="ln">12&lt;/span>&lt;span class="s2"> 1 file changed, 71 insertions(+), 34 deletions(-)
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»ä¸­è½¬ä»“åº“è¯»å–å†…å®¹ã€‚&lt;/p>
&lt;h4 id="æ¨é€ç»™æ™®é€šè¿œç¨‹ä»“åº“çš„æƒ…å½¢">æ¨é€ç»™æ™®é€šè¿œç¨‹ä»“åº“çš„æƒ…å½¢&lt;/h4>
&lt;p>å¦‚æœä¹‹å‰å»ºç«‹çš„æ˜¯æ™®é€šåº“ï¼Œå½“æˆ‘ä»¬åœ¨æœ¬åœ°å®Œæˆç¬¬ä¸€æ¬¡è¿œç¨‹ä»“åº“æ¨é€åï¼Œç™»å½•åˆ°æœåŠ¡å™¨çš„&lt;code>/srv/gitblogs.git&lt;/code>ç›®å½•ä¼šå‘ç°ï¼Œè¯¥ç›®å½•é‡Œè¿˜æ˜¯ä»€ä¹ˆéƒ½æ²¡æœ‰å•Šï¼Œé‚£å’Œè£¸åº“æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼æˆ‘ä»¬ä¹‹å‰è¯´äº†:&lt;/p>
&lt;blockquote>
&lt;p>&lt;code>git push&lt;/code>å‘½ä»¤ä»…æ›´æ–°è¿œç¨‹å­˜å‚¨åº“ä¸Šçš„åˆ†æ”¯å’ŒHEADä¿¡æ¯ã€‚&lt;strong>å®ƒä¸ä¼šæ›´æ–°éè£¸æœºä¸­çš„å·¥ä½œåŒºå‰¯æœ¬ã€æš‚å­˜åŒºå’Œç‰ˆæœ¬æŒ‡é’ˆ&lt;/strong>ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>å¦‚æœæˆ‘ä»¬ç”¨&lt;code>git status&lt;/code>æŸ¥çœ‹ï¼Œä¼šå‘ç°å¤šäº†å¤§é‡çš„ä¿®æ”¹è®°å½•ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æŠŠç‰ˆæœ¬åº“çš„â€œæŒ‡é’ˆâ€æŒ‡å‘æœ€æ–°çš„åœ°æ–¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>&lt;span class="c1"># æŠŠå·¥ä½œåŒºå›é€€åˆ°gitåº“çš„ç‰ˆæœ¬ï¼ˆæ­¤æƒ…å†µä¸‹ç­‰åŒäºæ›´æ–°ï¼‰&lt;/span>
&lt;span class="ln">2&lt;/span>$ git reset --hard
&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ ·å†æŸ¥çœ‹&lt;code>/srv/gitblogs.git&lt;/code>ç›®å½•å°±æœ‰æœ€æ–°çš„å†…å®¹äº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯ä¸€æ¬¡pushæ¨é€åï¼Œæ™®é€šä»“åº“éƒ½è¦ç”¨&lt;code>git reset --hard&lt;/code>æ‰‹åŠ¨æ›´æ–°å·¥ä½œåŒºã€‚&lt;/p>
&lt;h2 id="è®¾ç½®post-receive-hookå®Œæˆå†…å®¹è‡ªåŠ¨æ›´æ–°">è®¾ç½®post-receive hookå®Œæˆå†…å®¹è‡ªåŠ¨æ›´æ–°&lt;/h2>
&lt;p>ä¸Šé¢ä¸€ç« å°±å·²ç»æåˆ°è¿‡pushè£¸ä»“åº“éœ€è¦ä¸­è½¬ä»“åº“æ¥æ›´æ–°å†…å®¹å’Œpushåˆ°éè£¸åº“ï¼Œå·¥ä½œåŒºä¸æ›´æ–°çš„è¿™ä¸¤æ–¹é¢é—®é¢˜ï¼Œå¤§å¤šæ•°äººéƒ½æ˜¯ç”¨post-receive hookæ¥å¤„ç†çš„ã€‚&lt;/p>
&lt;p>Hookå°±æ˜¯é’©å­ï¼Œæœ¬è´¨æ˜¯ä¸€ç§è§¦å‘å™¨ï¼Œä»£è¡¨åœ¨æŸç§æƒ…å†µè§¦å‘æŸç§æ“ä½œã€‚Gitçš„é’©å­è„šæœ¬ä½äº&lt;code>ç‰ˆæœ¬åº“.git/hooks&lt;/code>ç›®å½•ä¸‹ï¼Œå½“Gitæ‰§è¡Œç‰¹å®šæ“ä½œæ—¶ä¼šè°ƒç”¨ç‰¹å®šçš„é’©å­è„šæœ¬ã€‚å½“ç‰ˆæœ¬åº“é€šè¿‡&lt;code>git init&lt;/code>æˆ–è€…&lt;code>git clone&lt;/code>åˆ›å»ºæ—¶ï¼Œä¼šåœ¨&lt;code>hooks&lt;/code>ç›®å½•ä¸‹åˆ›å»ºç¤ºä¾‹è„šæœ¬ï¼Œç”¨æˆ·å¯ä»¥å‚ç…§ç¤ºä¾‹è„šæœ¬çš„å†™æ³•å¼€å‘é€‚åˆçš„é’©å­è„šæœ¬ã€‚&lt;/p>
&lt;p>é’©å­è„šæœ¬è¦è®¾ç½®ä¸ºå¯è¿è¡Œï¼Œå¹¶ä½¿ç”¨ç‰¹å®šçš„åç§°ã€‚Gitæä¾›çš„ç¤ºä¾‹è„šæœ¬éƒ½å¸¦æœ‰&lt;code>.sample&lt;/code>æ‰©å±•åï¼Œæ˜¯ä¸ºäº†é˜²æ­¢è¢«æ„å¤–è¿è¡Œã€‚å¦‚æœéœ€è¦å¯ç”¨ç›¸åº”çš„é’©å­è„šæœ¬ï¼Œéœ€è¦å¯¹å…¶é‡å‘½åï¼ˆå»æ‰&lt;code>.sample&lt;/code>æ‰©å±•åï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>$ ls
&lt;span class="ln">2&lt;/span>applypatch-msg.sample fsmonitor-watchman.sample pre-applypatch.sample prepare-commit-msg.sample pre-rebase.sample update.sample
&lt;span class="ln">3&lt;/span>commit-msg.sample post-update.sample pre-commit.sample pre-push.sample pre-receive.sample
&lt;/code>&lt;/pre>&lt;/div>&lt;p>å…¶ä¸­ï¼Œpre-commitã€post-updateã€pre-receiveã€updateç­‰ç­‰ä»£è¡¨ç€é’©å­è¢«è§¦å‘çš„æƒ…å†µã€‚æˆ‘ä»¬è¦çš„post-receiveè¿™é‡Œæ°å¥½æ²¡æœ‰ï¼Œæ²¡å…³ç³»ï¼Œè‡ªå·±åˆ›å»ºä¸€ä¸ªå°±è¡Œã€‚&lt;/p>
&lt;p>éœ€è¦æŒ‡å‡ºï¼šè£¸ä»“åº“å†…ç›´æ¥å¯ä»¥çœ‹åˆ°&lt;code>hooks&lt;/code>ç›®å½•ï¼Œè€Œéè£¸ä»“åº“éœ€è¦åœ¨éšè—ç›®å½•&lt;code>.git/hooks&lt;/code>ä¸‹æŸ¥çœ‹ã€‚&lt;/p>
&lt;ul>
&lt;li>è£¸ä»“åº“&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>&lt;span class="c1"># æ–°å»ºpost-receiveæ„é€ ï¼Œè¿™æ˜¯ä¸€ä¸ªshellæ–‡ä»¶&lt;/span>
&lt;span class="ln">2&lt;/span>$ touch /srv/gitblogs.git/hooks/post-receive
&lt;span class="ln">3&lt;/span>&lt;span class="c1"># å¢åŠ å¯æ‰§è¡Œæƒé™&lt;/span>
&lt;span class="ln">4&lt;/span>$ chmod +x /srv/gitblogs.git/hooks/post-receive
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>æ™®é€šä»“åº“&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>&lt;span class="c1"># æ–°å»ºpost-receiveæ„é€ ï¼Œè¿™æ˜¯ä¸€ä¸ªshellæ–‡ä»¶&lt;/span>
&lt;span class="ln">2&lt;/span>$ touch /srv/gitblogs.git/.git/hooks/post-receive
&lt;span class="ln">3&lt;/span>&lt;span class="c1"># å¢åŠ å¯æ‰§è¡Œæƒé™&lt;/span>
&lt;span class="ln">4&lt;/span>$ chmod +x /srv/gitblogs.git/.git/hooks/post-receive
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="è£¸ä»“åº“çš„æ›´æ–°">è£¸ä»“åº“çš„æ›´æ–°&lt;/h3>
&lt;p>å¤åˆ¶ä»¥ä¸‹è„šæœ¬åˆ°&lt;code>post-receive&lt;/code>æ–‡ä»¶æ¥å®ç°ä¸­è½¬ä»“åº“çš„æ›´æ–°ã€‚&lt;/p>
&lt;p>æ³¨æ„ï¼šè¿™ä¸ªè„šæœ¬è¦å¤åˆ¶åˆ°&lt;code>gitblogs.git&lt;/code>è¿™ä¸ªè£¸åº“çš„&lt;code>hooks/post-receive&lt;/code>æ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯ä¸­è½¬åº“çš„ï¼&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;span class="ln">2&lt;/span>&lt;span class="cp">&lt;/span>git --work-tree&lt;span class="o">=&lt;/span>/srv/blogtransfer.git/ --git-dir&lt;span class="o">=&lt;/span>/srv/blogtransfer.git/.git pull
&lt;/code>&lt;/pre>&lt;/div>&lt;p>é™„å®Œæ•´ç‰ˆ&lt;code>post-receive&lt;/code>æ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln"> 1&lt;/span>&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;span class="ln"> 2&lt;/span>&lt;span class="cp">&lt;/span>git --work-tree&lt;span class="o">=&lt;/span>/srv/blogtransfer.git/ --git-dir&lt;span class="o">=&lt;/span>/srv/blogtransfer.git/.git pull
&lt;span class="ln"> 3&lt;/span>&lt;span class="c1"># rsync -a source destination&lt;/span>
&lt;span class="ln"> 4&lt;/span>&lt;span class="c1"># å›¾ç‰‡åŒæ­¥&lt;/span>
&lt;span class="ln"> 5&lt;/span>rsync -a --delete /srv/blogtransfer.git/images/ /opt/blogtheme/static/images
&lt;span class="ln"> 6&lt;/span>&lt;span class="c1"># ç½‘é¡µåŒæ­¥&lt;/span>
&lt;span class="ln"> 7&lt;/span>rsync -a --delete /srv/blogtransfer.git/ç½‘é¡µèµ„æ–™/ /opt/blogtheme/static/ç½‘é¡µèµ„æ–™
&lt;span class="ln"> 8&lt;/span>&lt;span class="c1"># è§¦å‘jenkinsç¼–è¯‘æ–°ç½‘ç«™&lt;/span>
&lt;span class="ln"> 9&lt;/span>&lt;span class="c1"># -X è¡¨ç¤ºè¯·æ±‚ç±»å‹ï¼Œç”¨postï¼›-u è¡¨ç¤ºè®¤è¯ä¿¡æ¯ï¼Œå¡«å†™ç™»å½•jenkinsçš„ç”¨æˆ·åå¯†ç ï¼›-vè¡¨ç¤ºæ˜¾ç¤ºè¯¦ç»†è¿‡ç¨‹&lt;/span>
&lt;span class="ln">10&lt;/span>&lt;span class="c1"># URLè§¦å‘è¿œç¨‹æ„å»ºæ‰€ç”¨çš„URL&lt;/span>
&lt;span class="ln">11&lt;/span>curl -X post -u &lt;span class="s1">&amp;#39;lelouch:Uinxj4E+foDlxDnYgZmE+XnkngRlcX22&amp;#39;&lt;/span> -v http://127.0.0.1:8080/job/hugoblog/build?token&lt;span class="o">=&lt;/span>************************************************************************
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="æ™®é€šè¿œç¨‹ä»“åº“çš„æ›´æ–°è„šæœ¬">æ™®é€šè¿œç¨‹ä»“åº“çš„æ›´æ–°è„šæœ¬&lt;/h3>
&lt;p>æˆ‘ä»¬å°†ä¸‹é¢è¿™ä¸ªè„šæœ¬å¤åˆ¶åˆ°&lt;code>post-receive&lt;/code>æ–‡ä»¶æ¥å®Œæˆæ™®é€šè¿œç¨‹ä»“åº“çš„æ›´æ–°å·¥ä½œåŒºã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln"> 1&lt;/span>&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;span class="ln"> 2&lt;/span>&lt;span class="cp">&lt;/span>&lt;span class="c1"># å‡ ä¸ªåœ°å€å˜é‡&lt;/span>
&lt;span class="ln"> 3&lt;/span>&lt;span class="nv">GITBLOGS_PATH&lt;/span>&lt;span class="o">=&lt;/span>/srv/gitblogs.git/
&lt;span class="ln"> 4&lt;/span>&lt;span class="c1"># ä¸‹é¢æ˜¯è‡ªå·±è®°å½•çš„æ—¥å¿—ï¼Œæ–¹ä¾¿æŸ¥è¯¢è®°å½•ç”¨&lt;/span>
&lt;span class="ln"> 5&lt;/span>&lt;span class="nv">LOG_PATH&lt;/span>&lt;span class="o">=&lt;/span>/tmp/gitblogs-post-receive-log
&lt;span class="ln"> 6&lt;/span>
&lt;span class="ln"> 7&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Here is the post-receive hook to update work tree by &amp;#39;git reset --hard&amp;#39;&amp;#34;&lt;/span> &amp;gt;&amp;gt; &lt;span class="nv">$LOG_PATH&lt;/span>
&lt;span class="ln"> 8&lt;/span>
&lt;span class="ln"> 9&lt;/span>&lt;span class="c1"># è¾“å…¥æ—¶é—´ç­‰ä¿¡æ¯ç”¨äºæ–¹ä¾¿è®°å½•&lt;/span>
&lt;span class="ln">10&lt;/span>date &amp;gt;&amp;gt; &lt;span class="nv">$LOG_PATH&lt;/span>
&lt;span class="ln">11&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;git reset --hard&amp;#34;&lt;/span> &amp;gt;&amp;gt; &lt;span class="nv">$LOG_PATH&lt;/span>
&lt;span class="ln">12&lt;/span>&lt;span class="c1"># å›å¤å·¥ä½œåŒºåˆ°æœ€æ–°ç‰ˆæœ¬åº“&lt;/span>
&lt;span class="ln">13&lt;/span>git --work-tree&lt;span class="o">=&lt;/span>&lt;span class="nv">$GITBLOGS_PATH&lt;/span> --git-dir&lt;span class="o">=&lt;/span>&lt;span class="nv">$GITBLOGS_PATH&lt;/span>/.git reset --hard &amp;gt;&amp;gt; &lt;span class="nv">$LOG_PATH&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ä½¿ç”¨hugoä½œä¸ºåšå®¢ç”Ÿæˆå·¥å…·">ä½¿ç”¨HUGOä½œä¸ºåšå®¢ç”Ÿæˆå·¥å…·&lt;/h2>
&lt;p>æˆ‘ä»¬è¿™é‡Œè¿™é‡Œä½¿ç”¨Hugoä½œä¸ºç”Ÿæˆåšå®¢çš„å·¥å…·ã€‚æˆ‘ä»¬æ ¹æ®è‡ªèº«éœ€æ±‚ï¼Œè¦åšä»¥ä¸‹ä¿®æ”¹ï¼š&lt;/p>
&lt;ol>
&lt;li>æˆ‘çš„ç¬”è®°æ˜¯åˆ†ç±»æ”¾åœ¨å¤šä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œå¸Œæœ›Hugoèƒ½å¤Ÿä»å¤šä¸ªç›®å½•ä¸­è¯»å–markdown åšå®¢æ–‡ç« ï¼Œè¿™æ ·æˆ‘å°±ä¸éœ€è¦å¯¹æœ¬åœ°æ–‡ä»¶ç»“æ„åšè°ƒæ•´ã€‚&lt;/li>
&lt;li>æˆ‘æœ‰ä¸€ä¸ªç½‘é¡µèµ„æ–™çš„æ–‡ä»¶å¤¹ï¼Œå¸Œæœ›æŠŠå®ƒå•ç‹¬è®¾ç½®ä¸€ä¸ªç›®å½•é¡µé¢ï¼Œè€Œä¸å‡ºæŠŠå®ƒç®—æˆåšå®¢æ–‡ç« ã€‚æˆ‘éœ€è¦ä¸€ä¸ªèƒ½ç”Ÿæˆæ–‡ä»¶å¤¹ç›®å½•txtæ–‡ç« çš„å·¥å…·ï¼Œç„¶åæ­¤ç›®å½•é¡µé¢é€šè¿‡jsè¯»å–å¹¶ç”Ÿæˆé“¾æ¥ã€‚&lt;/li>
&lt;li>æˆ‘çš„åœ¨æœ¬åœ°å†™markdownçš„æ—¶å€™ï¼Œä½¿ç”¨å›¾ç‰‡çš„ç›¸å¯¹è·¯å¾„ï¼Œä¸”æ‰€æœ‰å›¾ç‰‡ç›¸å¯¹äºåšå®¢æ–‡ç« çš„è·¯å¾„éƒ½æ˜¯&lt;code>../images/&lt;/code>ï¼Œè€ŒHugoé»˜è®¤çš„å›¾ç‰‡è·¯å¾„éƒ½æ˜¯æ ¹ç›®å½•çš„ç»å¯¹è·¯å¾„ã€‚&lt;/li>
&lt;li>å¸Œæœ›èƒ½æŠŠå†…å®¹æ¡ä»¶ç»™ç™¾åº¦ç­‰æœç´¢å¼•æ“ï¼Œgithub pageå…¶å®ä¸éœ€è¦è¿™ä¸ªåŠŸèƒ½ã€‚&lt;/li>
&lt;li>å¢åŠ å®‰å…¨çš„è¯„è®ºåŠŸèƒ½ï¼Œåº”è¯¥éœ€è¦ç”Ÿæˆæ°¸ä¹…é“¾æ¥ã€‚&lt;/li>
&lt;li>å¤„ç†yaml front matterä¸ä¸€çº§ç›®å½•é‡å¤çš„é—®é¢˜ã€‚&lt;/li>
&lt;li>æ–‡ç« ä¸­é‡åˆ°å¤ªå¤šå…¬å¼çš„æ—¶å€™ã€‚hugoè‡ªå¸¦çš„ç¼–è¯‘å™¨æ¸²æŸ“å‡ºæ¥çš„å…¬å¼æ•ˆæœå¾ˆå·®ï¼Œæœ‰å¤§é‡æ— æ³•ç¼–è¯‘çš„å…¬å¼ã€‚&lt;/li>
&lt;/ol>
&lt;p>é—®é¢˜1è§£å†³ï¼šæˆ‘å°†æ–‡ç« ç›®å½•éƒ½æ”¾åˆ°äº†hugoçš„contentç›®å½•ï¼Œhugoä¼šè‡ªåŠ¨è¯»å–contentä¸‹æ‰€æœ‰çš„ç›®å½•å’Œæ–‡ä»¶ï¼Œå¹¶æ ¹æ®ç›®å½•ç»“æ„ç”Ÿæˆè¿™ä¹Ÿæ˜¯é€‰æ‹©hugoæ¡†æ¶çš„ä¸€ä¸ªä¼˜åŠ¿ã€‚&lt;/p>
&lt;p>é—®é¢˜2è§£å†³ï¼šç”±äºhugoåœ¨contentæ–‡ä»¶ä¸­ä¸æ”¯æŒç¼–è¯‘çº¯htmlæ–‡ä»¶ï¼Œæˆ‘å°†ç½‘é¡µèµ„æ–™çš„æ–‡ä»¶å¤¹æ”¾åœ¨&lt;code>/static/&lt;/code>ç›®å½•ä¸‹ï¼Œç„¶ååœ¨ä¸»é¢˜çš„&lt;code>lib_webpages&lt;/code>æ¨¡æ¿ä¸­ç”¨&lt;code>hugo&lt;/code>çš„&lt;code>readDir&lt;/code>å‡½æ•°è¯»å–æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹ï¼Œç„¶åæ‹¼æ¥æˆé“¾æ¥ï¼Œä¸éœ€è¦èƒ½ç”Ÿæˆæ–‡ä»¶å¤¹ç›®å½•txtæ–‡ç« çš„å·¥å…·ç­‰æ­¥éª¤ã€‚ç›®å½•åˆ™ä½¿ç”¨&lt;code>/content/library/webpages.html&lt;/code>ç”Ÿæˆï¼Œå…¶è°ƒç”¨äº†ä¸»é¢˜ä¸­çš„&lt;code>lib_webpages&lt;/code>æ¨¡æ¿ã€‚æœ‰ä¸ªå°ç¼ºç‚¹ï¼Œå³URLçš„å±‚çº§å…³ç³»è¢«ç ´åã€‚&lt;/p>
&lt;p>é—®é¢˜3è§£å†³ï¼šåœ¨æœ¬åœ°æˆ‘ç”¨çš„æ˜¯VS Codeå†™markdownï¼Œæˆ‘å‘ç°å®ƒæ˜¯æ”¯æŒæ‰“å¼€çš„æ–‡ä»¶ä½œä¸ºæ ¹ç›®å½•æ¥ç´¢å¼•æ–‡ä»¶çš„ï¼Œå³æ”¯æŒä»¥æ‰“å¼€çš„ç›®å½•ä¸º&amp;quot;/&amp;quot;ç´¢å¼•ã€‚å› æ­¤ï¼Œæˆ‘æŠŠæˆ‘æ‰€æœ‰æœ¬åœ°çš„markdownæ–‡ä»¶ä¸­çš„&lt;code>../images/&lt;/code>æ”¹æˆäº†&lt;code>/images/&lt;/code>ã€‚å…¶å®ç”¨ç»å¯¹è·¯å¾„å¯¹æœ¬åœ°å†™markdownä¹Ÿæ˜¯æœ‰å¥½å¤„çš„ï¼Œå°±æ˜¯ä¸»è¦æ‰“å¼€çš„æ–‡ä»¶å¤¹ä¸å˜ï¼Œå°±å¯ä»¥ç”¨å¤šå±‚æ–‡ä»¶ç»“æ„ç¼–å†™æ–‡æ¡£ï¼Œè€Œä¸ç”¨æ€»è®°ç›¸å¯¹è·¯å¾„ï¼›å¯¹ç½‘ç«™çš„SEOä¹Ÿæœ‰åˆ©ã€‚æ­¤å¤–ï¼Œhugoå¯¹ç›¸å¯¹è·¯å¾„çš„æ”¯æŒä¹Ÿæ˜¯æœ‰å¾ˆå¤šé—®é¢˜çš„ï¼Œä¸å€¼å¾—èŠ±å¤ªå¤šç²¾åŠ›å¤„ç†ã€‚&lt;/p>
&lt;p>é—®é¢˜4TODOï¼šå‚è€ƒ&lt;a href="https://www.kyfws.com/post/kyfws-hugo-baidu-seo/">https://www.kyfws.com/post/kyfws-hugo-baidu-seo/&lt;/a>&lt;/p>
&lt;p>é—®é¢˜5è§£å†³ï¼šå¯ä»¥é€šè¿‡hugoå†…ç½®çš„&lt;code>_internal/disqus.html&lt;/code>å®Œæˆè¯„è®ºåŠŸèƒ½ï¼Œä½†æ˜¯æ„Ÿè§‰æˆ‘ç›®å‰ä¸å¤ªéœ€è¦ã€‚&lt;/p>
&lt;p>é—®é¢˜6è§£å†³ï¼šä¸ºäº†ä¸è®©vscode çš„markdownlintæŠ¥é”™ï¼Œæˆ‘ä»¬é¦–å…ˆå°†å…¶å¤šä¸ªä¸€çº§æ ‡é¢˜è­¦å‘Šâ€œMD025/single-title/single-h1: Multiple top-level headings in the same documentâ€å–æ¶ˆã€‚å› ä¸ºï¼ŒVS Codeçš„markdownlintæ’ä»¶ä¼šæŠŠyamlå…ƒæ ‡é¢˜å½“æˆæ˜¯ä¸€çº§æ ‡é¢˜ï¼Œå› æ­¤éœ€è¦åœ¨æœ¬åœ°ç¼–è¾‘ç¯å¢ƒç›®å½•ä¸­è®¾ç½®&lt;code>.markdownlint.json&lt;/code>æ–‡ä»¶&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="ln">1&lt;/span>&lt;span class="p">{&lt;/span>
&lt;span class="ln">2&lt;/span> &lt;span class="nt">&amp;#34;MD025&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="kc">false&lt;/span>
&lt;span class="ln">3&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="ln">4&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç„¶åï¼Œæˆ‘ä»¬ä¸ºäº†è®©æ–‡ç« çœ‹èµ·æ¥æ›´ç¾è§‚ï¼Œé‡‡ç”¨ä»¥ä¸‹å½¢å¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-markdown" data-lang="markdown">&lt;span class="ln">1&lt;/span>---
&lt;span class="ln">2&lt;/span>yaml meta info
&lt;span class="ln">3&lt;/span>title : &amp;#34;TITLE&amp;#34;
&lt;span class="ln">4&lt;/span>date : &amp;#34;2020-02-02&amp;#34;
&lt;span class="ln">5&lt;/span>---
&lt;span class="ln">6&lt;/span>
&lt;span class="ln">7&lt;/span>ç›®å½•/table of contents
&lt;span class="ln">8&lt;/span>
&lt;span class="ln">9&lt;/span>&lt;span class="gu">## H1 title&amp;lt;!-- omit in toc --&amp;gt;
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ ·åœ¨æ¸²æŸ“æˆç½‘é¡µçš„æ—¶å€™ï¼Œä¸¤ä¸ªå¤§æ ‡é¢˜ä¼šå¤¹ç€ç›®å½•ï¼Œå› æ­¤ä¼šç¾è§‚ä¸€äº›ã€‚å¦‚æœhugoèƒ½æä¾›è‡ªåŠ¨æŠŠä¸€çº§æ ‡é¢˜å½“å…ƒä¿¡æ¯ï¼Œæˆ–è€…VS Codeèƒ½å¤Ÿmarkdownèƒ½å¤Ÿæ¸²æŸ“yamlå¤´ä¿¡æ¯å°±ä¸åŒè¿™ä¹ˆéº»çƒ¦ã€‚æ­¤å¤–ï¼Œæˆ‘å°†H1 titleå‰é¢å˜æˆäºŒçº§æ ‡é¢˜ï¼Œå¯ä»¥åœ¨ä¸æ”¹å˜&lt;code>.markdownlint.json&lt;/code>æ–‡ä»¶çš„æƒ…å†µä¸‹åœ¨VS Codeä¸­ä¸æŠ¥é”™ã€‚&lt;/p>
&lt;p>é—®é¢˜7è§£å†³ï¼šåœ¨æœ‰å¤§é‡å…¬å¼çš„æ–‡ç« ä¸­ï¼Œä¸è¦ä½¿ç”¨hugoè‡ªå¸¦çš„goldenç¼–è¯‘å™¨ï¼Œæ›¿æ¢æˆpandocã€‚pandocçš„å®‰è£…æ–¹æ³•å¯åœ¨ç½‘ä¸ŠæŸ¥åˆ°ã€‚æˆ‘ä»¬è¿˜éœ€è¦åœ¨è¯¥æ–‡ç« çš„å¤´éƒ¨ä¿¡æ¯ä¸­åŠ å…¥&lt;code>markup: pandoc&lt;/code>è¿™ä¸€æ¡ã€‚&lt;/p>
&lt;h3 id="ä¿®æ”¹hugoåšå®¢çš„clarityä¸»é¢˜">ä¿®æ”¹Hugoåšå®¢çš„clarityä¸»é¢˜&lt;/h3>
&lt;p>æˆ‘çš„åšå®¢æ˜¯åŸºäº&lt;a href="https://github.com/chipzoller/hugo-clarity">clarity&lt;/a>ä¸»é¢˜ä¿®æ”¹è€Œæ¥ï¼ŒåŸºæœ¬æ”¹åŠ¨æœ‰&lt;/p>
&lt;ul>
&lt;li>åœ¨å¤´éƒ¨å¯¼èˆªæ·»åŠ äº†å½’æ¡£å’Œåˆ†ç±»ä¸¤é¡¹ï¼Œæ·»åŠ äº†äºŒè€…çš„æ¨¡æ¿ã€åŠŸèƒ½å’Œarchive type;&lt;/li>
&lt;li>åœ¨å¤´éƒ¨å¯¼èˆªæ·»åŠ äº†èµ„æ–™åº“-&amp;gt;èµ„æ–™webç‰ˆï¼ŒåŸºäºreadDirå®ç°äº†ç½‘é¡µä¿¡æ¯éå†çš„postï¼Œç½‘é¡µèµ„æ–™å­˜æ”¾åœ¨&lt;code>/static/ç½‘é¡µèµ„æ–™&lt;/code>&lt;/li>
&lt;li>åœ¨å¤´éƒ¨å¯¼èˆªæ·»åŠ äº†èµ„æ–™åº“-&amp;gt;ä¹¦ç­¾åœ°å€ï¼Œä¹¦ç­¾ä½ç½®&lt;code>/content/library&lt;/code>ï¼›&lt;/li>
&lt;li>åœ¨å¤´éƒ¨å¯¼èˆªæ·»åŠ äº†ä¸“æ é¡¹ï¼ŒåŸºäºåŸæ¥çš„seriesä¿®æ”¹è€Œæ¥ï¼›&lt;/li>
&lt;li>åˆ é™¤äº†å¤šè¯­è¨€æ”¯æŒï¼Œå› ä¸ºæ€»æ˜¯å‡ºbugï¼›&lt;/li>
&lt;li>ä¿®æ”¹äº†ä¾§è¾¹æ çš„å†…å®¹æ˜¾ç¤ºé¡ºåºï¼Œå–æ¶ˆäº†ä¸ªäººä¿¡æ¯é˜…è¯»æ›´å¤šæŒ‰é’®ï¼Œå°†é“¾æ¥ç§»æ¤åˆ°äº†åå­—ä¸Šï¼›&lt;/li>
&lt;li>ç²¾ç®€äº†åˆ†äº«é“¾æ¥ï¼Œç”±äºå¤–å›½å¤§å¤šç¤¾äº¤ç½‘ç«™ä¸å¯è®¿é—®å’Œå›½å†…ç¤¾äº¤ç½‘ç«™çš„å°é—­æ€§ï¼Œåªä¿ç•™äº†å¤åˆ¶ç½‘é¡µé“¾æ¥çš„åŠŸèƒ½ï¼Œåˆ é™¤äº†å¤šä½™çš„ç¤¾äº¤ç½‘ç«™é“¾æ¥ï¼›&lt;/li>
&lt;li>ç®€åŒ–äº†é»˜è®¤çš„archetypesï¼›&lt;/li>
&lt;li>ä¿®æ”¹äº†ä¸»é¢˜é…è‰²ã€é“¾æ¥ã€404é¡µé¢ç­‰æ ·å¼&lt;/li>
&lt;/ul>
&lt;p>ç°åœ¨åªè¦å°†æˆ‘çš„markdownæ–‡ç« çš„æ–‡ä»¶å¤¹æ”¾å…¥&lt;code>content&lt;/code>ç›®å½•ï¼Œç½‘é¡µèµ„æ–™çš„å†…å®¹æ”¾åˆ°&lt;code>/static/ç½‘é¡µèµ„æ–™&lt;/code>ï¼Œimagesä¸­çš„å›¾ç‰‡æ–‡ä»¶å¤¹æ”¾åˆ°&lt;code>/static/images&lt;/code>ä¸­ï¼Œå³å¯è‡ªåŠ¨ç”Ÿæˆé™æ€ç½‘ç«™ã€‚&lt;/p>
&lt;h3 id="ä¸Šä¼ ä¿®æ”¹å¥½çš„hugoåšå®¢">ä¸Šä¼ ä¿®æ”¹å¥½çš„Hugoåšå®¢&lt;/h3>
&lt;p>é¦–å…ˆï¼Œæˆ‘ä»¬æŠŠæ”¹å¥½çš„ç½‘ç«™ä¸»é¢˜ä¸Šä¼ åˆ°äº‘ä¸»æœºï¼Œè·¯å¾„ä¸º&lt;code>/opt/blogtheme&lt;/code>ï¼Œå¹¶æŠŠ&lt;code>/opt/blogtheme&lt;/code>çš„æ‹¥æœ‰è€…æ”¹ä¸ºgitã€‚ç„¶åå°†å…¶ä¸­contentçš„å†…å®¹å»ºç«‹è½¯é“¾æ¥ï¼Œè¿æ¥åˆ°gitå·¥ä½œåŒºçš„ç›¸åº”ç›®å½•ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>&lt;span class="c1"># å°†/opt/blogthemeçš„æ‹¥æœ‰è€…æ”¹ä¸ºgit&lt;/span>
&lt;span class="ln">2&lt;/span>$ sudo chown git:git -R /opt/blogtheme
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>å¦‚æœä½¿ç”¨&lt;strong>è£¸ä»“åº“&lt;/strong>ï¼Œéœ€è¦ä»ä¸­è½¬ä»“åº“æå–éœ€è¦çš„æ–‡ä»¶ï¼Œè·¯å¾„ä¸º&lt;code>/srv/blogtransfer.git&lt;/code>ã€‚æˆ‘ä»¬å»ºç«‹ç›®å½•çš„è½¯é“¾æ¥ï¼š&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>&lt;span class="c1"># å¦‚æœä¸»é¢˜ä¸­å·²ç»æœ‰äº†/opt/blogtheme/static/projectnotesï¼Œåˆ™åˆ é™¤&lt;/span>
&lt;span class="ln">2&lt;/span>$ ln -s /srv/blogtransfer.git/å·¥ç¨‹ç¬”è®° /opt/blogtheme/content/projectnotes
&lt;span class="ln">3&lt;/span>&lt;span class="c1"># å¦‚æœä¸»é¢˜ä¸­å·²ç»æœ‰äº†/opt/blogtheme/static/studynotesï¼Œåˆ™åˆ é™¤&lt;/span>
&lt;span class="ln">4&lt;/span>$ ln -s /srv/blogtransfer.git/å­¦ä¹ ç¬”è®° /opt/blogtheme/content/studynotes
&lt;/code>&lt;/pre>&lt;/div>&lt;p>åœ¨hugo 0.62ä»¥åï¼Œä¸åœ¨æ”¯æŒstaticçš„è½¯é“¾æ¥å¤åˆ¶ï¼ˆè¯´æ˜¯å› ä¸ºå­˜åœ¨å¯èƒ½å¯¼è‡´å¾ªç¯é“¾æ¥ï¼‰ï¼Œå› æ­¤hugoä¸»é¢˜çš„staticæ–‡ä»¶å¤¹ä¸­æ— æ³•ç›´æ¥ä½¿ç”¨lnï¼Œé€€ä¸€æ­¥ï¼Œæˆ‘ä½¿ç”¨rsyncåŒæ­¥æ–‡ä»¶å¤¹ã€‚æˆ‘ä»¬æŠŠä¸‹é¢ä¸¤å‘½ä»¤åŠ åˆ°ä¹‹å‰çš„post-receiveè„šæœ¬ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>&lt;span class="c1"># rsync -a source destination&lt;/span>
&lt;span class="ln">2&lt;/span>&lt;span class="c1"># å›¾ç‰‡åŒæ­¥&lt;/span>
&lt;span class="ln">3&lt;/span>rsync -a --delete /srv/blogtransfer.git/images/ /opt/blogtheme/static/images
&lt;span class="ln">4&lt;/span>&lt;span class="c1"># ç½‘é¡µåŒæ­¥&lt;/span>
&lt;span class="ln">5&lt;/span>rsync -a --delete /srv/blogtransfer.git/ç½‘é¡µèµ„æ–™/ /opt/blogtheme/static/ç½‘é¡µèµ„æ–™
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>å¦‚æœä½¿ç”¨&lt;strong>æ™®é€šä»“åº“&lt;/strong>ï¼Œè·¯å¾„ä¸º&lt;code>/srv/gitblogs.git/&lt;/code>ã€‚æˆ‘ä»¬å»ºç«‹ç›®å½•çš„è½¯é“¾æ¥ï¼š&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>&lt;span class="c1"># å¦‚æœä¸»é¢˜ä¸­å·²ç»æœ‰äº†/opt/blogtheme/static/projectnotesï¼Œåˆ™åˆ é™¤&lt;/span>
&lt;span class="ln">2&lt;/span>$ ln -s /srv/gitblogs.git/å·¥ç¨‹ç¬”è®° /opt/blogtheme/content/projectnotes
&lt;span class="ln">3&lt;/span>&lt;span class="c1"># å¦‚æœä¸»é¢˜ä¸­å·²ç»æœ‰äº†/opt/blogtheme/static/studynotesï¼Œåˆ™åˆ é™¤&lt;/span>
&lt;span class="ln">4&lt;/span>$ ln -s /srv/gitblogs.git/å­¦ä¹ ç¬”è®° /opt/blogtheme/content/studynotes
&lt;/code>&lt;/pre>&lt;/div>&lt;p>åœ¨hugo 0.62ä»¥åï¼Œä¸åœ¨æ”¯æŒstaticçš„è½¯é“¾æ¥å¤åˆ¶ï¼ˆè¯´æ˜¯å› ä¸ºå­˜åœ¨å¯èƒ½å¯¼è‡´å¾ªç¯é“¾æ¥ï¼‰ï¼Œå› æ­¤hugoä¸»é¢˜çš„staticæ–‡ä»¶å¤¹ä¸­æ— æ³•ç›´æ¥ä½¿ç”¨lnï¼Œé€€ä¸€æ­¥ï¼Œæˆ‘ä½¿ç”¨rsyncåŒæ­¥æ–‡ä»¶å¤¹ã€‚æˆ‘ä»¬æŠŠä¸‹é¢ä¸¤å‘½ä»¤åŠ åˆ°ä¹‹å‰çš„post-receiveè„šæœ¬ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>&lt;span class="c1"># åœ¨hugo0.62ä»¥åï¼Œä¸åœ¨æ”¯æŒstaticçš„è½¯é“¾æ¥å¤åˆ¶ï¼ˆè¯´æ˜¯å› ä¸ºå­˜åœ¨å¯èƒ½å¯¼è‡´å¾ªç¯é“¾æ¥ï¼‰ï¼Œå› æ­¤staticæ–‡ä»¶ä¸­&lt;/span>
&lt;span class="ln">2&lt;/span>&lt;span class="c1"># æ— æ³•ç›´æ¥ä½¿ç”¨lnï¼Œé€€ä¸€æ­¥ï¼Œæˆ‘ç”¨rsyncåŒæ­¥ã€‚&lt;/span>
&lt;span class="ln">3&lt;/span>&lt;span class="c1"># rsync -a source destination&lt;/span>
&lt;span class="ln">4&lt;/span>&lt;span class="c1"># å›¾ç‰‡åŒæ­¥&lt;/span>
&lt;span class="ln">5&lt;/span>$ rsync -a --delete /srv/gitblogs.git/images/ /opt/blogtheme/static/images
&lt;span class="ln">6&lt;/span>&lt;span class="c1"># ç½‘é¡µåŒæ­¥&lt;/span>
&lt;span class="ln">7&lt;/span>$ rsync -a --delete /srv/gitblogs.git/ç½‘é¡µèµ„æ–™/ /opt/blogtheme/static/ç½‘é¡µèµ„æ–™
&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå®ç°äº†å†…å®¹å’Œæ ¼å¼çš„åˆ†ç¦»ï¼Œ&lt;code>/opt/blogtheme&lt;/code>åšä¸ºå­˜æ”¾æ ¼å¼çš„ä½ç½®ï¼ŒåŸºæœ¬ä¸ç”¨åŠ¨ï¼Œæ¯æ¬¡åªè¦gitæ›´æ–°å†…å®¹å³å¯ã€‚&lt;/p>
&lt;h2 id="ä½¿ç”¨jenkinsè‡ªåŠ¨åŒ–éƒ¨ç½²ç½‘ç«™">ä½¿ç”¨Jenkinsè‡ªåŠ¨åŒ–éƒ¨ç½²ç½‘ç«™&lt;/h2>
&lt;p>ç»è¿‡ä¸Šè¿°å‡†å¤‡ï¼Œæˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†æ‰€éœ€çš„å†…å®¹ï¼Œä¸‹é¢å°±æ˜¯ä½¿ç”¨jenkinså°†å®ƒä»¬æ„å»ºæˆç½‘ç«™ã€‚æˆ‘ä»¬é¦–å…ˆæ–°å»ºç½‘ç«™çš„ç›®å½•æ–‡ä»¶å¤¹&lt;code>/opt/public/&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>$ sudo mkdir /opt/public
&lt;span class="ln">2&lt;/span>&lt;span class="c1"># å°†/opt/publicçš„æ‹¥æœ‰è€…æ”¹ä¸ºgit&lt;/span>
&lt;span class="ln">3&lt;/span>$ sudo chown git:git /opt/public
&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¦‚æœç›´æ¥ä»shellæ‰‹åŠ¨è¾“å…¥æ„å»ºå‘½ä»¤ï¼Œå°±ä¸€å¥æŒ‡ä»¤å¾ˆç®€å•ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln"> 1&lt;/span>$ hugo --minify -s /opt/blogtheme -d /opt/public/
&lt;span class="ln"> 2&lt;/span>Start building sites â€¦
&lt;span class="ln"> 3&lt;/span>hugo v0.89.4-AB01BA6E+extended linux/amd64 &lt;span class="nv">BuildDate&lt;/span>&lt;span class="o">=&lt;/span>2021-11-17T08:24:09Z &lt;span class="nv">VendorInfo&lt;/span>&lt;span class="o">=&lt;/span>gohugoio
&lt;span class="ln"> 4&lt;/span>
&lt;span class="ln"> 5&lt;/span> &lt;span class="p">|&lt;/span> ZH-CN
&lt;span class="ln"> 6&lt;/span>-------------------+--------
&lt;span class="ln"> 7&lt;/span> Pages &lt;span class="p">|&lt;/span> &lt;span class="m">335&lt;/span>
&lt;span class="ln"> 8&lt;/span> Paginator pages &lt;span class="p">|&lt;/span> &lt;span class="m">54&lt;/span>
&lt;span class="ln"> 9&lt;/span> Non-page files &lt;span class="p">|&lt;/span> &lt;span class="m">0&lt;/span>
&lt;span class="ln">10&lt;/span> Static files &lt;span class="p">|&lt;/span> &lt;span class="m">361&lt;/span>
&lt;span class="ln">11&lt;/span> Processed images &lt;span class="p">|&lt;/span> &lt;span class="m">0&lt;/span>
&lt;span class="ln">12&lt;/span> Aliases &lt;span class="p">|&lt;/span> &lt;span class="m">80&lt;/span>
&lt;span class="ln">13&lt;/span> Sitemaps &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span>
&lt;span class="ln">14&lt;/span> Cleaned &lt;span class="p">|&lt;/span> &lt;span class="m">0&lt;/span>
&lt;span class="ln">15&lt;/span>
&lt;span class="ln">16&lt;/span>Total in &lt;span class="m">18050&lt;/span> ms
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸è¿‡ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨gitå®Œæˆpushåè‡ªåŠ¨æ‰§è¡Œã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨jenkinsæ¥å®Œæˆè‡ªåŠ¨æ„å»ºå‘½ä»¤ã€‚&lt;/p>
&lt;p>é¦–å…ˆï¼Œä¸ºäº†è§£å†³jenkinsçš„æƒé™å’Œç¯å¢ƒå˜é‡é—®é¢˜ï¼Œå®‰è£…å¥½jenkinsåï¼Œæˆ‘ä»¬éœ€è¦å…ˆè¿›è¡Œä»¥ä¸‹é…ç½®ï¼š&lt;/p>
&lt;ol>
&lt;li>é˜²æ­¢jenkinså‡ºç°command not foundçš„é”™è¯¯ï¼Œæˆ‘ä»¬è¦ä¸ºjenkinsæ·»åŠ &lt;code>PATH&lt;/code>ç¯å¢ƒå˜é‡ã€‚åœ¨ç³»ç»Ÿç®¡ç†-&amp;gt;ç³»ç»Ÿé…ç½®-&amp;gt;å…¨å±€å±æ€§å¯¹è¯æ¡†ä¸­é€‰ä¸­â€œç¯å¢ƒå˜é‡â€ï¼Œæ·»åŠ é”®å€¼å¯¹â€œPATHâ€å’ŒPATHå¯¹åº”å€¼ã€‚PATHå¯¹åº”å€¼åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨&lt;code>echo $PATH&lt;/code>è·å–ï¼Œå¤åˆ¶ç²˜è´´åˆ°è¿™é‡Œå³å¯ã€‚&lt;/li>
&lt;li>é˜²æ­¢jenkinså‡ºç°Permission deniedæƒé™ä¸å¤Ÿçš„é—®é¢˜ï¼Œæˆ‘ä»¬è¦é‡æ–°ä»¥gitç”¨æˆ·å¯åŠ¨jenkinsï¼Œä»¥gitç”¨æˆ·å¯åŠ¨æ˜¯å› ä¸ºæˆ‘ä»¬ä¹‹å‰æ–‡ä»¶æ‹¥æœ‰è€…éƒ½æ˜¯gitã€‚&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln"> 1&lt;/span>$ sudo vim /etc/sysconfig/jenkins
&lt;span class="ln"> 2&lt;/span>......
&lt;span class="ln"> 3&lt;/span> &lt;span class="c1">## Type: string&lt;/span>
&lt;span class="ln"> 4&lt;/span> &lt;span class="m">22&lt;/span> &lt;span class="c1">## Default: &amp;#34;jenkins&amp;#34;&lt;/span>
&lt;span class="ln"> 5&lt;/span> &lt;span class="m">23&lt;/span> &lt;span class="c1">## ServiceRestart: jenkins&lt;/span>
&lt;span class="ln"> 6&lt;/span> &lt;span class="m">24&lt;/span> &lt;span class="c1">#&lt;/span>
&lt;span class="ln"> 7&lt;/span> &lt;span class="m">25&lt;/span> &lt;span class="c1"># Unix user account that runs the Jenkins daemon&lt;/span>
&lt;span class="ln"> 8&lt;/span> &lt;span class="m">26&lt;/span> &lt;span class="c1"># Be careful when you change this, as you need to update&lt;/span>
&lt;span class="ln"> 9&lt;/span> &lt;span class="m">27&lt;/span> &lt;span class="c1"># permissions of $JENKINS_HOME and /var/log/jenkins.&lt;/span>
&lt;span class="ln">10&lt;/span> &lt;span class="m">28&lt;/span> &lt;span class="c1">#&lt;/span>
&lt;span class="ln">11&lt;/span> &lt;span class="m">29&lt;/span> &lt;span class="nv">JENKINS_USER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;git&amp;#34;&lt;/span> &lt;span class="c1"># ç”±é»˜è®¤å€¼jenkinsæ”¹ä¸ºgit&lt;/span>
&lt;span class="ln">12&lt;/span>......
&lt;span class="ln">13&lt;/span>&lt;span class="c1"># ä¿®æ”¹jenkinså¯¹åº”æ–‡ä»¶æ‹¥æœ‰è€…&lt;/span>
&lt;span class="ln">14&lt;/span>$ sudo chown -R git:git /var/lib/jenkins
&lt;span class="ln">15&lt;/span>$ sudo chown -R git:git /var/cache/jenkins
&lt;span class="ln">16&lt;/span>$ sudo chown -R git:git /var/log/jenkins
&lt;span class="ln">17&lt;/span>&lt;span class="c1"># é‡å¯jenkins&lt;/span>
&lt;span class="ln">18&lt;/span>$ sudo systemctl restart jenkins
&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ‰“å¼€jenkinsç½‘ç«™ç•Œé¢ï¼Œé»˜è®¤æ˜¯8080ç«¯å£ã€‚é¦–å…ˆæŒ‰ç…§é¡µé¢æç¤ºè¿›è¡Œåˆå§‹åŒ–ï¼ˆå› ä¸ºæˆ‘çš„jenkinsæ—©å°±å®‰è£…äº†ï¼Œè¿™é‡Œå°±ä¸ä»‹ç»åˆå§‹åŒ–æµç¨‹äº†ï¼‰ï¼Œç„¶åç‚¹å‡»å·¦è¾¹èœå•æ çš„â€œæ–°å»ºä»»åŠ¡â€ï¼Œè¾“å…¥ä»»åŠ¡åç§°ï¼Œé€‰æ‹©æ„å»ºä¸€ä¸ªè‡ªç”±é£æ ¼çš„è½¯ä»¶é¡¹ç›®ã€‚&lt;/p>
&lt;p>&lt;img src="../../images/devops-jenkins1.png" alt="jenkins1">&lt;/p>
&lt;p>æŒ‰ç…§å¦‚ä¸‹é…ç½®ï¼Œè®¾ç½®æ„å»ºæµç¨‹ã€‚æˆ‘ä»¬ä¸éœ€è¦æºç ï¼Œå› æ­¤ä¹Ÿæ²¡æœ‰å·¥ä½œåŒºï¼Œåœ¨æ„å»ºä¸€æ ä¸­åŠ ä¸Šéœ€è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚æ„å»ºè§¦å‘å™¨æ¥ä¸‹æ¥å†è®¾ç½®ã€‚&lt;/p>
&lt;p>&lt;img src="../../images/devops-jenkins2.png" alt="jenkins2">&lt;/p>
&lt;p>è®¾ç½®å¥½åï¼Œæˆ‘ä»¬ç‚¹å‡»ä¿å­˜ï¼Œç„¶åç‚¹å‡»å·¦ä¾§èœå•æ çš„â€œç«‹å³æ„å»ºâ€ï¼Œå°±å¯é€šè¿‡jenkinsæ‰§è¡Œæ„å»ºå‘½ä»¤ã€‚ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åšçš„ä»¥ä¸Šçš„å·¥ä½œï¼Œåªä¸è¿‡æ˜¯æŠŠåœ¨å‘½ä»¤è¡Œåšçš„å·¥ä½œæ”¾åˆ°jenkinsé‡Œå®Œæˆè€Œå·²ï¼Œè‹¥éœ€è¦è‡ªåŠ¨è§¦å‘æ„å»ºï¼Œè¿˜éœ€è¦æ„å»ºè§¦å‘å™¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p>
&lt;p>&lt;img src="../../images/devops-jenkins3.png" alt="jenkins3">&lt;/p>
&lt;p>æ„å»ºçš„è§¦å‘å™¨ç§ç±»é€‰æ‹©â€œè§¦å‘è¿œç¨‹æ„å»ºâ€ï¼Œç„¶ååœ¨èº«ä»½éªŒè¯ä»¤ç‰Œä¸­è¾“å…¥ä¸€ä¸²éšæœºæ•°ä½œä¸ºéªŒè¯ç ï¼Œæ¥ä¸‹é¢ï¼Œæˆ‘ä»¬åªéœ€è¦è®¿é—®ä¸€ä¸ªç½‘å€&lt;a href="http://127.0.0.1:8080/job/hugoblog/build?token=TOKEN_NAME">http://127.0.0.1:8080/job/hugoblog/build?token=TOKEN_NAME&lt;/a>ï¼Œå°±èƒ½è§¦å‘è¿™ä¸ªæ„å»ºã€‚ç”±äºæˆ‘ä»¬çš„gitåº“å’Œjenkinsåœ¨åŒä¸€å°ä¸»æœºä¸Šï¼Œæ‰€ä»¥IPå†™127.0.0.1å°±è¡Œï¼Œç«¯å£8080æ˜¯jenkinsçš„é»˜è®¤ç«¯å£ï¼Œåé¢çš„urlæ˜¯å›ºå®šçš„ï¼Œæœ€ååœ¨â€œTOKEN_NAMEâ€å¤„ç”¨æˆ‘ä»¬åˆšåœ¨èº«ä»½éªŒè¯ä»¤ç‰Œä¸­è¾“å…¥çš„éšæœºæ›¿ä»£ã€‚æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¾“å…¥è¿™ä¸ªURLï¼Œå°±å¯ä»¥å‘ç°jenkinså¯åŠ¨äº†ä¸€ä¸ªæ–°çš„æ„å»ºã€‚&lt;/p>
&lt;p>ä¸€èˆ¬è¿™æ ·å°±æ²¡ä»€ä¹ˆé—®è‹¥å‘ç”Ÿ403é”™è¯¯ï¼šError 403 No valid crumb was included in the requestï¼Œåˆ™è€ƒè™‘jenkinså…³é—­å…¨å±€å®‰å…¨è®¾ç½®ä¸­çš„â€œè·¨ç«™è¯·æ±‚ä¼ªé€ ä¿æŠ¤â€ï¼›è‹¥çœŸå¿ƒä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œåˆ™å¢åŠ è·å–crumbå€¼ï¼Œå…·ä½“æ­¥éª¤è‡ªè¡Œæœç´¢ã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦æŠŠè§¦å‘ç½‘å€çš„å·¥ä½œäº¤ç»™gitçš„hookè„šæœ¬ï¼Œæˆ‘ä»¬åœ¨post-receiveè„šæœ¬çš„æœ€åæ·»åŠ å¦‚ä¸‹å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>&lt;span class="c1"># è§¦å‘jenkinsç¼–è¯‘æ–°ç½‘ç«™&lt;/span>
&lt;span class="ln">2&lt;/span>&lt;span class="c1"># -X è¡¨ç¤ºè¯·æ±‚ç±»å‹ï¼Œç”¨postï¼›-u è¡¨ç¤ºè®¤è¯ä¿¡æ¯ï¼Œå¡«å†™ç™»å½•jenkinsçš„ç”¨æˆ·åå¯†ç ï¼›-vè¡¨ç¤ºæ˜¾ç¤ºè¯¦ç»†è¿‡ç¨‹&lt;/span>
&lt;span class="ln">3&lt;/span>&lt;span class="c1"># URLè§¦å‘è¿œç¨‹æ„å»ºæ‰€ç”¨çš„URL&lt;/span>
&lt;span class="ln">4&lt;/span>curl -X post -u &lt;span class="s1">&amp;#39;username:password&amp;#39;&lt;/span> -v http://127.0.0.1:8080/job/hugoblog/build?token&lt;span class="o">=&lt;/span>TOKEN_NAME
&lt;/code>&lt;/pre>&lt;/div>&lt;p>åˆ°æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†æœ¬åœ°&lt;code>git push&lt;/code>åï¼Œè‡ªåŠ¨å®Œæˆå†…å®¹æ›´æ–°ã€ç½‘ç«™æ„å»ºçš„å·¥ä½œã€‚&lt;/p>
&lt;h2 id="æ¨é€åˆ°githubå¹¶ç”Ÿæˆgitpages">æ¨é€åˆ°Githubå¹¶ç”ŸæˆGitpages&lt;/h2>
&lt;p>å¦‚æœè¦ä½¿ç”¨GitPagesï¼Œæˆ‘ä»¬éœ€è¦&lt;strong>å°†hugoç¼–è¯‘å¥½çš„ç½‘ç«™ï¼Œè€ŒéåŸå§‹æ•°æ®æ¨é€åˆ°GitHub&lt;/strong>ã€‚&lt;/p>
&lt;p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦åœ¨GitHubæ–°å»ºä¸€ä¸ªåº“ï¼Œåº“åæ¯”è¾ƒç‰¹æ®Šï¼Œå¿…é¡»æ˜¯ï¼š&lt;strong>ç”¨æˆ·å.github.io&lt;/strong>ï¼Œä¸”&lt;strong>æ‰€æœ‰å­—æ¯å¿…é¡»å°å†™&lt;/strong>ã€‚é€‰æ‹©publicç±»å‹ï¼Œç„¶åä¸‹é¢çš„READMEã€è¯ä¹¦ã€.gitignoreéƒ½ä¸ç”¨æ·»åŠ ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p>
&lt;p>&lt;img src="../../images/devops-gitpages.png" alt="åˆ›å»ºgitpages">&lt;/p>
&lt;p>ç”±äºæˆ‘ä»¬è‡ªå·±äº‘æœåŠ¡å’ŒGitHubçš„åŸŸåä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥æŠŠäº‘ä¸Šç¼–è¯‘å¥½çš„ç½‘ç«™ç›´æ¥pushåˆ°GitHubã€‚æˆ‘ä»¬éœ€è¦&lt;strong>æ”¹å˜baseUrlå‚æ•°&lt;/strong>ï¼Œé‡æ–°ç¼–è¯‘ã€‚ä¸ºäº†å…¬å¼å®Œæ•´ï¼Œæˆ‘ä»¬ä¹‹å‰åœ¨markdownç¼–è¯‘æ—¶ç”¨äº†pandocç¼–è¯‘é€Ÿåº¦æ…¢ï¼ŒåŒæ—¶å›½å†…è¿æ¥githubç½‘ç»œä¸ç¨³å®šï¼Œæ‰€ä»¥æˆ‘åœ¨jenkinsä¸­å•ç‹¬ä¸ºGithubçš„æ¨é€æµç¨‹æ–°å»ºäº†ä¸€ä¸ªä»»åŠ¡ï¼Œä»¥å…æ‹–ç´¯æœ¬åœ°ç¼–è¯‘è¿‡ç¨‹ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å…ˆåšä¸€äº›å‡†å¤‡å·¥ä½œã€‚&lt;/p>
&lt;p>ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬ä¸ºäº†èƒ½è®©äº‘æœåŠ¡å™¨æœ‰æƒé™æŠŠå†…å®¹æ¨é€ç»™GitHubçš„åº“ï¼Œå› æ­¤è¦å°†è‡ªå·±çš„å…¬é’¥å­˜æ”¾åˆ°GitHubä¸Šã€‚æˆ‘ä»¬å­˜æ”¾çš„æ˜¯äº‘æœåŠ¡å™¨ä¸Šgitç”¨æˆ·çš„å…¬é’¥ï¼ŒæŸ¥çœ‹gitç”¨æˆ·çš„å…¬é’¥&lt;code>cat /home/git/.ssh/id_rsa.pub&lt;/code>ï¼Œè‹¥æ²¡æœ‰æ­¤æ–‡ä»¶åˆ™ä½¿ç”¨gitç”¨æˆ·çš„&lt;code>ssh-keygen -t rsa&lt;/code>åˆ›å»ºã€‚å°†å…¬é’¥æ”¾åˆ°GitHubå³ä¸Šè§’å›¾åƒ-&amp;gt;settings-&amp;gt;SSH and GPG keys-&amp;gt;New SSH keyï¼Œç„¶åæŠŠå…¬é’¥å¤åˆ¶ç²˜è´´è¿‡æ¥ã€‚&lt;/p>
&lt;p>ç¬¬äºŒæ­¥ï¼Œæˆ‘ä»¬ä¸ºæ¨é€åˆ°githubçš„åº“åšä¸€äº›åˆå§‹åŒ–å·¥ä½œã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln"> 1&lt;/span>&lt;span class="c1"># ä¸ºGitHubæ–°å»ºåº“æ–‡ä»¶å¤¹ï¼Œå¹¶å°†æ‰€æœ‰è€…æ”¹ä¸ºgit&lt;/span>
&lt;span class="ln"> 2&lt;/span>$ sudo mkdir &lt;span class="nb">cd&lt;/span> /opt/surprisedcat.github.io
&lt;span class="ln"> 3&lt;/span>$ sudo chown git:git /opt/surprisedcat.github.io
&lt;span class="ln"> 4&lt;/span>&lt;span class="c1"># åˆ‡æ¢åˆ°gitç”¨æˆ·æ‰§è¡Œä»¥ä¸‹æ“ä½œ&lt;/span>
&lt;span class="ln"> 5&lt;/span>$ su - git
&lt;span class="ln"> 6&lt;/span>&lt;span class="c1"># é‡æ–°ç¼–è¯‘ç½‘ç«™ï¼Œæ³¨æ„baseUrlæ˜¯ä¸åŒçš„&lt;/span>
&lt;span class="ln"> 7&lt;/span>$ hugo --minify --baseUrl&lt;span class="o">=&lt;/span>https://surprisedcat.github.io -s /opt/blogtheme -d /opt/surprisedcat.github.io/
&lt;span class="ln"> 8&lt;/span>Start building sites â€¦
&lt;span class="ln"> 9&lt;/span>hugo v0.89.4-AB01BA6E+extended linux/amd64 &lt;span class="nv">BuildDate&lt;/span>&lt;span class="o">=&lt;/span>2021-11-17T08:24:09Z &lt;span class="nv">VendorInfo&lt;/span>&lt;span class="o">=&lt;/span>gohugoio
&lt;span class="ln">10&lt;/span>
&lt;span class="ln">11&lt;/span> &lt;span class="p">|&lt;/span> ZH-CN
&lt;span class="ln">12&lt;/span>-------------------+--------
&lt;span class="ln">13&lt;/span> Pages &lt;span class="p">|&lt;/span> &lt;span class="m">335&lt;/span>
&lt;span class="ln">14&lt;/span> Paginator pages &lt;span class="p">|&lt;/span> &lt;span class="m">54&lt;/span>
&lt;span class="ln">15&lt;/span> Non-page files &lt;span class="p">|&lt;/span> &lt;span class="m">0&lt;/span>
&lt;span class="ln">16&lt;/span> Static files &lt;span class="p">|&lt;/span> &lt;span class="m">364&lt;/span>
&lt;span class="ln">17&lt;/span> Processed images &lt;span class="p">|&lt;/span> &lt;span class="m">0&lt;/span>
&lt;span class="ln">18&lt;/span> Aliases &lt;span class="p">|&lt;/span> &lt;span class="m">80&lt;/span>
&lt;span class="ln">19&lt;/span> Sitemaps &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span>
&lt;span class="ln">20&lt;/span> Cleaned &lt;span class="p">|&lt;/span> &lt;span class="m">0&lt;/span>
&lt;span class="ln">21&lt;/span>
&lt;span class="ln">22&lt;/span>Total in &lt;span class="m">18596&lt;/span> ms
&lt;span class="ln">23&lt;/span>&lt;span class="c1"># åˆå§‹åŒ–gitåº“&lt;/span>
&lt;span class="ln">24&lt;/span>$ &lt;span class="nb">cd&lt;/span> /opt/surprisedcat.github.io
&lt;span class="ln">25&lt;/span>$ git init .
&lt;span class="ln">26&lt;/span>&lt;span class="c1"># ç¬¬ä¸€æ¬¡commitå’Œæ·»åŠ è¿œç¨‹åº“ï¼Œcommitå¸¦ä¸Šæ—¥æœŸ&lt;/span>
&lt;span class="ln">27&lt;/span>$ git add .
&lt;span class="ln">28&lt;/span>$ git commit -m &lt;span class="s2">&amp;#34;`date` commit&amp;#34;&lt;/span>
&lt;span class="ln">29&lt;/span>&lt;span class="c1"># å°†ä¸»åˆ†æ”¯é‡å‘½åä¸ºmain&lt;/span>
&lt;span class="ln">30&lt;/span>$ git branch -M main
&lt;span class="ln">31&lt;/span>$ git remote add origin git@github.com:SurprisedCat/surprisedcat.github.io.git
&lt;span class="ln">32&lt;/span>$ git push -u origin main
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç¬¬ä¸‰æ­¥ï¼Œåœ¨jenkinsä¸­æ–°å»ºæ„å»ºä»»åŠ¡ã€‚æºç ç®¡ç†é€‰æ‹©â€œæ— â€ï¼Œæ„å»ºè§¦å‘å™¨é€‰æ‹©å¦‚ä¸‹å›¾ï¼š&lt;/p>
&lt;p>&lt;img src="../../images/devops-jenkins-gitpages.png" alt="jenkins-github">&lt;/p>
&lt;p>æˆ‘ä»¬å»ºç«‹ä¸¤ä¸ªè§¦å‘å™¨ï¼Œä¸€æ˜¯ä¼ ç»Ÿè¿œç¨‹è§¦å‘å™¨ï¼ŒäºŒæ˜¯åœ¨äº‘æ„å»ºå®Œæˆåï¼Œè‡ªåŠ¨æ„å»ºæ¨é€åˆ°githubçš„æµç¨‹ã€‚&lt;/p>
&lt;p>åœ¨æ„å»ºæ ç›®ä¸‹ï¼Œé€‰æ‹©â€œæ‰§è¡Œshellâ€ï¼Œå¹¶å¡«å…¥ä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="ln">1&lt;/span>hugo --minify --baseUrl&lt;span class="o">=&lt;/span>https://surprisedcat.github.io -s /opt/blogtheme -d /opt/surprisedcat.github.io/
&lt;span class="ln">2&lt;/span>&lt;span class="nb">cd&lt;/span> /opt/surprisedcat.github.io
&lt;span class="ln">3&lt;/span>git add .
&lt;span class="ln">4&lt;/span>git commit -m &lt;span class="s2">&amp;#34;`date` commit&amp;#34;&lt;/span>
&lt;span class="ln">5&lt;/span>git push -u origin main
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç‚¹å‡»ä¿å­˜ã€‚&lt;/p>
&lt;p>ä¸€æ•´å¥—é…ç½®å®Œæˆã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥ï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œæˆ‘ä»¬ä¸å†å…è®¸gitä½¿ç”¨shellç™»å½•ï¼ˆè¿‡æ²³æ‹†æ¡¥å•¦ï¼‰ï¼Œæˆ‘ä»¬ä¿®æ”¹&lt;code>/etc/passwd&lt;/code>ä¸‹gitç”¨æˆ·çš„æœ€åä¸€é¡¹ï¼Œå°†&lt;code>/bin/bash&lt;/code>æ”¹ä¸º&lt;code>/usr/bin/git-shell&lt;/code>ï¼Œè¿™æ ·ï¼Œgitç”¨æˆ·å¯ä»¥æ­£å¸¸é€šè¿‡sshä½¿ç”¨gitï¼Œä½†æ— æ³•ç™»å½•shellï¼Œå› ä¸ºæˆ‘ä»¬ä¸ºgitç”¨æˆ·æŒ‡å®šçš„git-shellæ¯æ¬¡ä¸€ç™»å½•å°±è‡ªåŠ¨é€€å‡ºã€‚&lt;/p></description></item></channel></rss>