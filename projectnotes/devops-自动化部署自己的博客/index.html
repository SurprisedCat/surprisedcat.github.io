<!doctype html><html lang=zh-cn data-figures=true class=page>
<head>
<title>devops-自动化部署自己的博客 | SurprisedCat</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta http-equiv=x-ua-compatible content="IE=edge">
<script async src="https://www.googletagmanager.com/gtag/js?id=XXXXXXXXXX"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','XXXXXXXXXX')</script>
<meta property="og:locale" content="zh-cn">
<meta property="og:type" content="article">
<meta name=description content="devops-自动化部署自己的博客 description.">
<meta property="og:url" content="https://surprisedcat.github.io/projectnotes/devops-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/">
<meta property="og:title" content="devops-自动化部署自己的博客">
<meta property="og:description" content="devops-自动化部署自己的博客 description.">
<meta property="og:image" content="https://surprisedcat.github.io/images/devops.png">
<link rel=apple-touch-icon sizes=180x180 href=https://surprisedcat.github.io/icons/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=https://surprisedcat.github.io/icons/favicon-32x32.png>
<link rel=manifest href=https://surprisedcat.github.io/icons/site.webmanifest>
<link rel=canonical href=https://surprisedcat.github.io/projectnotes/devops-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/>
<link rel=preload href=https://surprisedcat.github.io/css/styles.a3742134d3e1b4d5a43d5d99d6fde5df18cdb8e92f1b06e883302e8d743fda2b39f326b1db81554458e7df32a333512eadc6927c4148f7e4606c4bd65564110a.css integrity="sha512-o3QhNNPhtNWkPV2Z1v3l3xjNuOkvGwbogzAujXQ/2is58yax24FVRFjn3zKjM1EurcaSfEFI9+RgbEvWVWQRCg==" as=style crossorigin=anonymous>
<link rel=preload href=https://surprisedcat.github.io/js/bundle.min.d42eaf65945a88c7a467385caae103c01ac5ca08a2c6b1751c446b8f6738f3aa0709195716639fbb56728b4e82d68f047d6cb08b7fa4044d74ef28f7085086f2.js as=script integrity="sha512-1C6vZZRaiMekZzhcquEDwBrFygiixrF1HERrj2c486oHCRlXFmOfu1Zyi06C1o8EfWywi3+kBE107yj3CFCG8g==" crossorigin=anonymous>
<link rel=stylesheet type=text/css href=https://surprisedcat.github.io/css/styles.a3742134d3e1b4d5a43d5d99d6fde5df18cdb8e92f1b06e883302e8d743fda2b39f326b1db81554458e7df32a333512eadc6927c4148f7e4606c4bd65564110a.css integrity="sha512-o3QhNNPhtNWkPV2Z1v3l3xjNuOkvGwbogzAujXQ/2is58yax24FVRFjn3zKjM1EurcaSfEFI9+RgbEvWVWQRCg==" crossorigin=anonymous>
</head>
<body data-code=20 data-lines=true id=documentTop>
<header class=nav_header>
<nav class=nav><a href=https://surprisedcat.github.io class="nav_brand nav_item" title=SurprisedCat>
<img src=https://surprisedcat.github.io/logos/logo.png class=logo alt=SurprisedCat>
<div class=nav_close>
<div><svg class="icon"><use xlink:href="#open-menu"/></svg><svg class="icon"><use xlink:href="#closeme"/></svg></div>
</div>
</a>
<div class="nav_body nav_body_left">
<div class=nav_parent>
<a href=https://surprisedcat.github.io class=nav_item title=主页>主页 </a>
</div>
<div class=nav_parent>
<a href=https://surprisedcat.github.io class=nav_item title=专栏>专栏 <img src=https://surprisedcat.github.io/icons/caret-icon.svg alt=icon class=nav_icon></a>
<div class=nav_sub>
<span class=nav_child></span>
<a href=https://surprisedcat.github.io/studynotes/ class="nav_child nav_item" title=学习笔记>学习笔记</a>
<a href=https://surprisedcat.github.io/projectnotes/ class="nav_child nav_item" title=工程笔记>工程笔记</a>
</div>
</div>
<div class=nav_parent>
<a href=https://surprisedcat.github.io class=nav_item title=资料库>资料库 <img src=https://surprisedcat.github.io/icons/caret-icon.svg alt=icon class=nav_icon></a>
<div class=nav_sub>
<span class=nav_child></span>
<a href=https://surprisedcat.github.io/library/webpages/ class="nav_child nav_item" title=资料Web版>资料Web版</a>
<a href=https://surprisedcat.github.io/library/bookmarks/ class="nav_child nav_item" title=资料库链接>资料库链接</a>
</div>
</div>
<div class=nav_parent>
<a href=https://surprisedcat.github.io/category/ class=nav_item title=分类>分类 </a>
</div>
<div class=nav_parent>
<a href=https://surprisedcat.github.io/archives/ class=nav_item title=归档>归档 </a>
</div>
<div class=nav_parent>
<a href=https://surprisedcat.github.io/about/ class=nav_item title=关于>关于 </a>
</div>
<div class=follow>
<a href=https://github.com/SurprisedCat><svg class="icon"><use xlink:href="#github"/></svg>
</a>
<a href=https://www.linkedin.com/in/#><svg class="icon"><use xlink:href="#linkedin"/></svg>
</a>
<div class=color_mode>
<input type=checkbox class=color_choice id=mode>
</div>
</div>
</nav>
</header>
<main>
<div class="grid-inverse wrap content">
<article class=post_content>
<h1 class=post_title>devops-自动化部署自己的博客</h1>
<div class=post_meta>
<span><svg class="icon"><use xlink:href="#calendar"/></svg></span>
<span class=post_date>
Nov 25, 2021</span><span>&nbsp;· <a href=https://surprisedcat.github.io/tags/devops title=devops class="post_tag button button_translucent">devops
</a>
</span>
<span class=page_only>&nbsp;·
<div class=post_share>
分享到:
<a href=https://surprisedcat.github.io/projectnotes/devops-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/ title="Copy Link" class="link link_yank"><svg class="icon"><use xlink:href="#copy"/></svg>
</a>
</div>
</span>
</div>
<h2 id=自动化部署自己的博客---omit-in-toc--->自动化部署自己的博客</h2>
<ul>
<li><a href=#%E6%80%9D%E8%B7%AF%E6%B1%87%E6%80%BB>思路汇总</a></li>
<li><a href=#%E9%80%89%E5%AE%9A%E9%9C%80%E8%A6%81git%E7%AE%A1%E7%90%86%E7%9A%84%E5%86%85%E5%AE%B9>选定需要git管理的内容</a>
<ul>
<li><a href=#gitignore%E6%B7%BB%E5%8A%A0%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6%E5%A4%B1%E6%95%88%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95>gitignore添加忽略文件失效的处理方法</a></li>
</ul>
</li>
<li><a href=#%E5%9C%A8%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E6%90%AD%E5%BB%BAgit%E6%9C%8D%E5%8A%A1%E5%99%A8>在云服务器上搭建git服务器</a>
<ul>
<li><a href=#%E5%88%9B%E5%BB%BAgit%E7%94%A8%E6%88%B7%E5%92%8C%E5%BA%93%E6%96%87%E4%BB%B6>创建Git用户和库文件</a></li>
<li><a href=#%E6%B7%BB%E5%8A%A0ssh%E5%85%AC%E9%92%A5>添加ssh公钥</a></li>
<li><a href=#%E6%9C%AC%E5%9C%B0%E5%BA%93%E8%AE%BE%E7%BD%AE%E8%BF%9C%E7%A8%8B%E5%BA%93%E7%9A%84%E5%9C%B0%E5%9D%80>本地库设置远程库的地址</a></li>
<li><a href=#%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8C%BA%E6%9B%B4%E6%96%B0%E6%96%B9%E6%B3%95>远程仓库的工作区更新方法</a>
<ul>
<li><a href=#%E6%8E%A8%E9%80%81%E7%BB%99%E8%A3%B8%E4%BB%93%E5%BA%93%E7%9A%84%E6%83%85%E5%BD%A2>推送给裸仓库的情形</a></li>
<li><a href=#%E6%8E%A8%E9%80%81%E7%BB%99%E6%99%AE%E9%80%9A%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9A%84%E6%83%85%E5%BD%A2>推送给普通远程仓库的情形</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#%E8%AE%BE%E7%BD%AEpost-receive-hook%E5%AE%8C%E6%88%90%E5%86%85%E5%AE%B9%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0>设置post-receive hook完成内容自动更新</a>
<ul>
<li><a href=#%E8%A3%B8%E4%BB%93%E5%BA%93%E7%9A%84%E6%9B%B4%E6%96%B0>裸仓库的更新</a></li>
<li><a href=#%E6%99%AE%E9%80%9A%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9A%84%E6%9B%B4%E6%96%B0%E8%84%9A%E6%9C%AC>普通远程仓库的更新脚本</a></li>
</ul>
</li>
<li><a href=#%E4%BD%BF%E7%94%A8hugo%E4%BD%9C%E4%B8%BA%E5%8D%9A%E5%AE%A2%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7>使用HUGO作为博客生成工具</a>
<ul>
<li><a href=#%E4%BF%AE%E6%94%B9hugo%E5%8D%9A%E5%AE%A2%E7%9A%84clarity%E4%B8%BB%E9%A2%98>修改Hugo博客的clarity主题</a></li>
<li><a href=#%E4%B8%8A%E4%BC%A0%E4%BF%AE%E6%94%B9%E5%A5%BD%E7%9A%84hugo%E5%8D%9A%E5%AE%A2>上传修改好的Hugo博客</a></li>
</ul>
</li>
<li><a href=#%E4%BD%BF%E7%94%A8jenkins%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E7%BD%91%E7%AB%99>使用Jenkins自动化部署网站</a></li>
<li><a href=#%E6%8E%A8%E9%80%81%E5%88%B0github%E5%B9%B6%E7%94%9F%E6%88%90gitpages>推送到Github并生成Gitpages</a></li>
</ul>
<h2 id=思路汇总>思路汇总</h2>
<p>我自己分几个文件夹写了一些笔记和资料，现在想用Hugo部署到自己的云主机上同时同步到github上，利用gitpage在生成一个blog，也就是自动生成两个同步的blog，初步体验一下DevOps流程。目前本地使用win10，带有git；云主机是Debian 10，有golang 1.15.14环境。主要使用了git hooks和jenkins，以及rsync作为补充。</p>
<p><img src=../../images/devops.png alt=DevOps></p>
<p>总体思路：</p>
<ol>
<li>由于本地文件夹都放在一起，首先通过编辑.gitignore文件，指定需要git管理的几个文件。</li>
<li>将自己的云服务器作为一个git remote仓库，管理自己的这些资料和笔记</li>
<li>在云服务器的git repo中设置hook，将这些本来在不同文件夹中笔记和资料<del>复制到特定文件夹中</del>。注:用hook复制的方法并不好，因为当文件名称修改或被删除时，就无法实现文件的同步。
<ul>
<li>改成在远程主机上再设置一个git仓库，设置post-receive hook通知jenkins将提交的内容pull到云主机新的仓库中</li>
</ul>
</li>
<li>建立hugo文件到git仓库的软链接，不能使用软链接的用rsync同步过去，当hugo编译的时候实际使用的是git仓库中的文件</li>
<li>使用jenkins自动构建部署云服务器上的Hugo blog</li>
<li>将完整的编译好的Hugo blog推送到GitHub，利用GitPages生成网站。</li>
</ol>
<p>为什么不设置两个remote repo分别推送？怕自己疏忽，造成大量的冲突处理问题。</p>
<p>为什么不先推送到GitHub再用Github Actions推送到云上？自己觉得在云上折腾比较方便，就当云是测试环境，GitHub是发布环境吧。</p>
<h2 id=选定需要git管理的内容>选定需要git管理的内容</h2>
<p>我们在有很多文件/文件夹的地方执行<code>git init .</code>时，会有大量不需要的文件也被放入待添加空间，我们需要先创建一个<code>.gitignore</code>文件筛选出我们需要的文件。比如，我们需要保留images，学习笔记，工程笔记，网页资料四个文件夹，其他全部不要，则<code>.gitignore</code>文件可以写成:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln> 1</span><span class=c1># 先忽略跟文件下所有文件，开头使用/防止递归</span>
<span class=ln> 2</span>/*
<span class=ln> 3</span><span class=c1># 取反所有需要git管理的文件</span>
<span class=ln> 4</span><span class=c1># images图片文件夹</span>
<span class=ln> 5</span>!/images
<span class=ln> 6</span><span class=c1># 笔记文件夹：学习笔记，工程笔记</span>
<span class=ln> 7</span>!/学习笔记
<span class=ln> 8</span>!/工程笔记
<span class=ln> 9</span><span class=c1># 资料文件夹，已提前都转为网页格式</span>
<span class=ln>10</span>!/网页资料
<span class=ln>11</span><span class=c1># .gitignore本身</span>
<span class=ln>12</span>!.gitignore
</code></pre></div><p>然后查看目前状态：</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln> 1</span>$ git status
<span class=ln> 2</span>On branch master
<span class=ln> 3</span>No commits yet
<span class=ln> 4</span>Untracked files:
<span class=ln> 5</span>  <span class=o>(</span>use <span class=s2>&#34;git add &lt;file&gt;...&#34;</span> to include in what will be committed<span class=o>)</span>
<span class=ln> 6</span>        .gitignore
<span class=ln> 7</span>        images/
<span class=ln> 8</span>        学习笔记/
<span class=ln> 9</span>        工程笔记/
<span class=ln>10</span>        网页资料/
<span class=ln>11</span>nothing added to commit but untracked files present <span class=o>(</span>use <span class=s2>&#34;git add&#34;</span> to track<span class=o>)</span>
</code></pre></div><p>没有问题，接下来正常流程，添加进git本地库。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span>$ git add .
<span class=ln>2</span>......
<span class=ln>3</span>$ git commit -m <span class=s2>&#34;首次将images，学习笔记，工程笔记，网页资料四个文件夹添加进repo&#34;</span>
<span class=ln>4</span>......
</code></pre></div><p>如果是初次使用git，还要先配置用户信息，这一点很重要，因为每一个Git提交都会使用这些信息，它们会写入到你的每一次提交中，不可更改。比如：</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span>$ git config --global user.name <span class=s2>&#34;John Doe&#34;</span>
<span class=ln>2</span>$ git config --global user.email johndoe@example.com
<span class=ln>3</span><span class=c1># 然后查看现有的全局信息，已有用户信息</span>
<span class=ln>4</span>$ git config --list
</code></pre></div><h3 id=gitignore添加忽略文件失效的处理方法>gitignore添加忽略文件失效的处理方法</h3>
<p>如果项目开始的时候没有将一些无关文件配置进<code>.gitignore</code>里面,导致文件已经进行跟踪了，但是目前想把这些文件添加到<code>.gitignore</code>文件中，但是发现没有效果。<strong>这是因为<code>.gitignore</code>对已被<code>git</code>管理的文件无效</strong>。在这种情况下，必须使用<code>git rm --cached &lt; file name ></code>这个命令来移除对这个文件的跟踪，然后将不想被跟踪的文件添加到<code>.gitignore</code>文件里面就可以了。</p>
<h2 id=在云服务器上搭建git服务器>在云服务器上搭建git服务器</h2>
<p>由于git是完全分布式设计，本质上，各个git库之间是没有主次之分的（各个库之间实际上都可以互相pull/push）。因此，在云服务器上搭建一个git服务器和客户端安装git过程上没有区别。在win 10 上安装git安装包（<strong>包括git bash，它有一个奇葩设计之后再说</strong>），在Debian 10上使用<code>sudo apt install git</code>安装。我们“人为决定”让云服务器上的git repo作为“公共库”，本地主机上的作为工作环境。</p>
<h3 id=创建git用户和库文件>创建Git用户和库文件</h3>
<p>在云服务器上，我们最好再添加一个专用git用户（不添加也可以，URL中git@domain.com:port或git@ip:port就是git作为用户名，如果你用的是别的用户，比如jack，那么就用jack@domain.com:port）</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln> 1</span><span class=c1># 在云服务器上</span>
<span class=ln> 2</span>$ sudo adduser git
<span class=ln> 3</span>......... <span class=c1># 这里会设定git的密码，要记住</span>
<span class=ln> 4</span>.........
<span class=ln> 5</span>.........
<span class=ln> 6</span>$ <span class=nb>cd</span> /srv <span class=o>&amp;&amp;</span> sudo mkdir gitblogs.git <span class=c1># 未来把/srv/gitblogs.git作为库位置，一般git库都以.git作为结尾</span>
<span class=ln> 7</span>$ sudo chown -R git:git gitblogs.git <span class=c1># 把所属用户从root改成git</span>
<span class=ln> 8</span>$ su - git <span class=c1># 带 - 符号表示环境变量也跟着切换</span>
<span class=ln> 9</span><span class=c1># 如果把git设置成非登录用户，则以下操作用root执行，再把文件拥有者和组改成git</span>
<span class=ln>10</span>.......... <span class=c1># 输入git用户密码</span>
<span class=ln>11</span>$ id <span class=c1># 实际id号码可能有区别</span>
<span class=ln>12</span><span class=nv>uid</span><span class=o>=</span>1001<span class=o>(</span>git<span class=o>)</span> <span class=nv>gid</span><span class=o>=</span>1001<span class=o>(</span>git<span class=o>)</span> <span class=nv>groups</span><span class=o>=</span>1001<span class=o>(</span>git<span class=o>)</span>
</code></pre></div><p>有的用<code>useradd git</code>创建新用户，这样只是创建了一个最小用户结构，里面很多设置、环境变量得自己弄，比较麻烦。自己也没那么多安全性讲究（包括但不限于nonlogin设置），就不那么麻烦了，直接<code>sudo adduser git</code>搞定。下面我们要在云端建立存储内容的仓库，有两种方式：一是建立裸库，二是建立普通库来实现同步。建立裸库之后，里面什么都没有，即使push内容之后也不会显示到工作区，也无法进行操作，只是单纯的一个存储仓库，需要在云端建立一个中转普通仓库来读取内容；建立普通库可以不用再在云端建立中转库，但是需要post-receive钩子来实现内容更新。我这里更推荐第一种。</p>
<p>下面是初始化裸库：</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span>$ <span class=nb>cd</span> /srv/gitblogs.git
<span class=ln>2</span><span class=c1># 远程服务器初始化仓库</span>
<span class=ln>3</span>$ git init . --bare
</code></pre></div><p>下面是初始化普通库</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span>$ <span class=nb>cd</span> /srv/gitblogs.git
<span class=ln>2</span><span class=c1># 远程服务器初始化仓库</span>
<span class=ln>3</span>$ git init .
<span class=ln>4</span><span class=c1># 允许向普通库push</span>
<span class=ln>5</span>$ git config receive.denyCurrentBranch ignore
</code></pre></div><p>详细说明如下：</p>
<p>（1）我们可以用<code>git init .</code>建立一个普通库，而非裸库。当你创建一个普通库时，在工作目录下，除了.git目录之外，你还可以看到库中所包含的所有源文件。你拥有了一个可以进行浏览和修改（add, commit, delete等）的本地库。当你创建一个裸库时，在工作目录下，只有一个.git目录，<strong>裸库是没有工作区的</strong>！库仅包含记录着版本历史的文件。如果建立的是普通库，由于有工作区，可以直接把hugo博客内容的软连接建立到普通库的文件中，但是git不鼓励直接操作远程仓库的内容，所以我推荐在云上建立裸库后，在建立第二个普通库作为中转。</p>
<p>（2）自Git 1.6.2版以来，Git默认不会让你推送到非裸库。这是因为<code>git push</code>命令仅更新远程存储库上的分支和HEAD引用。<strong>它不会更新非裸机中的工作区副本、暂存区和版本指针</strong>。因此我们让git需要忽略这个要求，即<code>git config receive.denyCurrentBranch ignore</code>。此外，由于工作区也不会自动更新，我们后面会使用post-receive hook来更新工作区内容。</p>
<h3 id=添加ssh公钥>添加ssh公钥</h3>
<p>首先，保证<strong>服务端</strong>是允许通过公钥登陆，在<code>/etc/ssh/sshd_config</code>中，去掉公钥登录相关的注释符。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span><span class=c1># 通过公钥登录，如果需要就去掉前面的注释符</span>
<span class=ln>2</span>PubkeyAuthentication yes
<span class=ln>3</span><span class=c1># 指定存放客户端ssh公钥的文件的位置</span>
<span class=ln>4</span><span class=c1># Expect .ssh/authorized_keys2 to be disregarded by default in future.</span>
<span class=ln>5</span>AuthorizedKeysFile      .ssh/authorized_keys .ssh/authorized_keys2
</code></pre></div><p>其次，在<strong>客户端生成公私钥对</strong>，win 10可以用cmd或git bash生成：</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span><span class=c1># 生成公私钥对，下面一路回车即可</span>
<span class=ln>2</span>$ ssh-keygen -t rsa
<span class=ln>3</span>Generating public/private rsa key pair.
<span class=ln>4</span>Enter file in which to save the key <span class=o>(</span>++++++++++<span class=o>)</span>:
<span class=ln>5</span>Created directory <span class=s1>&#39;++++++++++&#39;</span>.
<span class=ln>6</span>Enter passphrase <span class=o>(</span>empty <span class=k>for</span> no passphrase<span class=o>)</span>:
<span class=ln>7</span>Enter same passphrase again:
<span class=ln>8</span>Your identification has been saved in ++++++++++/id_rsa.
<span class=ln>9</span>Your public key has been saved in ++++++++++/id_rsa.pub.
</code></pre></div><p>'++++++++++'指的是公私钥对存放的位置（Windows用户在C:\用户\“用户名”\.ssh目录下可以看到系统的.ssh公钥id_rsa.pub），打开该位置，然后将<code>id_rsa.pub</code>文件中的内容复制出来，放到<strong>服务端</strong>的<code>.ssh/authorized_keys</code>文件中(没有就在此位置新建一个)，即可通过公钥进行clone、push和pull操作。</p>
<blockquote>
<p>也可不添加公钥，每次使用git用户的密码进行clone、push和pull操作。</p>
</blockquote>
<h3 id=本地库设置远程库的地址>本地库设置远程库的地址</h3>
<p>由于为了平衡简单和安全，我们不用HTTP和Git协议（没装git-daemon），而选用SSH协议作为本地端和云服务器段的传输。SSH协议用于为Git提供远程读写操作，是远程写操作的标准服务，在智能HTTP协议出现之前，甚至是写操作的唯一标准服务。</p>
<p>对于拥有shell登录权限的用户帐号，可以用下面的语法访问Git版本库：</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span><span class=c1>#语法1： </span>
<span class=ln>2</span>$ ssh://<span class=o>[</span>&lt;username&gt;@<span class=o>]</span>&lt;server&gt;<span class=o>[</span>:&lt;port&gt;<span class=o>]</span>/path/to/repos/myrepo.git
<span class=ln>3</span><span class=c1>#语法2：</span>
<span class=ln>4</span>$ <span class=o>[</span>&lt;username&gt;@<span class=o>]</span>&lt;server&gt;:/path/to/repos/myrepo.git
</code></pre></div><p>第一种是使用ssh://开头的SSH协议标准URL写法，另外一种是SCP格式的写法。
两种写法均可，SSH协议标准URL写法稍嫌复杂，<strong>但是对于非标准SSH端口（非22端口），可以通过URL给出端口号</strong>。由于我使用5122作为ssh端口号，所以我使用第一种语法。</p>
<p>在本地git库添加远程仓库地址</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span><span class=c1># 添加远程地址</span>
<span class=ln>2</span>$ git remote add origin ssh://git@<span class=s2>&#34;your IP or domain&#34;</span>:<span class=s2>&#34;port number&#34;</span>/srv/gitblogs.git
<span class=ln>3</span><span class=c1># 推送本地仓库到远程仓库</span>
<span class=ln>4</span>$ git push -u origin master
</code></pre></div><p><strong>下面要要体现一个git bash的骚操作了</strong>！</p>
<p>由于，我的云服务器上的git用户是新创建的，因此其ssh公钥也是新添加的，首次登陆git用户也是通过root用户<code>su</code>过去的，之后就没有尝试登陆。我通过<code>git push -u origin master</code>推送的时候，git bash跳出了让我输密码的框框，如下图：</p>
<p><img src=../../images/git_bash%E5%9D%91%E4%BA%BA%E8%AE%BE%E8%AE%A1.png alt=git_bash坑人设计></p>
<p>我觉得有些不对劲，因为我已经添加了公钥，理论上不应该再需要密码。我还是尝试输入了云服务器git用户的密码，显示不对，我有输入本地电脑的密码也不对，我就很奇怪。查了查资料，也没有我这个情况。</p>
<p>接下来，我尝试直接用VS code的git插件push，居然等了10多分钟还push不上去。最后，我使用windows自带的cmd执行<code>git push -u origin master</code>，跳出来一行通知：</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-cmd data-lang=cmd><span class=ln>1</span>Microsoft Windows [版本 10.0.18363.1916]
<span class=ln>2</span><span class=p>(</span>c<span class=p>)</span> 2019 Microsoft Corporation。保留所有权利。
<span class=ln>3</span><span class=p>&gt;</span> git push -u origin master
<span class=ln>4</span>The authenticity of host &#39;[xxx.xxx.xxx.xxx]:xxxx ([xxx.xxx.xxx.xxx]:xxxx)&#39; can&#39;t be established.
<span class=ln>5</span>ECDSA key fingerprint is SHA256:8KEtnlH6cLQlFGYgDZgK12qDiiElEgX3PDV+X9xaiYY.
<span class=ln>6</span>Are you sure you want to continue connecting (yes/no)?
</code></pre></div><p>额，发现了没有？首次登陆ssh服务端首要确认key fingerprint的！也就是说，我们在git bash跳出的密码框里输入的不是什么密码，而是“yes”!!!</p>
<p>我重置了环境，在git bash跳出的密码框输了“yes”，不出所料，通过了…………🤣🤣🤣所以，git bash为什么要跳出密码框啊！误导人啊！之后，VS Code的git插件也能自动push上去了，这里也算发现VS Code git插件的一个小小问题，希望以后能改正吧。</p>
<h3 id=远程仓库的工作区更新方法>远程仓库的工作区更新方法</h3>
<p>无论是使用裸仓库还是使用普通仓库，我们都要读取最新更新的内容，裸仓库可以被正常clone和push更新，但是裸仓库不包含工作区，所以并不会存在在裸仓库上直接出现可用文件，需要建立一个普通中转仓库读取最新内容；而普通仓库存在工作区不自动更新问题，也需要用户自己更新。</p>
<h4 id=推送给裸仓库的情形>推送给裸仓库的情形</h4>
<p>如果之前建立的是裸仓库，里面是不会显示出任何用户内容的，需要建立一个中转普通仓库。这个中转普通仓库从裸仓库中pull最新的内容，提供给hugo blog。</p>
<p>我们在云端裸仓库同一文件夹中，新建一个中转仓库：</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span>$ <span class=nb>cd</span> /srv <span class=o>&amp;&amp;</span> sudo mkdir blogtransfer.git <span class=c1># /srv/blogtransfer.git作为中转仓库，一般git库都以.git作为结尾</span>
<span class=ln>2</span>$ sudo chown -R git:git blogtransfer.git <span class=c1># 把所属用户从root改成git</span>
<span class=ln>3</span>$ su - git <span class=c1># 带 - 符号表示环境变量也跟着切换</span>
<span class=ln>4</span><span class=c1># 将裸仓库内容clone到中转仓库，使用git的本地协议</span>
<span class=ln>5</span>$ git clone /srv/gitblogs.git/ /srv/blogtransfer.git
<span class=ln>6</span>Cloning into <span class=s1>&#39;/srv/blogtransfer.git&#39;</span>...
<span class=ln>7</span><span class=k>done</span>.
<span class=ln>8</span>$ ls /srv/blogtransfer.git
<span class=ln>9</span>images  学习笔记  工程笔记  网页资料
</code></pre></div><p>初次<code>git clone</code>后，每当我们从本地提交新的内容，可以在<code>/srv/blogtransfer.git</code>文件夹中，使用<code>git pull</code>更新。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln> 1</span>$ <span class=nb>cd</span> /srv/blogtransfer.git/
<span class=ln> 2</span>$ git pull <span class=c1># 我做了一个修改，来进行测试</span>
<span class=ln> 3</span>remote: Counting objects: 7, <span class=k>done</span>.
<span class=ln> 4</span>remote: Compressing objects: 100% <span class=o>(</span>4/4<span class=o>)</span>, <span class=k>done</span>.
<span class=ln> 5</span>remote: Total <span class=m>4</span> <span class=o>(</span>delta 3<span class=o>)</span>, reused <span class=m>0</span> <span class=o>(</span>delta 0<span class=o>)</span>
<span class=ln> 6</span>Unpacking objects: 100% <span class=o>(</span>4/4<span class=o>)</span>, <span class=k>done</span>.
<span class=ln> 7</span>From /srv/gitblogs
<span class=ln> 8</span>   f9e0b20..a33731d  master     -&gt; origin/master
<span class=ln> 9</span>Updating f9e0b20..a33731d
<span class=ln>10</span>Fast-forward
<span class=ln>11</span> ...s-<span class=se>\3</span>50<span class=se>\2</span>07<span class=se>\2</span>52<span class=se>\3</span>45<span class=se>\2</span>12<span class=se>\2</span>50<span class=se>\3</span>45<span class=se>\2</span>14<span class=se>\2</span>26<span class=se>\3</span>51<span class=se>\2</span>03<span class=se>\2</span>50<span class=se>\3</span>47<span class=se>\2</span>75<span class=se>\2</span>62<span class=se>\3</span>50<span class=se>\2</span>07<span class=se>\2</span>52<span class=se>\3</span>45<span class=se>\2</span>67<span class=se>\2</span>61<span class=se>\3</span>47<span class=se>\2</span>32<span class=se>\2</span>04<span class=se>\3</span>45<span class=se>\2</span>15<span class=se>\2</span>32<span class=se>\3</span>45<span class=se>\2</span>56<span class=se>\2</span>42.md<span class=s2>&#34; | 105 ++++++++++++++++++++++++++++++++++++++++++++++----------------------
</span><span class=ln>12</span><span class=s2> 1 file changed, 71 insertions(+), 34 deletions(-)
</span></code></pre></div><p>这样，我们就可以从中转仓库读取内容。</p>
<h4 id=推送给普通远程仓库的情形>推送给普通远程仓库的情形</h4>
<p>如果之前建立的是普通库，当我们在本地完成第一次远程仓库推送后，登录到服务器的<code>/srv/gitblogs.git</code>目录会发现，该目录里还是什么都没有啊，那和裸库有什么区别？！我们之前说了:</p>
<blockquote>
<p><code>git push</code>命令仅更新远程存储库上的分支和HEAD信息。<strong>它不会更新非裸机中的工作区副本、暂存区和版本指针</strong>。</p>
</blockquote>
<p>如果我们用<code>git status</code>查看，会发现多了大量的修改记录，因此我们需要手动把版本库的“指针”指向最新的地方。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span><span class=c1># 把工作区回退到git库的版本（此情况下等同于更新）</span>
<span class=ln>2</span>$ git reset --hard
</code></pre></div><p>这样再查看<code>/srv/gitblogs.git</code>目录就有最新的内容了。需要注意的是，每一次push推送后，普通仓库都要用<code>git reset --hard</code>手动更新工作区。</p>
<h2 id=设置post-receive-hook完成内容自动更新>设置post-receive hook完成内容自动更新</h2>
<p>上面一章就已经提到过push裸仓库需要中转仓库来更新内容和push到非裸库，工作区不更新的这两方面问题，大多数人都是用post-receive hook来处理的。</p>
<p>Hook就是钩子，本质是一种触发器，代表在某种情况触发某种操作。Git的钩子脚本位于<code>版本库.git/hooks</code>目录下，当Git执行特定操作时会调用特定的钩子脚本。当版本库通过<code>git init</code>或者<code>git clone</code>创建时，会在<code>hooks</code>目录下创建示例脚本，用户可以参照示例脚本的写法开发适合的钩子脚本。</p>
<p>钩子脚本要设置为可运行，并使用特定的名称。Git提供的示例脚本都带有<code>.sample</code>扩展名，是为了防止被意外运行。如果需要启用相应的钩子脚本，需要对其重命名（去掉<code>.sample</code>扩展名）。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span>$ ls
<span class=ln>2</span>applypatch-msg.sample  fsmonitor-watchman.sample  pre-applypatch.sample  prepare-commit-msg.sample  pre-rebase.sample   update.sample
<span class=ln>3</span>commit-msg.sample      post-update.sample         pre-commit.sample      pre-push.sample            pre-receive.sample
</code></pre></div><p>其中，pre-commit、post-update、pre-receive、update等等代表着钩子被触发的情况。我们要的post-receive这里恰好没有，没关系，自己创建一个就行。</p>
<p>需要指出：裸仓库内直接可以看到<code>hooks</code>目录，而非裸仓库需要在隐藏目录<code>.git/hooks</code>下查看。</p>
<ul>
<li>裸仓库</li>
</ul>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span><span class=c1># 新建post-receive构造，这是一个shell文件</span>
<span class=ln>2</span>$ touch /srv/gitblogs.git/hooks/post-receive 
<span class=ln>3</span><span class=c1># 增加可执行权限</span>
<span class=ln>4</span>$ chmod +x /srv/gitblogs.git/hooks/post-receive
</code></pre></div><ul>
<li>普通仓库</li>
</ul>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span><span class=c1># 新建post-receive构造，这是一个shell文件</span>
<span class=ln>2</span>$ touch /srv/gitblogs.git/.git/hooks/post-receive
<span class=ln>3</span><span class=c1># 增加可执行权限</span>
<span class=ln>4</span>$ chmod +x /srv/gitblogs.git/.git/hooks/post-receive
</code></pre></div><h3 id=裸仓库的更新>裸仓库的更新</h3>
<p>复制以下脚本到<code>post-receive</code>文件来实现中转仓库的更新。</p>
<p>注意：这个脚本要复制到<code>gitblogs.git</code>这个裸库的<code>hooks/post-receive</code>文件中，而不是中转库的！</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span><span class=cp>#!/bin/bash
</span><span class=ln>2</span><span class=cp></span>git --work-tree<span class=o>=</span>/srv/blogtransfer.git/ --git-dir<span class=o>=</span>/srv/blogtransfer.git/.git pull
</code></pre></div><h3 id=普通远程仓库的更新脚本>普通远程仓库的更新脚本</h3>
<p>我们将下面这个脚本复制到<code>post-receive</code>文件来完成普通远程仓库的更新工作区。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln> 1</span><span class=cp>#!/bin/bash
</span><span class=ln> 2</span><span class=cp></span><span class=c1># 几个地址变量</span>
<span class=ln> 3</span><span class=nv>GITBLOGS_PATH</span><span class=o>=</span>/srv/gitblogs.git/
<span class=ln> 4</span><span class=c1># 下面是自己记录的日志，方便查询记录用</span>
<span class=ln> 5</span><span class=nv>LOG_PATH</span><span class=o>=</span>/tmp/gitblogs-post-receive-log
<span class=ln> 6</span>
<span class=ln> 7</span><span class=nb>echo</span> <span class=s2>&#34;Here is the post-receive hook to update work tree by &#39;git reset --hard&#39;&#34;</span> &gt;&gt; <span class=nv>$LOG_PATH</span>
<span class=ln> 8</span>
<span class=ln> 9</span><span class=c1># 输入时间等信息用于方便记录</span>
<span class=ln>10</span>date &gt;&gt; <span class=nv>$LOG_PATH</span>
<span class=ln>11</span><span class=nb>echo</span> <span class=s2>&#34;git reset --hard&#34;</span> &gt;&gt; <span class=nv>$LOG_PATH</span>
<span class=ln>12</span><span class=c1># 回复工作区到最新版本库</span>
<span class=ln>13</span>git --work-tree<span class=o>=</span><span class=nv>$GITBLOGS_PATH</span> --git-dir<span class=o>=</span><span class=nv>$GITBLOGS_PATH</span>/.git reset --hard &gt;&gt; <span class=nv>$LOG_PATH</span>
</code></pre></div><h2 id=使用hugo作为博客生成工具>使用HUGO作为博客生成工具</h2>
<p>我们这里这里使用Hugo作为生成博客的工具。我们根据自身需求，要做以下修改：</p>
<ol>
<li>我的笔记是分类放在多个文件夹中，希望Hugo能够从多个目录中读取markdown 博客文章，这样我就不需要对本地文件结构做调整。</li>
<li>我有一个网页资料的文件夹，希望把它单独设置一个目录页面，而不出把它算成博客文章。我需要一个能生成文件夹目录txt文章的工具，然后此目录页面通过js读取并生成链接。</li>
<li>我的在本地写markdown的时候，使用图片的相对路径，且所有图片相对于博客文章的路径都是<code>../images/</code>，而Hugo默认的图片路径都是根目录的绝对路径。</li>
<li>希望能把内容条件给百度等搜索引擎，github page其实不需要这个功能。</li>
<li>增加安全的评论功能，应该需要生成永久链接。</li>
<li>处理yaml front matter与一级目录重复的问题。</li>
<li>文章中遇到太多公式的时候。hugo自带的编译器渲染出来的公式效果很差，有大量无法编译的公式。</li>
</ol>
<p>问题1解决：我将文章目录都放到了hugo的content目录，hugo会自动读取content下所有的目录和文件，并根据目录结构生成这也是选择hugo框架的一个优势。</p>
<p>问题2解决：由于hugo在content文件中不支持编译纯html文件，我将网页资料的文件夹放在<code>/static/</code>目录下，然后在主题的<code>lib_webpages</code>模板中用<code>hugo</code>的<code>readDir</code>函数读取文件夹中的内容，然后拼接成链接，不需要能生成文件夹目录txt文章的工具等步骤。目录则使用<code>/content/library/webpages.html</code>生成，其调用了主题中的<code>lib_webpages</code>模板。有个小缺点，即URL的层级关系被破坏。</p>
<p>问题3解决：在本地我用的是VS Code写markdown，我发现它是支持打开的文件作为根目录来索引文件的，即支持以打开的目录为"/"索引。因此，我把我所有本地的markdown文件中的<code>../images/</code>改成了<code>/images/</code>。其实用绝对路径对本地写markdown也是有好处的，就是主要打开的文件夹不变，就可以用多层文件结构编写文档，而不用总记相对路径；对网站的SEO也有利。此外，hugo对相对路径的支持也是有很多问题的，不值得花太多精力处理。</p>
<p>问题4TODO：参考<a href=https://www.kyfws.com/post/kyfws-hugo-baidu-seo/>https://www.kyfws.com/post/kyfws-hugo-baidu-seo/</a></p>
<p>问题5解决：可以通过hugo内置的<code>_internal/disqus.html</code>完成评论功能，但是感觉我目前不太需要。</p>
<p>问题6解决：为了不让vscode 的markdownlint报错，我们首先将其多个一级标题警告“MD025/single-title/single-h1: Multiple top-level headings in the same document”取消。因为，VS Code的markdownlint插件会把yaml元标题当成是一级标题，因此需要在本地编辑环境目录中设置<code>.markdownlint.json</code>文件</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=ln>1</span><span class=p>{</span>
<span class=ln>2</span>  <span class=nt>&#34;MD025&#34;</span><span class=p>:</span><span class=kc>false</span>
<span class=ln>3</span><span class=p>}</span>
<span class=ln>4</span>
</code></pre></div><p>然后，我们为了让文章看起来更美观，采用以下形式：</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=ln>1</span>---
<span class=ln>2</span>yaml meta info
<span class=ln>3</span>title : &#34;TITLE&#34;
<span class=ln>4</span>date : &#34;2020-02-02&#34;
<span class=ln>5</span>---
<span class=ln>6</span>
<span class=ln>7</span>目录/table of contents
<span class=ln>8</span>
<span class=ln>9</span><span class=gu>## H1 title&lt;!-- omit in toc --&gt;
</span></code></pre></div><p>这样在渲染成网页的时候，两个大标题会夹着目录，因此会美观一些。如果hugo能提供自动把一级标题当元信息，或者VS Code能够markdown能够渲染yaml头信息就不同这么麻烦。此外，我将H1 title前面变成二级标题，可以在不改变<code>.markdownlint.json</code>文件的情况下在VS Code中不报错。</p>
<p>问题7解决：在有大量公式的文章中，不要使用hugo自带的golden编译器，替换成pandoc。pandoc的安装方法可在网上查到。我们还需要在该文章的头部信息中加入<code>markup: pandoc</code>这一条。</p>
<h3 id=修改hugo博客的clarity主题>修改Hugo博客的clarity主题</h3>
<p>我的博客是基于<a href=https://github.com/chipzoller/hugo-clarity>clarity</a>主题修改而来，基本改动有</p>
<ul>
<li>在头部导航添加了归档和分类两项，添加了二者的模板、功能和archive type;</li>
<li>在头部导航添加了资料库->资料web版，基于readDir实现了网页信息遍历的post，网页资料存放在<code>/static/网页资料</code></li>
<li>在头部导航添加了资料库->书签地址，书签位置<code>/content/library</code>；</li>
<li>在头部导航添加了专栏项，基于原来的series修改而来；</li>
<li>删除了多语言支持，因为总是出bug；</li>
<li>修改了侧边栏的内容显示顺序，取消了个人信息阅读更多按钮，将链接移植到了名字上；</li>
<li>精简了分享链接，由于外国大多社交网站不可访问和国内社交网站的封闭性，只保留了复制网页链接的功能，删除了多余的社交网站链接；</li>
<li>简化了默认的archetypes；</li>
<li>修改了主题配色、链接、404页面等样式</li>
</ul>
<p>现在只要将我的markdown文章的文件夹放入<code>content</code>目录，网页资料的内容放到<code>/static/网页资料</code>，images中的图片文件夹放到<code>/static/images</code>中，即可自动生成静态网站。</p>
<h3 id=上传修改好的hugo博客>上传修改好的Hugo博客</h3>
<p>首先，我们把改好的网站主题上传到云主机，路径为<code>/opt/blogtheme</code>，并把<code>/opt/blogtheme</code>的拥有者改为git。然后将其中content的内容建立软链接，连接到git工作区的相应目录。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span><span class=c1># 将/opt/blogtheme的拥有者改为git</span>
<span class=ln>2</span>$ sudo chown git:git -R /opt/blogtheme
</code></pre></div><ul>
<li>如果使用<strong>裸仓库</strong>，需要从中转仓库提取需要的文件，路径为<code>/srv/blogtransfer.git</code>。我们建立目录的软链接：</li>
</ul>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span><span class=c1># 如果主题中已经有了/opt/blogtheme/static/projectnotes，则删除</span>
<span class=ln>2</span>$ ln -s /srv/blogtransfer.git/工程笔记 /opt/blogtheme/content/projectnotes
<span class=ln>3</span><span class=c1># 如果主题中已经有了/opt/blogtheme/static/studynotes，则删除</span>
<span class=ln>4</span>$ ln -s /srv/blogtransfer.git/学习笔记 /opt/blogtheme/content/studynotes
</code></pre></div><p>在hugo 0.62以后，不在支持static的软链接复制（说是因为存在可能导致循环链接），因此hugo主题的static文件夹中无法直接使用ln，退一步，我使用rsync同步文件夹。我们把下面两命令加到之前的post-receive脚本中。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span><span class=c1># rsync -a source destination</span>
<span class=ln>2</span><span class=c1># 图片同步</span>
<span class=ln>3</span>rsync -a /srv/blogtransfer.git/images/ /opt/blogtheme/static/images
<span class=ln>4</span><span class=c1># 网页同步</span>
<span class=ln>5</span>rsync -a /srv/blogtransfer.git/网页资料/ /opt/blogtheme/static/网页资料
</code></pre></div><ul>
<li>如果使用<strong>普通仓库</strong>，路径为<code>/srv/gitblogs.git/</code>。我们建立目录的软链接：</li>
</ul>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span><span class=c1># 如果主题中已经有了/opt/blogtheme/static/projectnotes，则删除</span>
<span class=ln>2</span>$ ln -s /srv/gitblogs.git/工程笔记 /opt/blogtheme/content/projectnotes
<span class=ln>3</span><span class=c1># 如果主题中已经有了/opt/blogtheme/static/studynotes，则删除</span>
<span class=ln>4</span>$ ln -s /srv/gitblogs.git/学习笔记 /opt/blogtheme/content/studynotes
</code></pre></div><p>在hugo 0.62以后，不在支持static的软链接复制（说是因为存在可能导致循环链接），因此hugo主题的static文件夹中无法直接使用ln，退一步，我使用rsync同步文件夹。我们把下面两命令加到之前的post-receive脚本中。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span><span class=c1># 在hugo0.62以后，不在支持static的软链接复制（说是因为存在可能导致循环链接），因此static文件中</span>
<span class=ln>2</span><span class=c1># 无法直接使用ln，退一步，我用rsync同步。</span>
<span class=ln>3</span><span class=c1># rsync -a source destination</span>
<span class=ln>4</span><span class=c1># 图片同步</span>
<span class=ln>5</span>$ rsync -a /srv/gitblogs.git/images/ /opt/blogtheme/static/images
<span class=ln>6</span><span class=c1># 网页同步</span>
<span class=ln>7</span>$ rsync -a /srv/gitblogs.git/网页资料/ /opt/blogtheme/static/网页资料
</code></pre></div><p>这样，我们也实现了内容和格式的分离，<code>/opt/blogtheme</code>做为存放格式的位置，基本不用动，每次只要git更新内容即可。</p>
<h2 id=使用jenkins自动化部署网站>使用Jenkins自动化部署网站</h2>
<p>经过上述准备，我们已经准备好了所需的内容，下面就是使用jenkins将它们构建成网站。我们首先新建网站的目录文件夹<code>/opt/public/</code>：</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span>$ sudo mkdir /opt/public
<span class=ln>2</span><span class=c1># 将/opt/public的拥有者改为git</span>
<span class=ln>3</span>$ sudo chown git:git /opt/public
</code></pre></div><p>如果直接从shell手动输入构建命令，就一句指令很简单。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln> 1</span>$ hugo --minify -s /opt/blogtheme -d /opt/public/
<span class=ln> 2</span>Start building sites …
<span class=ln> 3</span>hugo v0.89.4-AB01BA6E+extended linux/amd64 <span class=nv>BuildDate</span><span class=o>=</span>2021-11-17T08:24:09Z <span class=nv>VendorInfo</span><span class=o>=</span>gohugoio
<span class=ln> 4</span>
<span class=ln> 5</span>                   <span class=p>|</span> ZH-CN
<span class=ln> 6</span>-------------------+--------
<span class=ln> 7</span>  Pages            <span class=p>|</span>   <span class=m>335</span>
<span class=ln> 8</span>  Paginator pages  <span class=p>|</span>    <span class=m>54</span>
<span class=ln> 9</span>  Non-page files   <span class=p>|</span>     <span class=m>0</span>
<span class=ln>10</span>  Static files     <span class=p>|</span>   <span class=m>361</span>
<span class=ln>11</span>  Processed images <span class=p>|</span>     <span class=m>0</span>
<span class=ln>12</span>  Aliases          <span class=p>|</span>    <span class=m>80</span>
<span class=ln>13</span>  Sitemaps         <span class=p>|</span>     <span class=m>1</span>
<span class=ln>14</span>  Cleaned          <span class=p>|</span>     <span class=m>0</span>
<span class=ln>15</span>
<span class=ln>16</span>Total in <span class=m>18050</span> ms
</code></pre></div><p>不过，我们希望在git完成push后自动执行。这里我们使用jenkins来完成自动构建命令。</p>
<p>首先，为了解决jenkins的权限和环境变量问题，安装好jenkins后，我们需要先进行以下配置：</p>
<ol>
<li>防止jenkins出现command not found的错误，我们要为jenkins添加<code>PATH</code>环境变量。在系统管理->系统配置->全局属性对话框中选中“环境变量”，添加键值对“PATH”和PATH对应值。PATH对应值在系统中使用<code>echo $PATH</code>获取，复制粘贴到这里即可。</li>
<li>防止jenkins出现Permission denied权限不够的问题，我们要重新以git用户启动jenkins，以git用户启动是因为我们之前文件拥有者都是git。</li>
</ol>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln> 1</span>$ sudo vim /etc/sysconfig/jenkins
<span class=ln> 2</span>......
<span class=ln> 3</span> <span class=c1>## Type:        string</span>
<span class=ln> 4</span> <span class=m>22</span> <span class=c1>## Default:     &#34;jenkins&#34;</span>
<span class=ln> 5</span> <span class=m>23</span> <span class=c1>## ServiceRestart: jenkins</span>
<span class=ln> 6</span> <span class=m>24</span> <span class=c1>#</span>
<span class=ln> 7</span> <span class=m>25</span> <span class=c1># Unix user account that runs the Jenkins daemon</span>
<span class=ln> 8</span> <span class=m>26</span> <span class=c1># Be careful when you change this, as you need to update</span>
<span class=ln> 9</span> <span class=m>27</span> <span class=c1># permissions of $JENKINS_HOME and /var/log/jenkins.</span>
<span class=ln>10</span> <span class=m>28</span> <span class=c1>#</span>
<span class=ln>11</span> <span class=m>29</span> <span class=nv>JENKINS_USER</span><span class=o>=</span><span class=s2>&#34;git&#34;</span> <span class=c1># 由默认值jenkins改为git</span>
<span class=ln>12</span>......
<span class=ln>13</span><span class=c1># 修改jenkins对应文件拥有者</span>
<span class=ln>14</span>$ sudo chown -R git:git /var/lib/jenkins
<span class=ln>15</span>$ sudo chown -R git:git /var/cache/jenkins
<span class=ln>16</span>$ sudo chown -R git:git /var/log/jenkins
<span class=ln>17</span><span class=c1># 重启jenkins</span>
<span class=ln>18</span>$ sudo systemctl restart jenkins
</code></pre></div><p>接下来，我们打开jenkins网站界面，默认是8080端口。首先按照页面提示进行初始化（因为我的jenkins早就安装了，这里就不介绍初始化流程了），然后点击左边菜单栏的“新建任务”，输入任务名称，选择构建一个自由风格的软件项目。</p>
<p><img src=../../images/devops-jenkins1.png alt=jenkins1></p>
<p>按照如下配置，设置构建流程。我们不需要源码，因此也没有工作区，在构建一栏中加上需要执行的命令。构建触发器接下来再设置。</p>
<p><img src=../../images/devops-jenkins2.png alt=jenkins2></p>
<p>设置好后，我们点击保存，然后点击左侧菜单栏的“立即构建”，就可通过jenkins执行构建命令。目前为止，我们做的以上的工作，只不过是把在命令行做的工作放到jenkins里完成而已，若需要自动触发构建，还需要构建触发器，如下图所示：</p>
<p><img src=../../images/devops-jenkins3.png alt=jenkins3></p>
<p>构建的触发器种类选择“触发远程构建”，然后在身份验证令牌中输入一串随机数作为验证码，接下面，我们只需要访问一个网址<a href="http://127.0.0.1:8080/job/hugoblog/build?token=TOKEN_NAME">http://127.0.0.1:8080/job/hugoblog/build?token=TOKEN_NAME</a>，就能触发这个构建。由于我们的git库和jenkins在同一台主机上，所以IP写127.0.0.1就行，端口8080是jenkins的默认端口，后面的url是固定的，最后在“TOKEN_NAME”处用我们刚在身份验证令牌中输入的随机替代。我们在浏览器中输入这个URL，就可以发现jenkins启动了一个新的构建。</p>
<p>一般这样就没什么问若发生403错误：Error 403 No valid crumb was included in the request，则考虑jenkins关闭全局安全设置中的“跨站请求伪造保护”；若真心为了安全考虑，则增加获取crumb值，具体步骤自行搜索。</p>
<p>接下来我们要把触发网址的工作交给git的hook脚本，我们在post-receive脚本的最后添加如下命令：</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span><span class=c1># 触发jenkins编译新网站</span>
<span class=ln>2</span><span class=c1># -X 表示请求类型，用post；-u 表示认证信息，填写登录jenkins的用户名密码；-v表示显示详细过程</span>
<span class=ln>3</span><span class=c1># URL触发远程构建所用的URL</span>
<span class=ln>4</span>curl -X post -u <span class=s1>&#39;username:password&#39;</span> -v http://127.0.0.1:8080/job/hugoblog/build?token<span class=o>=</span>TOKEN_NAME
</code></pre></div><p>到此，我们已经完成了本地<code>git push</code>后，自动完成内容更新、网站构建的工作。</p>
<h2 id=推送到github并生成gitpages>推送到Github并生成Gitpages</h2>
<p>如果要使用GitPages，我们需要<strong>将hugo编译好的网站，而非原始数据推送到GitHub</strong>。</p>
<p>首先，我们要在GitHub新建一个库，库名比较特殊，必须是：<strong>用户名.github.io</strong>，且<strong>所有字母必须小写</strong>。选择public类型，然后下面的README、证书、.gitignore都不用添加。如下图所示：</p>
<p><img src=../../images/devops-gitpages.png alt=创建gitpages></p>
<p>由于我们自己云服务和GitHub的域名不一样，所以不能直接把云上编译好的网站直接push到GitHub。我们需要<strong>改变baseUrl参数</strong>，重新编译。为了公式完整，我们之前在markdown编译时用了pandoc编译速度慢，同时国内连接github网络不稳定，所以我在jenkins中单独为Github的推送流程新建了一个任务，以免拖累本地编译过程。</p>
<p>我们先做一些准备工作。</p>
<p>第一步，我们为了能让云服务器有权限把内容推送给GitHub的库，因此要将自己的公钥存放到GitHub上。我们存放的是云服务器上git用户的公钥，查看git用户的公钥<code>cat /home/git/.ssh/id_rsa.pub</code>，若没有此文件则使用git用户的<code>ssh-keygen -t rsa</code>创建。将公钥放到GitHub右上角图像->settings->SSH and GPG keys->New SSH key，然后把公钥复制粘贴过来。</p>
<p>第二步，我们为推送到github的库做一些初始化工作。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln> 1</span><span class=c1># 为GitHub新建库文件夹，并将所有者改为git</span>
<span class=ln> 2</span>$ sudo mkdir <span class=nb>cd</span> /opt/surprisedcat.github.io
<span class=ln> 3</span>$ sudo chown git:git /opt/surprisedcat.github.io
<span class=ln> 4</span><span class=c1># 切换到git用户执行以下操作</span>
<span class=ln> 5</span>$ su - git
<span class=ln> 6</span><span class=c1># 重新编译网站，注意baseUrl是不同的</span>
<span class=ln> 7</span>$ hugo --minify --baseUrl<span class=o>=</span>https://surprisedcat.github.io -s /opt/blogtheme  -d /opt/surprisedcat.github.io/
<span class=ln> 8</span>Start building sites …
<span class=ln> 9</span>hugo v0.89.4-AB01BA6E+extended linux/amd64 <span class=nv>BuildDate</span><span class=o>=</span>2021-11-17T08:24:09Z <span class=nv>VendorInfo</span><span class=o>=</span>gohugoio
<span class=ln>10</span>
<span class=ln>11</span>                   <span class=p>|</span> ZH-CN
<span class=ln>12</span>-------------------+--------
<span class=ln>13</span>  Pages            <span class=p>|</span>   <span class=m>335</span>
<span class=ln>14</span>  Paginator pages  <span class=p>|</span>    <span class=m>54</span>
<span class=ln>15</span>  Non-page files   <span class=p>|</span>     <span class=m>0</span>
<span class=ln>16</span>  Static files     <span class=p>|</span>   <span class=m>364</span>
<span class=ln>17</span>  Processed images <span class=p>|</span>     <span class=m>0</span>
<span class=ln>18</span>  Aliases          <span class=p>|</span>    <span class=m>80</span>
<span class=ln>19</span>  Sitemaps         <span class=p>|</span>     <span class=m>1</span>
<span class=ln>20</span>  Cleaned          <span class=p>|</span>     <span class=m>0</span>
<span class=ln>21</span>
<span class=ln>22</span>Total in <span class=m>18596</span> ms
<span class=ln>23</span><span class=c1># 初始化git库</span>
<span class=ln>24</span>$ <span class=nb>cd</span> /opt/surprisedcat.github.io
<span class=ln>25</span>$ git init .
<span class=ln>26</span><span class=c1># 第一次commit和添加远程库，commit带上日期</span>
<span class=ln>27</span>$ git add .
<span class=ln>28</span>$ git commit -m <span class=s2>&#34;`date` commit&#34;</span>
<span class=ln>29</span><span class=c1># 将主分支重命名为main</span>
<span class=ln>30</span>$ git branch -M main
<span class=ln>31</span>$ git remote add origin git@github.com:SurprisedCat/surprisedcat.github.io.git
<span class=ln>32</span>$ git push -u origin main
</code></pre></div><p>第三步，在jenkins中新建构建任务。源码管理选择“无”，构建触发器选择如下图：</p>
<p><img src=../../images/devops-jenkins-gitpages.png alt=jenkins-github></p>
<p>我们建立两个触发器，一是传统远程触发器，二是在云构建完成后，自动构建推送到github的流程。</p>
<p>在构建栏目下，选择“执行shell”，并填入以下命令：</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span>hugo --minify --baseUrl<span class=o>=</span>https://surprisedcat.github.io -s /opt/blogtheme  -d /opt/surprisedcat.github.io/
<span class=ln>2</span><span class=nb>cd</span> /opt/surprisedcat.github.io
<span class=ln>3</span>git add .
<span class=ln>4</span>git commit -m <span class=s2>&#34;`date` commit&#34;</span>
<span class=ln>5</span>git push -u origin main
</code></pre></div><p>点击保存。</p>
<p>一整套配置完成。</p>
<p>接下来，为了安全起见，我们不再允许git使用shell登录（过河拆桥啦），我们修改<code>/etc/passwd</code>下git用户的最后一项，将<code>/bin/bash</code>改为<code>/usr/bin/git-shell</code>，这样，git用户可以正常通过ssh使用git，但无法登录shell，因为我们为git用户指定的git-shell每次一登录就自动退出。</p>
</article>
<aside class=sidebar>
<section class=sidebar_inner>
<div class=author_header>
<img src=https://surprisedcat.github.io/images/cat-avatar.png alt="SurprisedCat photo">
<a href=https://surprisedcat.github.io/about/><h2>SurprisedCat</h2></a>
</div>
<div class=author_bio>
朝花夕拾，人类从历史中学到的唯一教训，就是人类无法从历史中学到任何教训。
</div>
<div>
<h4 class="mt-4 taxonomy" id=categories-section>分类</h4>
<nav class=tags_nav>
<a href=https://surprisedcat.github.io/categories/%E6%A6%82%E7%8E%87%E7%BB%9F%E8%AE%A1%E9%9A%8F%E6%9C%BA%E8%BF%87%E7%A8%8B/ class="post_tag button button_translucent" title=概率统计随机过程>
概率统计随机过程
<span class=button_tally>27</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E4%BC%98%E5%8C%96%E7%90%86%E8%AE%BA/ class="post_tag button button_translucent" title=优化理论>
优化理论
<span class=button_tally>21</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E4%B8%8E%E7%9F%A9%E9%98%B5/ class="post_tag button button_translucent" title=线性代数与矩阵>
线性代数与矩阵
<span class=button_tally>18</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90/ class="post_tag button button_translucent" title=数学分析>
数学分析
<span class=button_tally>14</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/ class="post_tag button button_translucent" title=机器学习>
机器学习
<span class=button_tally>13</span>
</a>
<a href=https://surprisedcat.github.io/categories/python/ class="post_tag button button_translucent" title=python>
PYTHON
<span class=button_tally>12</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E6%B5%8B%E5%BA%A6%E8%AE%BA/ class="post_tag button button_translucent" title=测度论>
测度论
<span class=button_tally>12</span>
</a>
<a href=https://surprisedcat.github.io/categories/linux/ class="post_tag button button_translucent" title=linux>
LINUX
<span class=button_tally>11</span>
</a>
<a href=https://surprisedcat.github.io/categories/shell/ class="post_tag button button_translucent" title=shell>
SHELL
<span class=button_tally>9</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E5%AE%9E%E5%8F%98%E5%87%BD%E6%95%B0/ class="post_tag button button_translucent" title=实变函数>
实变函数
<span class=button_tally>8</span>
</a>
<br>
<div class="post_tags_toggle button">所有分类</div>
<div class=post_tags>
<div class=tags_list>
<a href=https://surprisedcat.github.io/categories/a/ class="post_tag button button_translucent" data-position=1 title=a>A<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/categories/ai/ class="post_tag button button_translucent" data-position=1 title=ai>AI<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/categories/bugs/ class="post_tag button button_translucent" data-position=1 title=bugs>BUGS<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/categories/cplus/ class="post_tag button button_translucent" data-position=3 title=cplus>CPLUS<span class=button_tally>3</span>
</a>
<a href=https://surprisedcat.github.io/categories/devops/ class="post_tag button button_translucent" data-position=1 title=devops>DEVOPS<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/categories/ecmascript/ class="post_tag button button_translucent" data-position=5 title=ecmascript>ECMASCRIPT<span class=button_tally>5</span>
</a>
<a href=https://surprisedcat.github.io/categories/jekyll/ class="post_tag button button_translucent" data-position=2 title=jekyll>JEKYLL<span class=button_tally>2</span>
</a>
<a href=https://surprisedcat.github.io/categories/linux/ class="post_tag button button_translucent" data-position=11 title=linux>LINUX<span class=button_tally>11</span>
</a>
<a href=https://surprisedcat.github.io/categories/matlab/ class="post_tag button button_translucent" data-position=4 title=matlab>MATLAB<span class=button_tally>4</span>
</a>
<a href=https://surprisedcat.github.io/categories/python/ class="post_tag button button_translucent" data-position=12 title=python>PYTHON<span class=button_tally>12</span>
</a>
<a href=https://surprisedcat.github.io/categories/raspberry/ class="post_tag button button_translucent" data-position=7 title=raspberry>RASPBERRY<span class=button_tally>7</span>
</a>
<a href=https://surprisedcat.github.io/categories/shell/ class="post_tag button button_translucent" data-position=9 title=shell>SHELL<span class=button_tally>9</span>
</a>
<a href=https://surprisedcat.github.io/categories/windows/ class="post_tag button button_translucent" data-position=1 title=windows>WINDOWS<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E4%BC%98%E5%8C%96%E7%90%86%E8%AE%BA/ class="post_tag button button_translucent" data-position=21 title=优化理论>优化理论<span class=button_tally>21</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E5%8D%9A%E5%BC%88%E8%AE%BA/ class="post_tag button button_translucent" data-position=3 title=博弈论>博弈论<span class=button_tally>3</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E5%8F%98%E5%88%86%E6%B3%95/ class="post_tag button button_translucent" data-position=4 title=变分法>变分法<span class=button_tally>4</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/ class="post_tag button button_translucent" data-position=1 title=图像处理>图像处理<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/ class="post_tag button button_translucent" data-position=2 title=大数据>大数据<span class=button_tally>2</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E5%AE%9E%E5%8F%98%E5%87%BD%E6%95%B0/ class="post_tag button button_translucent" data-position=8 title=实变函数>实变函数<span class=button_tally>8</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/ class="post_tag button button_translucent" data-position=5 title=强化学习>强化学习<span class=button_tally>5</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E6%8B%93%E6%89%91%E5%AD%A6/ class="post_tag button button_translucent" data-position=3 title=拓扑学>拓扑学<span class=button_tally>3</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E6%95%B0%E5%80%BC%E8%AE%A1%E7%AE%97/ class="post_tag button button_translucent" data-position=3 title=数值计算>数值计算<span class=button_tally>3</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E6%95%B0%E5%AD%A6/ class="post_tag button button_translucent" data-position=3 title=数学>数学<span class=button_tally>3</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90/ class="post_tag button button_translucent" data-position=14 title=数学分析>数学分析<span class=button_tally>14</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/ class="post_tag button button_translucent" data-position=1 title=数据库>数据库<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E6%97%A0%E7%BA%BF%E9%80%9A%E4%BF%A1/ class="post_tag button button_translucent" data-position=2 title=无线通信>无线通信<span class=button_tally>2</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/ class="post_tag button button_translucent" data-position=13 title=机器学习>机器学习<span class=button_tally>13</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E6%A6%82%E7%8E%87%E7%BB%9F%E8%AE%A1%E9%9A%8F%E6%9C%BA%E8%BF%87%E7%A8%8B/ class="post_tag button button_translucent" data-position=27 title=概率统计随机过程>概率统计随机过程<span class=button_tally>27</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/ class="post_tag button button_translucent" data-position=1 title=正则表达式>正则表达式<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E6%B5%8B%E5%BA%A6%E8%AE%BA/ class="post_tag button button_translucent" data-position=12 title=测度论>测度论<span class=button_tally>12</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/ class="post_tag button button_translucent" data-position=2 title=深度学习>深度学习<span class=button_tally>2</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6/ class="post_tag button button_translucent" data-position=1 title=离散数学>离散数学<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E7%AE%97%E6%B3%95/ class="post_tag button button_translucent" data-position=3 title=算法>算法<span class=button_tally>3</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E7%AE%97%E6%B3%95%E7%90%86%E8%AE%BA/ class="post_tag button button_translucent" data-position=5 title=算法理论>算法理论<span class=button_tally>5</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E4%B8%8E%E7%9F%A9%E9%98%B5/ class="post_tag button button_translucent" data-position=18 title=线性代数与矩阵>线性代数与矩阵<span class=button_tally>18</span>
</a>
<a href=https://surprisedcat.github.io/categories/%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/ class="post_tag button button_translucent" data-position=2 title=组合数学>组合数学<span class=button_tally>2</span>
</a>
<div class=tags_sort><span title="sort alphabetically">字母</span><span title="sort by count">数量</span>
</div>
<span class=tags_hide><svg class="icon"><use xlink:href="#closeme"/></svg></span>
</div>
</div>
</nav>
</div>
<h4 class=mt-4>精选文章</h4>
<ul>
<li>
<a href=https://surprisedcat.github.io/projectnotes/hadoop-hdfs%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/ class=nav-link title=hadoop-HDFS集群部署>hadoop-HDFS集群部署</a>
</li>
<li>
<a href=https://surprisedcat.github.io/projectnotes/hadoop-%E6%90%AD%E5%BB%BAhadoop%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%8E%AF%E5%A2%83/ class=nav-link title=hadoop-搭建Hadoop虚拟机环境>hadoop-搭建Hadoop虚拟机环境</a>
</li>
<li>
<a href=https://surprisedcat.github.io/projectnotes/javascript-chrome%E6%89%A9%E5%B1%95%E5%AE%9E%E4%BE%8B%E4%B8%89/ class=nav-link title=javascript-Chrome扩展实例（三）>javascript-Chrome扩展实例（三）</a>
</li>
<li>
<a href=https://surprisedcat.github.io/projectnotes/javascript-chrome%E6%89%A9%E5%B1%95%E5%AE%9E%E4%BE%8B%E4%BA%8C/ class=nav-link title=javascript-Chrome扩展实例（二）>javascript-Chrome扩展实例（二）</a>
</li>
<li>
<a href=https://surprisedcat.github.io/projectnotes/javascript-chrome%E6%89%A9%E5%B1%95%E5%AE%9E%E4%BE%8B%E4%B8%80/ class=nav-link title=javascript-Chrome扩展实例（一）>javascript-Chrome扩展实例（一）</a>
</li>
</ul>
<h4 class=mt-4>最新文章</h4>
<ul class=flex-column>
<li>
<a href=https://surprisedcat.github.io/projectnotes/hadoop-hdfs%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/ class=nav-link title=hadoop-HDFS集群部署>hadoop-HDFS集群部署</a>
</li>
<li>
<a href=https://surprisedcat.github.io/projectnotes/hadoop-%E6%90%AD%E5%BB%BAhadoop%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%8E%AF%E5%A2%83/ class=nav-link title=hadoop-搭建Hadoop虚拟机环境>hadoop-搭建Hadoop虚拟机环境</a>
</li>
<li>
<a href=https://surprisedcat.github.io/projectnotes/ai-%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E7%8E%A9%E9%9B%85%E8%BE%BE%E5%88%A9%E6%B8%B8%E6%88%8Fatari-2600%E7%9A%84%E9%A2%84%E5%A4%84%E7%90%86/ class=nav-link title="AI-神经网络玩雅达利游戏(atari 2600)的预处理">AI-神经网络玩雅达利游戏(atari 2600)的预处理</a>
</li>
</ul>
<div>
<h4 class="mt-4 taxonomy" id=tags-section>标签</h4>
<nav class=tags_nav>
<a href=https://surprisedcat.github.io/tags/%E6%A6%82%E7%8E%87%E7%BB%9F%E8%AE%A1%E9%9A%8F%E6%9C%BA%E8%BF%87%E7%A8%8B/ class="post_tag button button_translucent" title=概率统计随机过程>
概率统计随机过程
<span class=button_tally>27</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E4%BC%98%E5%8C%96%E7%90%86%E8%AE%BA/ class="post_tag button button_translucent" title=优化理论>
优化理论
<span class=button_tally>21</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E4%B8%8E%E7%9F%A9%E9%98%B5/ class="post_tag button button_translucent" title=线性代数与矩阵>
线性代数与矩阵
<span class=button_tally>18</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90/ class="post_tag button button_translucent" title=数学分析>
数学分析
<span class=button_tally>14</span>
</a>
<a href=https://surprisedcat.github.io/tags/python/ class="post_tag button button_translucent" title=python>
PYTHON
<span class=button_tally>13</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/ class="post_tag button button_translucent" title=机器学习>
机器学习
<span class=button_tally>13</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E6%B5%8B%E5%BA%A6%E8%AE%BA/ class="post_tag button button_translucent" title=测度论>
测度论
<span class=button_tally>12</span>
</a>
<a href=https://surprisedcat.github.io/tags/linux/ class="post_tag button button_translucent" title=linux>
LINUX
<span class=button_tally>11</span>
</a>
<a href=https://surprisedcat.github.io/tags/shell/ class="post_tag button button_translucent" title=shell>
SHELL
<span class=button_tally>9</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E5%AE%9E%E5%8F%98%E5%87%BD%E6%95%B0/ class="post_tag button button_translucent" title=实变函数>
实变函数
<span class=button_tally>8</span>
</a>
<br>
<div class="post_tags_toggle button">所有标签</div>
<div class=post_tags>
<div class=tags_list>
<a href=https://surprisedcat.github.io/tags/a/ class="post_tag button button_translucent" data-position=1 title=a>A<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/tags/ai/ class="post_tag button button_translucent" data-position=1 title=ai>AI<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/tags/bugs/ class="post_tag button button_translucent" data-position=1 title=bugs>BUGS<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/tags/cli%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B/ class="post_tag button button_translucent" data-position=6 title=cli处理流程>CLI处理流程<span class=button_tally>6</span>
</a>
<a href=https://surprisedcat.github.io/tags/cplus/ class="post_tag button button_translucent" data-position=4 title=cplus>CPLUS<span class=button_tally>4</span>
</a>
<a href=https://surprisedcat.github.io/tags/devops/ class="post_tag button button_translucent" data-position=1 title=devops>DEVOPS<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/tags/docker/ class="post_tag button button_translucent" data-position=2 title=docker>DOCKER<span class=button_tally>2</span>
</a>
<a href=https://surprisedcat.github.io/tags/ecmascript/ class="post_tag button button_translucent" data-position=5 title=ecmascript>ECMASCRIPT<span class=button_tally>5</span>
</a>
<a href=https://surprisedcat.github.io/tags/hadoop/ class="post_tag button button_translucent" data-position=2 title=hadoop>HADOOP<span class=button_tally>2</span>
</a>
<a href=https://surprisedcat.github.io/tags/ide/ class="post_tag button button_translucent" data-position=2 title=ide>IDE<span class=button_tally>2</span>
</a>
<a href=https://surprisedcat.github.io/tags/javascript/ class="post_tag button button_translucent" data-position=5 title=javascript>JAVASCRIPT<span class=button_tally>5</span>
</a>
<a href=https://surprisedcat.github.io/tags/jekyll/ class="post_tag button button_translucent" data-position=2 title=jekyll>JEKYLL<span class=button_tally>2</span>
</a>
<a href=https://surprisedcat.github.io/tags/linux/ class="post_tag button button_translucent" data-position=11 title=linux>LINUX<span class=button_tally>11</span>
</a>
<a href=https://surprisedcat.github.io/tags/linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86/ class="post_tag button button_translucent" data-position=1 title=linux文本处理>LINUX文本处理<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/tags/matlab/ class="post_tag button button_translucent" data-position=4 title=matlab>MATLAB<span class=button_tally>4</span>
</a>
<a href=https://surprisedcat.github.io/tags/python/ class="post_tag button button_translucent" data-position=13 title=python>PYTHON<span class=button_tally>13</span>
</a>
<a href=https://surprisedcat.github.io/tags/pytorch/ class="post_tag button button_translucent" data-position=1 title=pytorch>PYTORCH<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/tags/raspberry/ class="post_tag button button_translucent" data-position=7 title=raspberry>RASPBERRY<span class=button_tally>7</span>
</a>
<a href=https://surprisedcat.github.io/tags/shell/ class="post_tag button button_translucent" data-position=9 title=shell>SHELL<span class=button_tally>9</span>
</a>
<a href=https://surprisedcat.github.io/tags/tensorflow/ class="post_tag button button_translucent" data-position=4 title=tensorflow>TENSORFLOW<span class=button_tally>4</span>
</a>
<a href=https://surprisedcat.github.io/tags/windows/ class="post_tag button button_translucent" data-position=1 title=windows>WINDOWS<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E4%BC%98%E5%8C%96%E7%90%86%E8%AE%BA/ class="post_tag button button_translucent" data-position=21 title=优化理论>优化理论<span class=button_tally>21</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E5%8D%9A%E5%BC%88%E8%AE%BA/ class="post_tag button button_translucent" data-position=3 title=博弈论>博弈论<span class=button_tally>3</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E5%8F%98%E5%88%86%E6%B3%95/ class="post_tag button button_translucent" data-position=4 title=变分法>变分法<span class=button_tally>4</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/ class="post_tag button button_translucent" data-position=1 title=图像处理>图像处理<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E5%A4%8D%E5%8F%98%E5%87%BD%E6%95%B0/ class="post_tag button button_translucent" data-position=1 title=复变函数>复变函数<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/ class="post_tag button button_translucent" data-position=2 title=大数据>大数据<span class=button_tally>2</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E5%AE%89%E5%85%A8/ class="post_tag button button_translucent" data-position=1 title=安全>安全<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E5%AE%9E%E5%8F%98%E5%87%BD%E6%95%B0/ class="post_tag button button_translucent" data-position=8 title=实变函数>实变函数<span class=button_tally>8</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/ class="post_tag button button_translucent" data-position=5 title=强化学习>强化学习<span class=button_tally>5</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E6%8B%93%E6%89%91%E5%AD%A6/ class="post_tag button button_translucent" data-position=3 title=拓扑学>拓扑学<span class=button_tally>3</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E6%95%B0%E5%80%BC%E8%AE%A1%E7%AE%97/ class="post_tag button button_translucent" data-position=3 title=数值计算>数值计算<span class=button_tally>3</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E6%95%B0%E5%AD%A6/ class="post_tag button button_translucent" data-position=3 title=数学>数学<span class=button_tally>3</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90/ class="post_tag button button_translucent" data-position=14 title=数学分析>数学分析<span class=button_tally>14</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/ class="post_tag button button_translucent" data-position=1 title=数据库>数据库<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E6%95%B0%E7%90%86%E7%BB%9F%E8%AE%A1/ class="post_tag button button_translucent" data-position=1 title=数理统计>数理统计<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E6%97%A0%E7%BA%BF%E9%80%9A%E4%BF%A1/ class="post_tag button button_translucent" data-position=2 title=无线通信>无线通信<span class=button_tally>2</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/ class="post_tag button button_translucent" data-position=13 title=机器学习>机器学习<span class=button_tally>13</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E6%A6%82%E7%8E%87%E7%BB%9F%E8%AE%A1%E9%9A%8F%E6%9C%BA%E8%BF%87%E7%A8%8B/ class="post_tag button button_translucent" data-position=27 title=概率统计随机过程>概率统计随机过程<span class=button_tally>27</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/ class="post_tag button button_translucent" data-position=1 title=正则表达式>正则表达式<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E6%B5%8B%E5%BA%A6%E8%AE%BA/ class="post_tag button button_translucent" data-position=12 title=测度论>测度论<span class=button_tally>12</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/ class="post_tag button button_translucent" data-position=2 title=深度学习>深度学习<span class=button_tally>2</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6/ class="post_tag button button_translucent" data-position=1 title=离散数学>离散数学<span class=button_tally>1</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E7%AE%97%E6%B3%95/ class="post_tag button button_translucent" data-position=5 title=算法>算法<span class=button_tally>5</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E7%AE%97%E6%B3%95%E7%90%86%E8%AE%BA/ class="post_tag button button_translucent" data-position=5 title=算法理论>算法理论<span class=button_tally>5</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E4%B8%8E%E7%9F%A9%E9%98%B5/ class="post_tag button button_translucent" data-position=18 title=线性代数与矩阵>线性代数与矩阵<span class=button_tally>18</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/ class="post_tag button button_translucent" data-position=2 title=组合数学>组合数学<span class=button_tally>2</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E7%BB%9F%E8%AE%A1%E5%AD%A6/ class="post_tag button button_translucent" data-position=3 title=统计学>统计学<span class=button_tally>3</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/ class="post_tag button button_translucent" data-position=2 title=读书笔记>读书笔记<span class=button_tally>2</span>
</a>
<a href=https://surprisedcat.github.io/tags/%E8%B4%9D%E5%8F%B6%E6%96%AF%E7%BB%9F%E8%AE%A1/ class="post_tag button button_translucent" data-position=2 title=贝叶斯统计>贝叶斯统计<span class=button_tally>2</span>
</a>
<div class=tags_sort><span title="sort alphabetically">字母</span><span title="sort by count">数量</span>
</div>
<span class=tags_hide><svg class="icon"><use xlink:href="#closeme"/></svg></span>
</div>
</div>
</nav>
</div>
</section>
</aside>
</div>
</main><svg width="0" height="0" class="hidden"><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="facebook"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h151V331h-60v-90h60v-61c0-49.629 40.371-90 90-90h91v90h-91v61h91l-15 90h-76v181h121c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.001 18.001" id="twitter"><path d="M15.891 4.013c.808-.496 1.343-1.173 1.605-2.034a8.68 8.68.0 01-2.351.861c-.703-.756-1.593-1.14-2.66-1.14-1.043.0-1.924.366-2.643 1.078A3.56 3.56.0 008.766 5.383c0 .309.039.585.117.819-3.076-.105-5.622-1.381-7.628-3.837-.34.601-.51 1.213-.51 1.846.0 1.301.549 2.332 1.645 3.089-.625-.053-1.176-.211-1.645-.47.0.929.273 1.705.82 2.388a3.623 3.623.0 002.115 1.291c-.312.08-.641.118-.979.118-.312.0-.533-.026-.664-.083.23.757.664 1.371 1.291 1.841a3.652 3.652.0 002.152.743C4.148 14.173 2.625 14.69.902 14.69c-.422.0-.721-.006-.902-.038 1.697 1.102 3.586 1.649 5.676 1.649 2.139.0 4.029-.542 5.674-1.626 1.645-1.078 2.859-2.408 3.639-3.974a10.77 10.77.0 001.172-4.892v-.468a7.788 7.788.0 001.84-1.921 8.142 8.142.0 01-2.11.593z"/></symbol><symbol aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="mail"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V4e2c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5.0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="calendar"><path d="M452 40h-24V0h-40v40H124V0H84v40H60C26.916 40 0 66.916.0 1e2v352c0 33.084 26.916 60 60 60h392c33.084.0 60-26.916 60-60V1e2c0-33.084-26.916-60-60-60zm20 412c0 11.028-8.972 20-20 20H60c-11.028.0-20-8.972-20-20V188h432v264zm0-304H40v-48c0-11.028 8.972-20 20-20h24v40h40V80h264v40h40V80h24c11.028.0 20 8.972 20 20v48z"/><path d="M76 230h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 310h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 390h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80-80h40v40h-40z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="github"><path d="M255.968 5.329C114.624 5.329.0 120.401.0 262.353c0 113.536 73.344 209.856 175.104 243.872 12.8 2.368 17.472-5.568 17.472-12.384.0-6.112-.224-22.272-.352-43.712-71.2 15.52-86.24-34.464-86.24-34.464-11.616-29.696-28.416-37.6-28.416-37.6-23.264-15.936 1.728-15.616 1.728-15.616 25.696 1.824 39.2 26.496 39.2 26.496 22.848 39.264 59.936 27.936 74.528 21.344 2.304-16.608 8.928-27.936 16.256-34.368-56.832-6.496-116.608-28.544-116.608-127.008.0-28.064 9.984-51.008 26.368-68.992-2.656-6.496-11.424-32.64 2.496-68 0 0 21.504-6.912 70.4 26.336 20.416-5.696 42.304-8.544 64.096-8.64 21.728.128 43.648 2.944 64.096 8.672 48.864-33.248 70.336-26.336 70.336-26.336 13.952 35.392 5.184 61.504 2.56 68 16.416 17.984 26.304 40.928 26.304 68.992.0 98.72-59.84 120.448-116.864 126.816 9.184 7.936 17.376 23.616 17.376 47.584.0 34.368-.32 62.08-.32 70.496.0 6.88 4.608 14.88 17.6 12.352C438.72 472.145 512 375.857 512 262.353 512 120.401 397.376 5.329 255.968 5.329z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 212 212" id="gitlab"><path d="M12.3 74.7h54L43.3 3c-1-3.6-6.4-3.6-7.6.0L12.3 74.8z"/><path d="M12.3 74.7.5 111c-1 3.2.0 6.8 3 8.8l101.6 74-92.5-119z"/><path d="M105 193.7l-38.6-119h-54l92.7 119z"/><path d="M105 193.7l38.7-119H66.4l38.7 119z"/><path d="M105 193.7l38.7-119H198l-93 119z"/><path d="M198 74.7l11.6 36.2c1 3 0 6.6-3 8.6l-101.5 74 93-119z"/><path d="M198 74.7h-54.3L167 3c1.2-3.6 6.4-3.6 7.6.0L198 74.8z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="rss"><circle cx="3.429" cy="20.571" r="3.429"/><path d="M11.429 24h4.57C15.999 15.179 8.821 8.001.0 8v4.572c6.302.001 11.429 5.126 11.429 11.428z"/><path d="M24 24C24 10.766 13.234.0.0.0v4.571c10.714.0 19.43 8.714 19.43 19.429z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="linkedin"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h362c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.54-13.46-30-30-30s-30 13.46-30 30v120h-60V196h60v11.309C286.719 202.422 296.93 196 316 196c40.691.043 75 36.547 75 79.688zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" id="arrow"><path d="M604.501 440.509 325.398 134.956c-5.331-5.357-12.423-7.627-19.386-7.27-6.989-.357-14.056 1.913-19.387 7.27L7.499 440.509c-9.999 10.024-9.999 26.298.0 36.323s26.223 10.024 36.222.0l262.293-287.164L568.28 476.832c9.999 10.024 26.222 10.024 36.221.0 9.999-10.023 9.999-26.298.0-36.323z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="carly"><path d="M504.971 239.029 448 182.059V84c0-46.317-37.682-84-84-84h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c19.851.0 36 16.149 36 36v108c0 6.365 2.529 12.47 7.029 16.971L454.059 256l-47.029 47.029A24.002 24.002.0 004e2 320v108c0 19.851-16.149 36-36 36h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c46.318.0 84-37.683 84-84v-98.059l56.971-56.971c9.372-9.372 9.372-24.568.0-33.941zM112 192V84c0-19.851 16.149-36 36-36h44c13.255.0 24-10.745 24-24S205.255.0 192 0h-44c-46.318.0-84 37.683-84 84v98.059l-56.971 56.97c-9.373 9.373-9.373 24.568.0 33.941L64 329.941V428c0 46.317 37.682 84 84 84h44c13.255.0 24-10.745 24-24s-10.745-24-24-24h-44c-19.851.0-36-16.149-36-36V320c0-6.365-2.529-12.47-7.029-16.971L57.941 256l47.029-47.029A24.002 24.002.0 00112 192z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="copy"><path d="M23 2.75A2.75 2.75.0 0020.25.0H8.75A2.75 2.75.0 006 2.75v13.5A2.75 2.75.0 008.75 19h11.5A2.75 2.75.0 0023 16.25zM18.25 14.5h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5z"/><path d="M8.75 20.5A4.255 4.255.0 014.5 16.25V2.75c0-.086.02-.166.025-.25H3.75A2.752 2.752.0 001 5.25v16A2.752 2.752.0 003.75 24h12a2.752 2.752.0 002.75-2.75v-.75z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001" id="closeme"><path d="M284.286 256.002 506.143 34.144c7.811-7.811 7.811-20.475.0-28.285-7.811-7.81-20.475-7.811-28.285.0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285.0-7.81 7.811-7.811 20.475.0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475.0 28.285a19.938 19.938.0 0014.143 5.857 19.94 19.94.0 0014.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475.0-28.285L284.286 256.002z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="open-menu"><path d="M492 236H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0-160H20C8.954 76 0 84.954.0 96s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0 320H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="instagram"><path d="M12 2.163c3.204.0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849.0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204.0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849.0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741.0 8.333.014 7.053.072c-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.668.072 4.948c.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24s3.668-.014 4.948-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948s-.014-3.667-.072-4.947c-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403.0-6.162 2.759-6.162 6.162S8.597 18.163 12 18.163s6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zM12 16c-2.209.0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796.0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795.0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="youtube"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23.0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23.0C23.512 20.55 23.971 18.196 24 12c-.029-6.185-.484-8.549-4.385-8.816zM9 16V8l8 3.993L9 16z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="stackoverflow"><path d="M21 27v-8h3v11H0V19h3v8h18z"/><path d="M17.1.2 15 1.8l7.9 10.6 2.1-1.6L17.1.2zm3.7 14.7L10.6 6.4l1.7-2 10.2 8.5-1.7 2zM7.2 12.3l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm-1.8 6.8 13.56 1.96.17-2.38-13.26-2.55-.47 2.97zM19 25H5v-3h14v3z"/></symbol></svg>
<link rel=stylesheet href=../../katex/katex.min.css>
<script defer src=../../katex/katex.min.js></script>
<script defer src=../../katex/contrib/auto-render.js onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script>
<footer class=footer>
<div class="footer_inner wrap pale">
<img src=https://surprisedcat.github.io/icons/apple-touch-icon.png class="icon icon_2 transparent" alt=SurprisedCat>
<p>Copyright&nbsp;2020-&nbsp;<span class=year></span>&nbsp;SURPRISEDCAT. All Rights Reserved</p><a class=to_top href=#documentTop><svg class="icon"><use xlink:href="#arrow"/></svg>
</a>
</div>
</footer>
<script type=text/javascript src=https://surprisedcat.github.io/js/bundle.min.d42eaf65945a88c7a467385caae103c01ac5ca08a2c6b1751c446b8f6738f3aa0709195716639fbb56728b4e82d68f047d6cb08b7fa4044d74ef28f7085086f2.js integrity="sha512-1C6vZZRaiMekZzhcquEDwBrFygiixrF1HERrj2c486oHCRlXFmOfu1Zyi06C1o8EfWywi3+kBE107yj3CFCG8g==" crossorigin=anonymous></script>
</body>
</html>